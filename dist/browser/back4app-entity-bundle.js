// Copyright Joyent, Inc. and other Node contributors.
//
// Permission is hereby granted, free of charge, to any person obtaining a
// copy of this software and associated documentation files (the
// "Software"), to deal in the Software without restriction, including
// without limitation the rights to use, copy, modify, merge, publish,
// distribute, sublicense, and/or sell copies of the Software, and to permit
// persons to whom the Software is furnished to do so, subject to the
// following conditions:
//
// The above copyright notice and this permission notice shall be included
// in all copies or substantial portions of the Software.
//
// THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS
// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN
// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,
// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR
// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE
// USE OR OTHER DEALINGS IN THE SOFTWARE.

/*!
 * chai
 * Copyright(c) 2011-2014 Jake Luer <jake@alogicalparadox.com>
 * MIT Licensed
 */

/*!
 * Chai version
 */

/*!
 * Assertion Error
 */

/*!
 * Utils for plugins (not exported)
 */

/*!
 * Utility Functions
 */

/*!
 * Configuration
 */

/*!
 * Primary `Assertion` prototype
 */

/*!
 * Core Assertions
 */

/*!
 * Expect interface
 */

/*!
 * Should interface
 */

/*!
 * Assert interface
 */

/*!
 * chai
 * http://chaijs.com
 * Copyright(c) 2011-2014 Jake Luer <jake@alogicalparadox.com>
 * MIT Licensed
 */

/*!
   * Module dependencies.
   */

/*!
   * Module export.
   */

/*!
   * Assertion Constructor
   *
   * Creates object for chaining.
   *
   * @api private
   */

/*!
   * ### ._obj
   *
   * Quick reference to stored `actual` value for plugin developers.
   *
   * @api private
   */

/*!
   * Chai dependencies.
   */

/*!
   * ### .ifError(object)
   *
   * Asserts if value is not a false value, and throws if it is a true value.
   * This is added to allow for chai to be a drop-in replacement for Node's
   * assert class.
   *
   *     var err = new Error('I am a custom error');
   *     assert.ifError(err); // Rethrows err!
   *
   * @name ifError
   * @param {Object} object
   * @api public
   */

/*!
   * Aliases.
   */

/*!
 * Chai - addChainingMethod utility
 * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
 * MIT Licensed
 */

/*!
 * Module dependencies
 */

/*!
 * Module variables
 */

/*!
 * Chai - addMethod utility
 * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
 * MIT Licensed
 */

/*!
 * Chai - addProperty utility
 * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
 * MIT Licensed
 */

/*!
 * Chai - expectTypes utility
 * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
 * MIT Licensed
 */

/*!
 * Chai - flag utility
 * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
 * MIT Licensed
 */

/*!
 * Chai - getActual utility
 * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
 * MIT Licensed
 */

/*!
 * Chai - getEnumerableProperties utility
 * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
 * MIT Licensed
 */

/*!
 * Chai - message composition utility
 * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
 * MIT Licensed
 */

/*!
 * Module dependancies
 */

/*!
 * Chai - getName utility
 * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
 * MIT Licensed
 */

/*!
 * Chai - getPathInfo utility
 * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
 * MIT Licensed
 */

/*!
 * ## parsePath(path)
 *
 * Helper function used to parse string object
 * paths. Use in conjunction with `_getPathValue`.
 *
 *      var parsed = parsePath('myobject.property.subprop');
 *
 * ### Paths:
 *
 * * Can be as near infinitely deep and nested
 * * Arrays are also valid using the formal `myobject.document[3].property`.
 * * Literal dots and brackets (not delimiter) must be backslash-escaped.
 *
 * @param {String} path
 * @returns {Object} parsed
 * @api private
 */

/*!
 * ## _getPathValue(parsed, obj)
 *
 * Helper companion function for `.parsePath` that returns
 * the value located at the parsed address.
 *
 *      var value = getPathValue(parsed, obj);
 *
 * @param {Object} parsed definition from `parsePath`.
 * @param {Object} object to search against
 * @param {Number} object to search against
 * @returns {Object|Undefined} value
 * @api private
 */

/*!
 * Chai - getPathValue utility
 * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
 * @see https://github.com/logicalparadox/filtr
 * MIT Licensed
 */

/*!
 * Chai - getProperties utility
 * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
 * MIT Licensed
 */

/*!
 * Chai - hasProperty utility
 * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
 * MIT Licensed
 */

/*!
 * chai
 * Copyright(c) 2011 Jake Luer <jake@alogicalparadox.com>
 * MIT Licensed
 */

/*!
 * Main exports
 */

/*!
 * test utility
 */

/*!
 * type utility
 */

/*!
 * expectTypes utility
 */

/*!
 * message utility
 */

/*!
 * actual utility
 */

/*!
 * Inspect util
 */

/*!
 * Object Display util
 */

/*!
 * Flag utility
 */

/*!
 * Flag transferring utility
 */

/*!
 * Deep equal utility
 */

/*!
 * Deep path value
 */

/*!
 * Deep path info
 */

/*!
 * Check if a property exists
 */

/*!
 * Function name
 */

/*!
 * add Property
 */

/*!
 * add Method
 */

/*!
 * overwrite Property
 */

/*!
 * overwrite Method
 */

/*!
 * Add a chainable method
 */

/*!
 * Overwrite chainable method
 */

/*!
 * Chai - overwriteChainableMethod utility
 * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
 * MIT Licensed
 */

/*!
 * Chai - overwriteMethod utility
 * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
 * MIT Licensed
 */

/*!
 * Chai - overwriteProperty utility
 * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
 * MIT Licensed
 */

/*!
 * Chai - test utility
 * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
 * MIT Licensed
 */

/*!
 * Chai - transferFlags utility
 * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
 * MIT Licensed
 */

/*!
 * assertion-error
 * Copyright(c) 2013 Jake Luer <jake@qualiancy.com>
 * MIT Licensed
 */

/*!
 * Return a function that will copy properties from
 * one object to another excluding any originally
 * listed. Returned function will create a new `{}`.
 *
 * @param {String} excluded properties ...
 * @return {Function}
 */

/*!
 * Primary Exports
 */

/*!
 * Inherit from Error.prototype
 */

/*!
 * Statically set name
 */

/*!
 * Ensure correct constructor
 */

/*!
 * deep-eql
 * Copyright(c) 2013 Jake Luer <jake@alogicalparadox.com>
 * MIT Licensed
 */

/*!
 * Buffer.isBuffer browser shim
 */

/*!
 * Primary Export
 */

/*!
 * Strict (egal) equality test. Ensures that NaN always
 * equals NaN and `-0` does not equal `+0`.
 *
 * @param {Mixed} a
 * @param {Mixed} b
 * @return {Boolean} equal match
 */

/*!
 * Compare the types of two given objects and
 * return if they are equal. Note that an Array
 * has a type of `array` (not `object`) and arguments
 * have a type of `arguments` (not `array`/`object`).
 *
 * @param {Mixed} a
 * @param {Mixed} b
 * @return {Boolean} result
 */

/*!
 * Compare two Date objects by asserting that
 * the time values are equal using `saveValue`.
 *
 * @param {Date} a
 * @param {Date} b
 * @return {Boolean} result
 */

/*!
 * Compare two regular expressions by converting them
 * to string and checking for `sameValue`.
 *
 * @param {RegExp} a
 * @param {RegExp} b
 * @return {Boolean} result
 */

/*!
 * Assert deep equality of two `arguments` objects.
 * Unfortunately, these must be sliced to arrays
 * prior to test to ensure no bad behavior.
 *
 * @param {Arguments} a
 * @param {Arguments} b
 * @param {Array} memoize (optional)
 * @return {Boolean} result
 */

/*!
 * Get enumerable properties of a given object.
 *
 * @param {Object} a
 * @return {Array} property names
 */

/*!
 * Simple equality for flat iterable objects
 * such as Arrays or Node.js buffers.
 *
 * @param {Iterable} a
 * @param {Iterable} b
 * @return {Boolean} result
 */

/*!
 * Extension to `iterableEqual` specifically
 * for Node.js Buffers.
 *
 * @param {Buffer} a
 * @param {Mixed} b
 * @return {Boolean} result
 */

/*!
 * Block for `objectEqual` ensuring non-existing
 * values don't get in.
 *
 * @param {Mixed} object
 * @return {Boolean} result
 */

/*!
 * Recursively check the equality of two objects.
 * Once basic sameness has been established it will
 * defer to `deepEqual` for each enumerable key
 * in the object.
 *
 * @param {Mixed} a
 * @param {Mixed} b
 * @return {Boolean} result
 */

/*!
 * type-detect
 * Copyright(c) 2013 jake luer <jake@alogicalparadox.com>
 * MIT Licensed
 */

/*!
 * Detectable javascript natives
 */

/* @preserve
 * The MIT License (MIT)
 * 
 * Copyright (c) 2013-2015 Petka Antonov
 * 
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 * 
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 * 
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT.  IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 * 
 */

//     uuid.js
//
//     Copyright (c) 2010-2012 Robert Kieffer
//     MIT License - http://opensource.org/licenses/mit-license.php

/*
 Copyright (c) 2012 Nevins Bartolomeo <nevins.bartolomeo@gmail.com>
 Copyright (c) 2012 Shane Girish <shaneGirish@gmail.com>
 Copyright (c) 2014 Daniel Wirtz <dcode@dcode.io>

 Redistribution and use in source and binary forms, with or without
 modification, are permitted provided that the following conditions
 are met:
 1. Redistributions of source code must retain the above copyright
 notice, this list of conditions and the following disclaimer.
 2. Redistributions in binary form must reproduce the above copyright
 notice, this list of conditions and the following disclaimer in the
 documentation and/or other materials provided with the distribution.
 3. The name of the author may not be used to endorse or promote products
 derived from this software without specific prior written permission.

 THIS SOFTWARE IS PROVIDED BY THE AUTHOR ``AS IS'' AND ANY EXPRESS OR
 IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES
 OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED.
 IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY DIRECT, INDIRECT,
 INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT
 NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,
 DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY
 THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
 (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF
 THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 */

/**
 * @license bcrypt.js (c) 2013 Daniel Wirtz <dcode@dcode.io>
 * Released under the Apache License, Version 2.0
 * see: https://github.com/dcodeIO/bcrypt.js for details
 */

/**
     * utfx-embeddable (c) 2014 Daniel Wirtz <dcode@dcode.io>
     * Released under the Apache License, Version 2.0
     * see: https://github.com/dcodeIO/utfx for details
     */

!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define("util",[],e);else{var t;"undefined"!=typeof window?t=window:"undefined"!=typeof global?t=global:"undefined"!=typeof self&&(t=self),t.util=e()}}(function(){var e,t,n;return function r(e,t,n){function i(o,u){if(!t[o]){if(!e[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(s)return s(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=t[o]={exports:{}};e[o][0].call(l.exports,function(t){var n=e[o][1][t];return i(n?n:t)},l,l.exports,r,e,t,n)}return t[o].exports}var s=typeof require=="function"&&require;for(var o=0;o<n.length;o++)i(n[o]);return i}({1:[function(e,t,n){typeof Object.create=="function"?t.exports=function(t,n){t.super_=n,t.prototype=Object.create(n.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}})}:t.exports=function(t,n){t.super_=n;var r=function(){};r.prototype=n.prototype,t.prototype=new r,t.prototype.constructor=t}},{}],2:[function(e,t,n){function i(){}var r=t.exports={};r.nextTick=function(){var e=typeof window!="undefined"&&window.setImmediate,t=typeof window!="undefined"&&window.MutationObserver,n=typeof window!="undefined"&&window.postMessage&&window.addEventListener;if(e)return function(e){return window.setImmediate(e)};var r=[];if(t){var i=document.createElement("div"),s=new MutationObserver(function(){var e=r.slice();r.length=0,e.forEach(function(e){e()})});return s.observe(i,{attributes:!0}),function(t){r.length||i.setAttribute("yes","no"),r.push(t)}}return n?(window.addEventListener("message",function(e){var t=e.source;if((t===window||t===null)&&e.data==="process-tick"){e.stopPropagation();if(r.length>0){var n=r.shift();n()}}},!0),function(t){r.push(t),window.postMessage("process-tick","*")}):function(t){setTimeout(t,0)}}(),r.title="browser",r.browser=!0,r.env={},r.argv=[],r.on=i,r.addListener=i,r.once=i,r.off=i,r.removeListener=i,r.removeAllListeners=i,r.emit=i,r.binding=function(e){throw new Error("process.binding is not supported")},r.cwd=function(){return"/"},r.chdir=function(e){throw new Error("process.chdir is not supported")}},{}],3:[function(e,t,n){t.exports=function(t){return t&&typeof t=="object"&&typeof t.copy=="function"&&typeof t.fill=="function"&&typeof t.readUInt8=="function"}},{}],4:[function(e,t,n){(function(t,r){function u(e,t){var r={seen:[],stylize:f};return arguments.length>=3&&(r.depth=arguments[2]),arguments.length>=4&&(r.colors=arguments[3]),y(t)?r.showHidden=t:t&&n._extend(r,t),T(r.showHidden)&&(r.showHidden=!1),T(r.depth)&&(r.depth=2),T(r.colors)&&(r.colors=!1),T(r.customInspect)&&(r.customInspect=!0),r.colors&&(r.stylize=a),c(r,e,r.depth)}function a(e,t){var n=u.styles[t];return n?"["+u.colors[n][0]+"m"+e+"["+u.colors[n][1]+"m":e}function f(e,t){return e}function l(e){var t={};return e.forEach(function(e,n){t[e]=!0}),t}function c(e,t,r){if(e.customInspect&&t&&A(t.inspect)&&t.inspect!==n.inspect&&(!t.constructor||t.constructor.prototype!==t)){var i=t.inspect(r,e);return S(i)||(i=c(e,i,r)),i}var s=h(e,t);if(s)return s;var o=Object.keys(t),u=l(o);e.showHidden&&(o=Object.getOwnPropertyNames(t));if(L(t)&&(o.indexOf("message")>=0||o.indexOf("description")>=0))return p(t);if(o.length===0){if(A(t)){var a=t.name?": "+t.name:"";return e.stylize("[Function"+a+"]","special")}if(N(t))return e.stylize(RegExp.prototype.toString.call(t),"regexp");if(k(t))return e.stylize(Date.prototype.toString.call(t),"date");if(L(t))return p(t)}var f="",y=!1,b=["{","}"];g(t)&&(y=!0,b=["[","]"]);if(A(t)){var w=t.name?": "+t.name:"";f=" [Function"+w+"]"}N(t)&&(f=" "+RegExp.prototype.toString.call(t)),k(t)&&(f=" "+Date.prototype.toUTCString.call(t)),L(t)&&(f=" "+p(t));if(o.length!==0||!!y&&t.length!=0){if(r<0)return N(t)?e.stylize(RegExp.prototype.toString.call(t),"regexp"):e.stylize("[Object]","special");e.seen.push(t);var E;return y?E=d(e,t,r,u,o):E=o.map(function(n){return v(e,t,r,u,n,y)}),e.seen.pop(),m(E,f,b)}return b[0]+f+b[1]}function h(e,t){if(T(t))return e.stylize("undefined","undefined");if(S(t)){var n="'"+JSON.stringify(t).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return e.stylize(n,"string")}if(E(t))return e.stylize(""+t,"number");if(y(t))return e.stylize(""+t,"boolean");if(b(t))return e.stylize("null","null")}function p(e){return"["+Error.prototype.toString.call(e)+"]"}function d(e,t,n,r,i){var s=[];for(var o=0,u=t.length;o<u;++o)H(t,String(o))?s.push(v(e,t,n,r,String(o),!0)):s.push("");return i.forEach(function(i){i.match(/^\d+$/)||s.push(v(e,t,n,r,i,!0))}),s}function v(e,t,n,r,i,s){var o,u,a;a=Object.getOwnPropertyDescriptor(t,i)||{value:t[i]},a.get?a.set?u=e.stylize("[Getter/Setter]","special"):u=e.stylize("[Getter]","special"):a.set&&(u=e.stylize("[Setter]","special")),H(r,i)||(o="["+i+"]"),u||(e.seen.indexOf(a.value)<0?(b(n)?u=c(e,a.value,null):u=c(e,a.value,n-1),u.indexOf("\n")>-1&&(s?u=u.split("\n").map(function(e){return"  "+e}).join("\n").substr(2):u="\n"+u.split("\n").map(function(e){return"   "+e}).join("\n"))):u=e.stylize("[Circular]","special"));if(T(o)){if(s&&i.match(/^\d+$/))return u;o=JSON.stringify(""+i),o.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(o=o.substr(1,o.length-2),o=e.stylize(o,"name")):(o=o.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),o=e.stylize(o,"string"))}return o+": "+u}function m(e,t,n){var r=0,i=e.reduce(function(e,t){return r++,t.indexOf("\n")>=0&&r++,e+t.replace(/\u001b\[\d\d?m/g,"").length+1},0);return i>60?n[0]+(t===""?"":t+"\n ")+" "+e.join(",\n  ")+" "+n[1]:n[0]+t+" "+e.join(", ")+" "+n[1]}function g(e){return Array.isArray(e)}function y(e){return typeof e=="boolean"}function b(e){return e===null}function w(e){return e==null}function E(e){return typeof e=="number"}function S(e){return typeof e=="string"}function x(e){return typeof e=="symbol"}function T(e){return e===void 0}function N(e){return C(e)&&M(e)==="[object RegExp]"}function C(e){return typeof e=="object"&&e!==null}function k(e){return C(e)&&M(e)==="[object Date]"}function L(e){return C(e)&&(M(e)==="[object Error]"||e instanceof Error)}function A(e){return typeof e=="function"}function O(e){return e===null||typeof e=="boolean"||typeof e=="number"||typeof e=="string"||typeof e=="symbol"||typeof e=="undefined"}function M(e){return Object.prototype.toString.call(e)}function _(e){return e<10?"0"+e.toString(10):e.toString(10)}function P(){var e=new Date,t=[_(e.getHours()),_(e.getMinutes()),_(e.getSeconds())].join(":");return[e.getDate(),D[e.getMonth()],t].join(" ")}function H(e,t){return Object.prototype.hasOwnProperty.call(e,t)}var i=/%[sdj%]/g;n.format=function(e){if(!S(e)){var t=[];for(var n=0;n<arguments.length;n++)t.push(u(arguments[n]));return t.join(" ")}var n=1,r=arguments,s=r.length,o=String(e).replace(i,function(e){if(e==="%%")return"%";if(n>=s)return e;switch(e){case"%s":return String(r[n++]);case"%d":return Number(r[n++]);case"%j":try{return JSON.stringify(r[n++])}catch(t){return"[Circular]"};default:return e}});for(var a=r[n];n<s;a=r[++n])b(a)||!C(a)?o+=" "+a:o+=" "+u(a);return o},n.deprecate=function(e,i){function o(){if(!s){if(t.throwDeprecation)throw new Error(i);t.traceDeprecation?console.trace(i):console.error(i),s=!0}return e.apply(this,arguments)}if(T(r.process))return function(){return n.deprecate(e,i).apply(this,arguments)};if(t.noDeprecation===!0)return e;var s=!1;return o};var s={},o;n.debuglog=function(e){T(o)&&(o=t.env.NODE_DEBUG||""),e=e.toUpperCase();if(!s[e])if((new RegExp("\\b"+e+"\\b","i")).test(o)){var r=t.pid;s[e]=function(){var t=n.format.apply(n,arguments);console.error("%s %d: %s",e,r,t)}}else s[e]=function(){};return s[e]},n.inspect=u,u.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},u.styles={special:"cyan",number:"yellow","boolean":"yellow","undefined":"grey","null":"bold",string:"green",date:"magenta",regexp:"red"},n.isArray=g,n.isBoolean=y,n.isNull=b,n.isNullOrUndefined=w,n.isNumber=E,n.isString=S,n.isSymbol=x,n.isUndefined=T,n.isRegExp=N,n.isObject=C,n.isDate=k,n.isError=L,n.isFunction=A,n.isPrimitive=O,n.isBuffer=e("./support/isBuffer");var D=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];n.log=function(){console.log("%s - %s",P(),n.format.apply(n,arguments))},n.inherits=e("inherits"),n._extend=function(e,t){if(!t||!C(t))return e;var n=Object.keys(t),r=n.length;while(r--)e[n[r]]=t[n[r]];return e}}).call(this,e("_process"),typeof global!="undefined"?global:typeof self!="undefined"?self:typeof window!="undefined"?window:{})},{"./support/isBuffer":3,_process:2,inherits:1}],5:[function(e,t,n){t.exports=e("util")},{util:4}]},{},[5])(5)}),function(e){if(typeof exports=="object"&&typeof module!="undefined")module.exports=e();else if(typeof define=="function"&&define.amd)define("chai",[],e);else{var t;typeof window!="undefined"?t=window:typeof global!="undefined"?t=global:typeof self!="undefined"?t=self:t=this,t.chai=e()}}(function(){var e,t,n;return function r(e,t,n){function i(o,u){if(!t[o]){if(!e[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(s)return s(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=t[o]={exports:{}};e[o][0].call(l.exports,function(t){var n=e[o][1][t];return i(n?n:t)},l,l.exports,r,e,t,n)}return t[o].exports}var s=typeof require=="function"&&require;for(var o=0;o<n.length;o++)i(n[o]);return i}({1:[function(e,t,n){t.exports=e("./lib/chai")},{"./lib/chai":2}],2:[function(e,t,n){var r=[],n=t.exports={};n.version="3.4.1",n.AssertionError=e("assertion-error");var i=e("./chai/utils");n.use=function(e){return~r.indexOf(e)||(e(this,i),r.push(e)),this},n.util=i;var s=e("./chai/config");n.config=s;var o=e("./chai/assertion");n.use(o);var u=e("./chai/core/assertions");n.use(u);var a=e("./chai/interface/expect");n.use(a);var f=e("./chai/interface/should");n.use(f);var l=e("./chai/interface/assert");n.use(l)},{"./chai/assertion":3,"./chai/config":4,"./chai/core/assertions":5,"./chai/interface/assert":6,"./chai/interface/expect":7,"./chai/interface/should":8,"./chai/utils":22,"assertion-error":30}],3:[function(e,t,n){var r=e("./config");t.exports=function(e,t){function s(e,t,n){i(this,"ssfi",n||arguments.callee),i(this,"object",e),i(this,"message",t)}var n=e.AssertionError,i=t.flag;e.Assertion=s,Object.defineProperty(s,"includeStack",{get:function(){return console.warn("Assertion.includeStack is deprecated, use chai.config.includeStack instead."),r.includeStack},set:function(e){console.warn("Assertion.includeStack is deprecated, use chai.config.includeStack instead."),r.includeStack=e}}),Object.defineProperty(s,"showDiff",{get:function(){return console.warn("Assertion.showDiff is deprecated, use chai.config.showDiff instead."),r.showDiff},set:function(e){console.warn("Assertion.showDiff is deprecated, use chai.config.showDiff instead."),r.showDiff=e}}),s.addProperty=function(e,n){t.addProperty(this.prototype,e,n)},s.addMethod=function(e,n){t.addMethod(this.prototype,e,n)},s.addChainableMethod=function(e,n,r){t.addChainableMethod(this.prototype,e,n,r)},s.overwriteProperty=function(e,n){t.overwriteProperty(this.prototype,e,n)},s.overwriteMethod=function(e,n){t.overwriteMethod(this.prototype,e,n)},s.overwriteChainableMethod=function(e,n,r){t.overwriteChainableMethod(this.prototype,e,n,r)},s.prototype.assert=function(e,s,o,u,a,f){var l=t.test(this,arguments);!0!==f&&(f=!1),!0!==r.showDiff&&(f=!1);if(!l){var s=t.getMessage(this,arguments),c=t.getActual(this,arguments);throw new n(s,{actual:c,expected:u,showDiff:f},r.includeStack?this.assert:i(this,"ssfi"))}},Object.defineProperty(s.prototype,"_obj",{get:function(){return i(this,"object")},set:function(e){i(this,"object",e)}})}},{"./config":4}],4:[function(e,t,n){t.exports={includeStack:!1,showDiff:!0,truncateThreshold:40}},{}],5:[function(e,t,n){t.exports=function(e,t){function s(e,n){n&&i(this,"message",n),e=e.toLowerCase();var r=i(this,"object"),s=~["a","e","i","o","u"].indexOf(e.charAt(0))?"an ":"a ";this.assert(e===t.type(r),"expected #{this} to be "+s+e,"expected #{this} not to be "+s+e)}function o(){i(this,"contains",!0)}function u(e,r){t.expectTypes(this,["array","object","string"]),r&&i(this,"message",r);var s=i(this,"object"),o=!1;if(t.type(s)==="array"&&t.type(e)==="object"){for(var u in s)if(t.eql(s[u],e)){o=!0;break}}else if(t.type(e)==="object"){if(!i(this,"negate")){for(var a in e)(new n(s)).property(a,e[a]);return}var f={};for(var a in e)f[a]=s[a];o=t.eql(f,e)}else o=s!=undefined&&~s.indexOf(e);this.assert(o,"expected #{this} to include "+t.inspect(e),"expected #{this} to not include "+t.inspect(e))}function a(){var e=i(this,"object"),t=Object.prototype.toString.call(e);this.assert("[object Arguments]"===t,"expected #{this} to be arguments but got "+t,"expected #{this} to not be arguments")}function f(e,t){t&&i(this,"message",t);var n=i(this,"object");if(i(this,"deep"))return this.eql(e);this.assert(e===n,"expected #{this} to equal #{exp}","expected #{this} to not equal #{exp}",e,this._obj,!0)}function l(e,n){n&&i(this,"message",n),this.assert(t.eql(e,i(this,"object")),"expected #{this} to deeply equal #{exp}","expected #{this} to not deeply equal #{exp}",e,this._obj,!0)}function c(e,t){t&&i(this,"message",t);var r=i(this,"object");if(i(this,"doLength")){(new n(r,t)).to.have.property("length");var s=r.length;this.assert(s>e,"expected #{this} to have a length above #{exp} but got #{act}","expected #{this} to not have a length above #{exp}",e,s)}else this.assert(r>e,"expected #{this} to be above "+e,"expected #{this} to be at most "+e)}function h(e,t){t&&i(this,"message",t);var r=i(this,"object");if(i(this,"doLength")){(new n(r,t)).to.have.property("length");var s=r.length;this.assert(s>=e,"expected #{this} to have a length at least #{exp} but got #{act}","expected #{this} to have a length below #{exp}",e,s)}else this.assert(r>=e,"expected #{this} to be at least "+e,"expected #{this} to be below "+e)}function p(e,t){t&&i(this,"message",t);var r=i(this,"object");if(i(this,"doLength")){(new n(r,t)).to.have.property("length");var s=r.length;this.assert(s<e,"expected #{this} to have a length below #{exp} but got #{act}","expected #{this} to not have a length below #{exp}",e,s)}else this.assert(r<e,"expected #{this} to be below "+e,"expected #{this} to be at least "+e)}function d(e,t){t&&i(this,"message",t);var r=i(this,"object");if(i(this,"doLength")){(new n(r,t)).to.have.property("length");var s=r.length;this.assert(s<=e,"expected #{this} to have a length at most #{exp} but got #{act}","expected #{this} to have a length above #{exp}",e,s)}else this.assert(r<=e,"expected #{this} to be at most "+e,"expected #{this} to be above "+e)}function v(e,n){n&&i(this,"message",n);var r=t.getName(e);this.assert(i(this,"object")instanceof e,"expected #{this} to be an instance of "+r,"expected #{this} to not be an instance of "+r)}function m(e,n){n&&i(this,"message",n);var r=i(this,"object");this.assert(r.hasOwnProperty(e),"expected #{this} to have own property "+t.inspect(e),"expected #{this} to not have own property "+t.inspect(e))}function g(e,n,r){typeof n=="string"&&(r=n,n=null),r&&i(this,"message",r);var s=i(this,"object"),o=Object.getOwnPropertyDescriptor(Object(s),e);o&&n?this.assert(t.eql(n,o),"expected the own property descriptor for "+t.inspect(e)+" on #{this} to match "+t.inspect(n)+", got "+t.inspect(o),"expected the own property descriptor for "+t.inspect(e)+" on #{this} to not match "+t.inspect(n),n,o,!0):this.assert(o,"expected #{this} to have an own property descriptor for "+t.inspect(e),"expected #{this} to not have an own property descriptor for "+t.inspect(e)),i(this,"object",o)}function y(){i(this,"doLength",!0)}function b(e,t){t&&i(this,"message",t);var r=i(this,"object");(new n(r,t)).to.have.property("length");var s=r.length;this.assert(s==e,"expected #{this} to have a length of #{exp} but got #{act}","expected #{this} to not have a length of #{act}",e,s)}function w(e,t){t&&i(this,"message",t);var n=i(this,"object");this.assert(e.exec(n),"expected #{this} to match "+e,"expected #{this} not to match "+e)}function E(e){var n=i(this,"object"),r,s=!0,o="keys must be given single argument of Array|Object|String, or multiple String arguments";switch(t.type(e)){case"array":if(arguments.length>1)throw new Error(o);break;case"object":if(arguments.length>1)throw new Error(o);e=Object.keys(e);break;default:e=Array.prototype.slice.call(arguments)}if(!e.length)throw new Error("keys required");var u=Object.keys(n),a=e,f=e.length,l=i(this,"any"),c=i(this,"all");!l&&!c&&(c=!0);if(l){var h=a.filter(function(e){return~u.indexOf(e)});s=h.length>0}c&&(s=e.every(function(e){return~u.indexOf(e)}),!i(this,"negate")&&!i(this,"contains")&&(s=s&&e.length==u.length));if(f>1){e=e.map(function(e){return t.inspect(e)});var p=e.pop();c&&(r=e.join(", ")+", and "+p),l&&(r=e.join(", ")+", or "+p)}else r=t.inspect(e[0]);r=(f>1?"keys ":"key ")+r,r=(i(this,"contains")?"contain ":"have ")+r,this.assert(s,"expected #{this} to "+r,"expected #{this} to not "+r,a.slice(0).sort(),u.sort(),!0)}function S(e,r,s){s&&i(this,"message",s);var o=i(this,"object");(new n(o,s)).is.a("function");var u=!1,a=null,f=null,l=null;if(arguments.length===0)r=null,e=null;else if(e&&(e instanceof RegExp||"string"==typeof e))r=e,e=null;else if(e&&e instanceof Error)a=e,e=null,r=null;else if(typeof e=="function"){f=e.prototype.name;if(!f||f==="Error"&&e!==Error)f=e.name||(new e).name}else e=null;try{o()}catch(c){if(a)return this.assert(c===a,"expected #{this} to throw #{exp} but #{act} was thrown","expected #{this} to not throw #{exp}",a instanceof Error?a.toString():a,c instanceof Error?c.toString():c),i(this,"object",c),this;if(e){this.assert(c instanceof e,"expected #{this} to throw #{exp} but #{act} was thrown","expected #{this} to not throw #{exp} but #{act} was thrown",f,c instanceof Error?c.toString():c);if(!r)return i(this,"object",c),this}var h="error"===t.type(c)&&"message"in c?c.message:""+c;if(h!=null&&r&&r instanceof RegExp)return this.assert(r.exec(h),"expected #{this} to throw error matching #{exp} but got #{act}","expected #{this} to throw error not matching #{exp}",r,h),i(this,"object",c),this;if(h!=null&&r&&"string"==typeof r)return this.assert(~h.indexOf(r),"expected #{this} to throw error including #{exp} but got #{act}","expected #{this} to throw error not including #{act}",r,h),i(this,"object",c),this;u=!0,l=c}var p="",d=f!==null?f:a?"#{exp}":"an error";u&&(p=" but #{act} was thrown"),this.assert(u===!0,"expected #{this} to throw "+d+p,"expected #{this} to not throw "+d+p,a instanceof Error?a.toString():a,l instanceof Error?l.toString():l),i(this,"object",l)}function x(e,n){n&&i(this,"message",n);var r=i(this,"object"),s=i(this,"itself"),o="function"===t.type(r)&&!s?r.prototype[e]:r[e];this.assert("function"==typeof o,"expected #{this} to respond to "+t.inspect(e),"expected #{this} to not respond to "+t.inspect(e))}function T(e,n){n&&i(this,"message",n);var r=i(this,"object"),s=e(r);this.assert(s,"expected #{this} to satisfy "+t.objDisplay(e),"expected #{this} to not satisfy"+t.objDisplay(e),this.negate?!1:!0,s)}function N(e,r,s){s&&i(this,"message",s);var o=i(this,"object");(new n(o,s)).is.a("number");if(t.type(e)!=="number"||t.type(r)!=="number")throw new Error("the arguments to closeTo or approximately must be numbers");this.assert(Math.abs(o-e)<=r,"expected #{this} to be close to "+e+" +/- "+r,"expected #{this} not to be close to "+e+" +/- "+r)}function C(e,t,n){return e.every(function(e){return n?t.some(function(t){return n(e,t)}):t.indexOf(e)!==-1})}function k(e,t){t&&i(this,"message",t);var r=i(this,"object");(new n(e)).to.be.an("array"),this.assert(e.indexOf(r)>-1,"expected #{this} to be one of #{exp}","expected #{this} to not be one of #{exp}",e,r)}function L(e,t,r){r&&i(this,"message",r);var s=i(this,"object");(new n(e,r)).to.have.property(t),(new n(s)).is.a("function");var o=e[t];s(),this.assert(o!==e[t],"expected ."+t+" to change","expected ."+t+" to not change")}function A(e,t,r){r&&i(this,"message",r);var s=i(this,"object");(new n(e,r)).to.have.property(t),(new n(s)).is.a("function");var o=e[t];s(),this.assert(e[t]-o>0,"expected ."+t+" to increase","expected ."+t+" to not increase")}function O(e,t,r){r&&i(this,"message",r);var s=i(this,"object");(new n(e,r)).to.have.property(t),(new n(s)).is.a("function");var o=e[t];s(),this.assert(e[t]-o<0,"expected ."+t+" to decrease","expected ."+t+" to not decrease")}var n=e.Assertion,r=Object.prototype.toString,i=t.flag;["to","be","been","is","and","has","have","with","that","which","at","of","same"].forEach(function(e){n.addProperty(e,function(){return this})}),n.addProperty("not",function(){i(this,"negate",!0)}),n.addProperty("deep",function(){i(this,"deep",!0)}),n.addProperty("any",function(){i(this,"any",!0),i(this,"all",!1)}),n.addProperty("all",function(){i(this,"all",!0),i(this,"any",!1)}),n.addChainableMethod("an",s),n.addChainableMethod("a",s),n.addChainableMethod("include",u,o),n.addChainableMethod("contain",u,o),n.addChainableMethod("contains",u,o),n.addChainableMethod("includes",u,o),n.addProperty("ok",function(){this.assert(i(this,"object"),"expected #{this} to be truthy","expected #{this} to be falsy")}),n.addProperty("true",function(){this.assert(!0===i(this,"object"),"expected #{this} to be true","expected #{this} to be false",this.negate?!1:!0)}),n.addProperty("false",function(){this.assert(!1===i(this,"object"),"expected #{this} to be false","expected #{this} to be true",this.negate?!0:!1)}),n.addProperty("null",function(){this.assert(null===i(this,"object"),"expected #{this} to be null","expected #{this} not to be null")}),n.addProperty("undefined",function(){this.assert(undefined===i(this,"object"),"expected #{this} to be undefined","expected #{this} not to be undefined")}),n.addProperty("NaN",function(){this.assert(isNaN(i(this,"object")),"expected #{this} to be NaN","expected #{this} not to be NaN")}),n.addProperty("exist",function(){this.assert(null!=i(this,"object"),"expected #{this} to exist","expected #{this} to not exist")}),n.addProperty("empty",function(){var e=i(this,"object"),t=e;Array.isArray(e)||"string"==typeof object?t=e.length:typeof e=="object"&&(t=Object.keys(e).length),this.assert(!t,"expected #{this} to be empty","expected #{this} not to be empty")}),n.addProperty("arguments",a),n.addProperty("Arguments",a),n.addMethod("equal",f),n.addMethod("equals",f),n.addMethod("eq",f),n.addMethod("eql",l),n.addMethod("eqls",l),n.addMethod("above",c),n.addMethod("gt",c),n.addMethod("greaterThan",c),n.addMethod("least",h),n.addMethod("gte",h),n.addMethod("below",p),n.addMethod("lt",p),n.addMethod("lessThan",p),n.addMethod("most",d),n.addMethod("lte",d),n.addMethod("within",function(e,t,r){r&&i(this,"message",r);var s=i(this,"object"),o=e+".."+t;if(i(this,"doLength")){(new n(s,r)).to.have.property("length");var u=s.length;this.assert(u>=e&&u<=t,"expected #{this} to have a length within "+o,"expected #{this} to not have a length within "+o)}else this.assert(s>=e&&s<=t,"expected #{this} to be within "+o,"expected #{this} to not be within "+o)}),n.addMethod("instanceof",v),n.addMethod("instanceOf",v),n.addMethod("property",function(e,n,r){r&&i(this,"message",r);var s=!!i(this,"deep"),o=s?"deep property ":"property ",u=i(this,"negate"),a=i(this,"object"),f=s?t.getPathInfo(e,a):null,l=s?f.exists:t.hasProperty(e,a),c=s?f.value:a[e];if(u&&arguments.length>1){if(undefined===c)throw r=r!=null?r+": ":"",new Error(r+t.inspect(a)+" has no "+o+t.inspect(e))}else this.assert(l,"expected #{this} to have a "+o+t.inspect(e),"expected #{this} to not have "+o+t.inspect(e));arguments.length>1&&this.assert(n===c,"expected #{this} to have a "+o+t.inspect(e)+" of #{exp}, but got #{act}","expected #{this} to not have a "+o+t.inspect(e)+" of #{act}",n,c),i(this,"object",c)}),n.addMethod("ownProperty",m),n.addMethod("haveOwnProperty",m),n.addMethod("ownPropertyDescriptor",g),n.addMethod("haveOwnPropertyDescriptor",g),n.addChainableMethod("length",b,y),n.addMethod("lengthOf",b),n.addMethod("match",w),n.addMethod("matches",w),n.addMethod("string",function(e,r){r&&i(this,"message",r);var s=i(this,"object");(new n(s,r)).is.a("string"),this.assert(~s.indexOf(e),"expected #{this} to contain "+t.inspect(e),"expected #{this} to not contain "+t.inspect(e))}),n.addMethod("keys",E),n.addMethod("key",E),n.addMethod("throw",S),n.addMethod("throws",S),n.addMethod("Throw",S),n.addMethod("respondTo",x),n.addMethod("respondsTo",x),n.addProperty("itself",function(){i(this,"itself",!0)}),n.addMethod("satisfy",T),n.addMethod("satisfies",T),n.addMethod("closeTo",N),n.addMethod("approximately",N),n.addMethod("members",function(e,r){r&&i(this,"message",r);var s=i(this,"object");(new n(s)).to.be.an("array"),(new n(e)).to.be.an("array");var o=i(this,"deep")?t.eql:undefined;if(i(this,"contains"))return this.assert(C(e,s,o),"expected #{this} to be a superset of #{act}","expected #{this} to not be a superset of #{act}",s,e);this.assert(C(s,e,o)&&C(e,s,o),"expected #{this} to have the same members as #{act}","expected #{this} to not have the same members as #{act}",s,e)}),n.addMethod("oneOf",k),n.addChainableMethod("change",L),n.addChainableMethod("changes",L),n.addChainableMethod("increase",A),n.addChainableMethod("increases",A),n.addChainableMethod("decrease",O),n.addChainableMethod("decreases",O),n.addProperty("extensible",function(){var e=i(this,"object"),t;try{t=Object.isExtensible(e)}catch(n){if(!(n instanceof TypeError))throw n;t=!1}this.assert(t,"expected #{this} to be extensible","expected #{this} to not be extensible")}),n.addProperty("sealed",function(){var e=i(this,"object"),t;try{t=Object.isSealed(e)}catch(n){if(!(n instanceof TypeError))throw n;t=!0}this.assert(t,"expected #{this} to be sealed","expected #{this} to not be sealed")}),n.addProperty("frozen",function(){var e=i(this,"object"),t;try{t=Object.isFrozen(e)}catch(n){if(!(n instanceof TypeError))throw n;t=!0}this.assert(t,"expected #{this} to be frozen","expected #{this} to not be frozen")})}},{}],6:[function(e,t,n){t.exports=function(e,t){var n=e.Assertion,r=t.flag,i=e.assert=function(t,r){var i=new n(null,null,e.assert);i.assert(t,r,"[ negation message unavailable ]")};i.fail=function(t,n,r,s){throw r=r||"assert.fail()",new e.AssertionError(r,{actual:t,expected:n,operator:s},i.fail)},i.isOk=function(e,t){(new n(e,t)).is.ok},i.isNotOk=function(e,t){(new n(e,t)).is.not.ok},i.equal=function(e,t,s){var o=new n(e,s,i.equal);o.assert(t==r(o,"object"),"expected #{this} to equal #{exp}","expected #{this} to not equal #{act}",t,e)},i.notEqual=function(e,t,s){var o=new n(e,s,i.notEqual);o.assert(t!=r(o,"object"),"expected #{this} to not equal #{exp}","expected #{this} to equal #{act}",t,e)},i.strictEqual=function(e,t,r){(new n(e,r)).to.equal(t)},i.notStrictEqual=function(e,t,r){(new n(e,r)).to.not.equal(t)},i.deepEqual=function(e,t,r){(new n(e,r)).to.eql(t)},i.notDeepEqual=function(e,t,r){(new n(e,r)).to.not.eql(t)},i.isAbove=function(e,t,r){(new n(e,r)).to.be.above(t)},i.isAtLeast=function(e,t,r){(new n(e,r)).to.be.least(t)},i.isBelow=function(e,t,r){(new n(e,r)).to.be.below(t)},i.isAtMost=function(e,t,r){(new n(e,r)).to.be.most(t)},i.isTrue=function(e,t){(new n(e,t)).is["true"]},i.isNotTrue=function(e,t){(new n(e,t)).to.not.equal(!0)},i.isFalse=function(e,t){(new n(e,t)).is["false"]},i.isNotFalse=function(e,t){(new n(e,t)).to.not.equal(!1)},i.isNull=function(e,t){(new n(e,t)).to.equal(null)},i.isNotNull=function(e,t){(new n(e,t)).to.not.equal(null)},i.isNaN=function(e,t){(new n(e,t)).to.be.NaN},i.isNotNaN=function(e,t){(new n(e,t)).not.to.be.NaN},i.isUndefined=function(e,t){(new n(e,t)).to.equal(undefined)},i.isDefined=function(e,t){(new n(e,t)).to.not.equal(undefined)},i.isFunction=function(e,t){(new n(e,t)).to.be.a("function")},i.isNotFunction=function(e,t){(new n(e,t)).to.not.be.a("function")},i.isObject=function(e,t){(new n(e,t)).to.be.a("object")},i.isNotObject=function(e,t){(new n(e,t)).to.not.be.a("object")},i.isArray=function(e,t){(new n(e,t)).to.be.an("array")},i.isNotArray=function(e,t){(new n(e,t)).to.not.be.an("array")},i.isString=function(e,t){(new n(e,t)).to.be.a("string")},i.isNotString=function(e,t){(new n(e,t)).to.not.be.a("string")},i.isNumber=function(e,t){(new n(e,t)).to.be.a("number")},i.isNotNumber=function(e,t){(new n(e,t)).to.not.be.a("number")},i.isBoolean=function(e,t){(new n(e,t)).to.be.a("boolean")},i.isNotBoolean=function(e,t){(new n(e,t)).to.not.be.a("boolean")},i.typeOf=function(e,t,r){(new n(e,r)).to.be.a(t)},i.notTypeOf=function(e,t,r){(new n(e,r)).to.not.be.a(t)},i.instanceOf=function(e,t,r){(new n(e,r)).to.be.instanceOf(t)},i.notInstanceOf=function(e,t,r){(new n(e,r)).to.not.be.instanceOf(t)},i.include=function(e,t,r){(new n(e,r,i.include)).include(t)},i.notInclude=function(e,t,r){(new n(e,r,i.notInclude)).not.include(t)},i.match=function(e,t,r){(new n(e,r)).to.match(t)},i.notMatch=function(e,t,r){(new n(e,r)).to.not.match(t)},i.property=function(e,t,r){(new n(e,r)).to.have.property(t)},i.notProperty=function(e,t,r){(new n(e,r)).to.not.have.property(t)},i.deepProperty=function(e,t,r){(new n(e,r)).to.have.deep.property(t)},i.notDeepProperty=function(e,t,r){(new n(e,r)).to.not.have.deep.property(t)},i.propertyVal=function(e,t,r,i){(new n(e,i)).to.have.property(t,r)},i.propertyNotVal=function(e,t,r,i){(new n(e,i)).to.not.have.property(t,r)},i.deepPropertyVal=function(e,t,r,i){(new n(e,i)).to.have.deep.property(t,r)},i.deepPropertyNotVal=function(e,t,r,i){(new n(e,i)).to.not.have.deep.property(t,r)},i.lengthOf=function(e,t,r){(new n(e,r)).to.have.length(t)},i.throws=function(e,t,i,s){if("string"==typeof t||t instanceof RegExp)i=t,t=null;var o=(new n(e,s)).to.throw(t,i);return r(o,"object")},i.doesNotThrow=function(e,t,r){"string"==typeof t&&(r=t,t=null),(new n(e,r)).to.not.Throw(t)},i.operator=function(e,i,s,o){var u;switch(i){case"==":u=e==s;break;case"===":u=e===s;break;case">":u=e>s;break;case">=":u=e>=s;break;case"<":u=e<s;break;case"<=":u=e<=s;break;case"!=":u=e!=s;break;case"!==":u=e!==s;break;default:throw new Error('Invalid operator "'+i+'"')}var a=new n(u,o);a.assert(!0===r(a,"object"),"expected "+t.inspect(e)+" to be "+i+" "+t.inspect(s),"expected "+t.inspect(e)+" to not be "+i+" "+t.inspect(s))},i.closeTo=function(e,t,r,i){(new n(e,i)).to.be.closeTo(t,r)},i.approximately=function(e,t,r,i){(new n(e,i)).to.be.approximately(t,r)},i.sameMembers=function(e,t,r){(new n(e,r)).to.have.same.members(t)},i.sameDeepMembers=function(e,t,r){(new n(e,r)).to.have.same.deep.members(t)},i.includeMembers=function(e,t,r){(new n(e,r)).to.include.members(t)},i.oneOf=function(e,t,r){(new n(e,r)).to.be.oneOf(t)},i.changes=function(e,t,r){(new n(e)).to.change(t,r)},i.doesNotChange=function(e,t,r){(new n(e)).to.not.change(t,r)},i.increases=function(e,t,r){(new n(e)).to.increase(t,r)},i.doesNotIncrease=function(e,t,r){(new n(e)).to.not.increase(t,r)},i.decreases=function(e,t,r){(new n(e)).to.decrease(t,r)},i.doesNotDecrease=function(e,t,r){(new n(e)).to.not.decrease(t,r)},i.ifError=function(e){if(e)throw e},i.isExtensible=function(e,t){(new n(e,t)).to.be.extensible},i.isNotExtensible=function(e,t){(new n(e,t)).to.not.be.extensible},i.isSealed=function(e,t){(new n(e,t)).to.be.sealed},i.isNotSealed=function(e,t){(new n(e,t)).to.not.be.sealed},i.isFrozen=function(e,t){(new n(e,t)).to.be.frozen},i.isNotFrozen=function(e,t){(new n(e,t)).to.not.be.frozen},function s(e,t){return i[t]=i[e],s}("isOk","ok")("isNotOk","notOk")("throws","throw")("throws","Throw")("isExtensible","extensible")("isNotExtensible","notExtensible")("isSealed","sealed")("isNotSealed","notSealed")("isFrozen","frozen")("isNotFrozen","notFrozen")}},{}],7:[function(e,t,n){t.exports=function(e,t){e.expect=function(t,n){return new e.Assertion(t,n)},e.expect.fail=function(t,n,r,i){throw r=r||"expect.fail()",new e.AssertionError(r,{actual:t,expected:n,operator:i},e.expect.fail)}}},{}],8:[function(e,t,n){t.exports=function(e,t){function r(){function t(){return this instanceof String||this instanceof Number||this instanceof Boolean?new n(this.valueOf(),null,t):new n(this,null,t)}function r(e){Object.defineProperty(this,"should",{value:e,enumerable:!0,configurable:!0,writable:!0})}Object.defineProperty(Object.prototype,"should",{set:r,get:t,configurable:!0});var i={};return i.fail=function(t,n,r,s){throw r=r||"should.fail()",new e.AssertionError(r,{actual:t,expected:n,operator:s},i.fail)},i.equal=function(e,t,r){(new n(e,r)).to.equal(t)},i.Throw=function(e,t,r,i){(new n(e,i)).to.Throw(t,r)},i.exist=function(e,t){(new n(e,t)).to.exist},i.not={},i.not.equal=function(e,t,r){(new n(e,r)).to.not.equal(t)},i.not.Throw=function(e,t,r,i){(new n(e,i)).to.not.Throw(t,r)},i.not.exist=function(e,t){(new n(e,t)).to.not.exist},i["throw"]=i.Throw,i.not["throw"]=i.not.Throw,i}var n=e.Assertion;e.should=r,e.Should=r}},{}],9:[function(e,t,n){var r=e("./transferFlags"),i=e("./flag"),s=e("../config"),o="__proto__"in Object,u=/^(?:length|name|arguments|caller)$/,a=Function.prototype.call,f=Function.prototype.apply;t.exports=function(e,t,n,l){typeof l!="function"&&(l=function(){});var c={method:n,chainingBehavior:l};e.__methods||(e.__methods={}),e.__methods[t]=c,Object.defineProperty(e,t,{get:function(){c.chainingBehavior.call(this);var t=function h(){var e=i(this,"ssfi");e&&s.includeStack===!1&&i(this,"ssfi",h);var t=c.method.apply(this,arguments);return t===undefined?this:t};if(o){var n=t.__proto__=Object.create(this);n.call=a,n.apply=f}else{var l=Object.getOwnPropertyNames(e);l.forEach(function(n){if(!u.test(n)){var r=Object.getOwnPropertyDescriptor(e,n);Object.defineProperty(t,n,r)}})}return r(this,t),t},configurable:!0})}},{"../config":4,"./flag":13,"./transferFlags":29}],10:[function(e,t,n){var r=e("../config"),i=e("./flag");t.exports=function(e,t,n){e[t]=function(){var s=i(this,"ssfi");s&&r.includeStack===!1&&i(this,"ssfi",e[t]);var o=n.apply(this,arguments);return o===undefined?this:o}}},{"../config":4,"./flag":13}],11:[function(e,t,n){var r=e("../config"),i=e("./flag");t.exports=function(e,t,n){Object.defineProperty(e,t,{get:function s(){var e=i(this,"ssfi");e&&r.includeStack===!1&&i(this,"ssfi",s);var t=n.call(this);return t===undefined?this:t},configurable:!0})}},{"../config":4,"./flag":13}],12:[function(e,t,n){var r=e("assertion-error"),i=e("./flag"),s=e("type-detect");t.exports=function(e,t){var e=i(e,"object");t=t.map(function(e){return e.toLowerCase()}),t.sort();var n=t.map(function(e,n){var r=~["a","e","i","o","u"].indexOf(e.charAt(0))?"an":"a",i=t.length>1&&n===t.length-1?"or ":"";return i+r+" "+e}).join(", ");if(!t.some(function(t){return s(e)===t}))throw new r("object tested must be "+n+", but "+s(e)+" given")}},{"./flag":13,"assertion-error":30,"type-detect":35}],13:[function(e,t,n){t.exports=function(e,t,n){var r=e.__flags||(e.__flags=Object.create(null));if(arguments.length!==3)return r[t];r[t]=n}},{}],14:[function(e,t,n){t.exports=function(e,t){return t.length>4?t[4]:e._obj}},{}],15:[function(e,t,n){t.exports=function(t){var n=[];for(var r in t)n.push(r);return n}},{}],16:[function(e,t,n){var r=e("./flag"),i=e("./getActual"),s=e("./inspect"),o=e("./objDisplay");t.exports=function(e,t){var n=r(e,"negate"),s=r(e,"object"),u=t[3],a=i(e,t),f=n?t[2]:t[1],l=r(e,"message");return typeof f=="function"&&(f=f()),f=f||"",f=f.replace(/#{this}/g,o(s)).replace(/#{act}/g,o(a)).replace(/#{exp}/g,o(u)),l?l+": "+f:f}},{"./flag":13,"./getActual":14,"./inspect":23,"./objDisplay":24}],17:[function(e,t,n){t.exports=function(e){if(e.name)return e.name;var t=/^\s?function ([^(]*)\(/.exec(e);return t&&t[1]?t[1]:""}},{}],18:[function(e,t,n){function i(e){var t=e.replace(/([^\\])\[/g,"$1.["),n=t.match(/(\\\.|[^.]+?)+/g);return n.map(function(e){var t=/^\[(\d+)\]$/,n=t.exec(e);return n?{i:parseFloat(n[1])}:{p:e.replace(/\\([.\[\]])/g,"$1")}})}function s(e,t,n){var r=t,i;n=n===undefined?e.length:n;for(var s=0,o=n;s<o;s++){var u=e[s];r?("undefined"!=typeof u.p?r=r[u.p]:"undefined"!=typeof u.i&&(r=r[u.i]),s==o-1&&(i=r)):i=undefined}return i}var r=e("./hasProperty");t.exports=function(t,n){var o=i(t),u=o[o.length-1],a={parent:o.length>1?s(o,n,o.length-1):n,name:u.p||u.i,value:s(o,n)};return a.exists=r(a.name,a.parent),a}},{"./hasProperty":21}],19:[function(e,t,n){var r=e("./getPathInfo");t.exports=function(e,t){var n=r(e,t);return n.value}},{"./getPathInfo":18}],20:[function(e,t,n){t.exports=function(t){function r(e){n.indexOf(e)===-1&&n.push(e)}var n=Object.getOwnPropertyNames(t),i=Object.getPrototypeOf(t);while(i!==null)Object.getOwnPropertyNames(i).forEach(r),i=Object.getPrototypeOf(i);return n}},{}],21:[function(e,t,n){var r=e("type-detect"),i={number:Number,string:String};t.exports=function(t,n){var s=r(n);return s==="null"||s==="undefined"?!1:(i[s]&&typeof n!="object"&&(n=new i[s](n)),t in n)}},{"type-detect":35}],22:[function(e,t,n){var n=t.exports={};n.test=e("./test"),n.type=e("type-detect"),n.expectTypes=e("./expectTypes"),n.getMessage=e("./getMessage"),n.getActual=e("./getActual"),n.inspect=e("./inspect"),n.objDisplay=e("./objDisplay"),n.flag=e("./flag"),n.transferFlags=e("./transferFlags"),n.eql=e("deep-eql"),n.getPathValue=e("./getPathValue"),n.getPathInfo=e("./getPathInfo"),n.hasProperty=e("./hasProperty"),n.getName=e("./getName"),n.addProperty=e("./addProperty"),n.addMethod=e("./addMethod"),n.overwriteProperty=e("./overwriteProperty"),n.overwriteMethod=e("./overwriteMethod"),n.addChainableMethod=e("./addChainableMethod"),n.overwriteChainableMethod=e("./overwriteChainableMethod")},{"./addChainableMethod":9,"./addMethod":10,"./addProperty":11,"./expectTypes":12,"./flag":13,"./getActual":14,"./getMessage":16,"./getName":17,"./getPathInfo":18,"./getPathValue":19,"./hasProperty":21,"./inspect":23,"./objDisplay":24,"./overwriteChainableMethod":25,"./overwriteMethod":26,"./overwriteProperty":27,"./test":28,"./transferFlags":29,"deep-eql":31,"type-detect":35}],23:[function(e,t,n){function o(e,t,n,r){var i={showHidden:t,seen:[],stylize:function(e){return e}};return a(i,e,typeof n=="undefined"?2:n)}function a(e,t,o){if(t&&typeof t.inspect=="function"&&t.inspect!==n.inspect&&(!t.constructor||t.constructor.prototype!==t)){var y=t.inspect(o);return typeof y!="string"&&(y=a(e,y,o)),y}var b=f(e,t);if(b)return b;if(u(t)){if("outerHTML"in t)return t.outerHTML;try{if(document.xmlVersion){var w=new XMLSerializer;return w.serializeToString(t)}var E="http://www.w3.org/1999/xhtml",S=document.createElementNS(E,"_");return S.appendChild(t.cloneNode(!1)),html=S.innerHTML.replace("><",">"+t.innerHTML+"<"),S.innerHTML="",html}catch(x){}}var T=s(t),N=e.showHidden?i(t):T;if(N.length===0||g(t)&&(N.length===1&&N[0]==="stack"||N.length===2&&N[0]==="description"&&N[1]==="stack")){if(typeof t=="function"){var C=r(t),k=C?": "+C:"";return e.stylize("[Function"+k+"]","special")}if(v(t))return e.stylize(RegExp.prototype.toString.call(t),"regexp");if(m(t))return e.stylize(Date.prototype.toUTCString.call(t),"date");if(g(t))return l(t)}var L="",A=!1,O=["{","}"];d(t)&&(A=!0,O=["[","]"]);if(typeof t=="function"){var C=r(t),k=C?": "+C:"";L=" [Function"+k+"]"}v(t)&&(L=" "+RegExp.prototype.toString.call(t)),m(t)&&(L=" "+Date.prototype.toUTCString.call(t));if(g(t))return l(t);if(N.length!==0||!!A&&t.length!=0){if(o<0)return v(t)?e.stylize(RegExp.prototype.toString.call(t),"regexp"):e.stylize("[Object]","special");e.seen.push(t);var M;return A?M=c(e,t,o,T,N):M=N.map(function(n){return h(e,t,o,T,n,A)}),e.seen.pop(),p(M,L,O)}return O[0]+L+O[1]}function f(e,t){switch(typeof t){case"undefined":return e.stylize("undefined","undefined");case"string":var n="'"+JSON.stringify(t).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return e.stylize(n,"string");case"number":if(t===0&&1/t===-Infinity)return e.stylize("-0","number");return e.stylize(""+t,"number");case"boolean":return e.stylize(""+t,"boolean")}if(t===null)return e.stylize("null","null")}function l(e){return"["+Error.prototype.toString.call(e)+"]"}function c(e,t,n,r,i){var s=[];for(var o=0,u=t.length;o<u;++o)Object.prototype.hasOwnProperty.call(t,String(o))?s.push(h(e,t,n,r,String(o),!0)):s.push("");return i.forEach(function(i){i.match(/^\d+$/)||s.push(h(e,t,n,r,i,!0))}),s}function h(e,t,n,r,i,s){var o,u;t.__lookupGetter__&&(t.__lookupGetter__(i)?t.__lookupSetter__(i)?u=e.stylize("[Getter/Setter]","special"):u=e.stylize("[Getter]","special"):t.__lookupSetter__(i)&&(u=e.stylize("[Setter]","special"))),r.indexOf(i)<0&&(o="["+i+"]"),u||(e.seen.indexOf(t[i])<0?(n===null?u=a(e,t[i],null):u=a(e,t[i],n-1),u.indexOf("\n")>-1&&(s?u=u.split("\n").map(function(e){return"  "+e}).join("\n").substr(2):u="\n"+u.split("\n").map(function(e){return"   "+e}).join("\n"))):u=e.stylize("[Circular]","special"));if(typeof o=="undefined"){if(s&&i.match(/^\d+$/))return u;o=JSON.stringify(""+i),o.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(o=o.substr(1,o.length-2),o=e.stylize(o,"name")):(o=o.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),o=e.stylize(o,"string"))}return o+": "+u}function p(e,t,n){var r=0,i=e.reduce(function(e,t){return r++,t.indexOf("\n")>=0&&r++,e+t.length+1},0);return i>60?n[0]+(t===""?"":t+"\n ")+" "+e.join(",\n  ")+" "+n[1]:n[0]+t+" "+e.join(", ")+" "+n[1]}function d(e){return Array.isArray(e)||typeof e=="object"&&y(e)==="[object Array]"}function v(e){return typeof e=="object"&&y(e)==="[object RegExp]"}function m(e){return typeof e=="object"&&y(e)==="[object Date]"}function g(e){return typeof e=="object"&&y(e)==="[object Error]"}function y(e){return Object.prototype.toString.call(e)}var r=e("./getName"),i=e("./getProperties"),s=e("./getEnumerableProperties");t.exports=o;var u=function(e){return typeof HTMLElement=="object"?e instanceof HTMLElement:e&&typeof e=="object"&&e.nodeType===1&&typeof e.nodeName=="string"}},{"./getEnumerableProperties":15,"./getName":17,"./getProperties":20}],24:[function(e,t,n){var r=e("./inspect"),i=e("../config");t.exports=function(e){var t=r(e),n=Object.prototype.toString.call(e);if(i.truncateThreshold&&t.length>=i.truncateThreshold){if(n==="[object Function]")return!e.name||e.name===""?"[Function]":"[Function: "+e.name+"]";if(n==="[object Array]")return"[ Array("+e.length+") ]";if(n==="[object Object]"){var s=Object.keys(e),o=s.length>2?s.splice(0,2).join(", ")+", ...":s.join(", ");return"{ Object ("+o+") }"}return t}return t}},{"../config":4,"./inspect":23}],25:[function(e,t,n){t.exports=function(e,t,n,r){var i=e.__methods[t],s=i.chainingBehavior;i.chainingBehavior=function(){var e=r(s).call(this);return e===undefined?this:e};var o=i.method;i.method=function(){var e=n(o).apply(this,arguments);return e===undefined?this:e}}},{}],26:[function(e,t,n){t.exports=function(e,t,n){var r=e[t],i=function(){return this};r&&"function"==typeof r&&(i=r),e[t]=function(){var e=n(i).apply(this,arguments);return e===undefined?this:e}}},{}],27:[function(e,t,n){t.exports=function(e,t,n){var r=Object.getOwnPropertyDescriptor(e,t),i=function(){};r&&"function"==typeof r.get&&(i=r.get),Object.defineProperty(e,t,{get:function(){var e=n(i).call(this);return e===undefined?this:e},configurable:!0})}},{}],28:[function(e,t,n){var r=e("./flag");t.exports=function(e,t){var n=r(e,"negate"),i=t[0];return n?!i:i}},{"./flag":13}],29:[function(e,t,n){t.exports=function(e,t,n){var r=e.__flags||(e.__flags=Object.create(null));t.__flags||(t.__flags=Object.create(null)),n=arguments.length===3?n:!0;for(var i in r)if(n||i!=="object"&&i!=="ssfi"&&i!="message")t.__flags[i]=r[i]}},{}],30:[function(e,t,n){function r(){function t(t,n){Object.keys(n).forEach(function(r){~e.indexOf(r)||(t[r]=n[r])})}var e=[].slice.call(arguments);return function(){var n=[].slice.call(arguments),r=0,i={};for(;r<n.length;r++)t(i,n[r]);return i}}function i(e,t,n){var i=r("name","message","stack","constructor","toJSON"),s=i(t||{});this.message=e||"Unspecified AssertionError",this.showDiff=!1;for(var o in s)this[o]=s[o];n=n||arguments.callee,n&&Error.captureStackTrace?Error.captureStackTrace(this,n):this.stack=(new Error).stack}t.exports=i,i.prototype=Object.create(Error.prototype),i.prototype.name="AssertionError",i.prototype.constructor=i,i.prototype.toJSON=function(e){var t=r("constructor","toJSON","stack"),n=t({name:this.name},this);return!1!==e&&this.stack&&(n.stack=this.stack),n}},{}],31:[function(e,t,n){t.exports=e("./lib/eql")},{"./lib/eql":32}],32:[function(e,t,n){function o(e,t,n){return u(e,t)?!0:"date"===r(e)?f(e,t):"regexp"===r(e)?l(e,t):i.isBuffer(e)?d(e,t):"arguments"===r(e)?c(e,t,n):a(e,t)?"object"!==r(e)&&"object"!==r(t)&&"array"!==r(e)&&"array"!==r(t)?u(e,t):m(e,t,n):!1}function u(e,t){return e===t?e!==0||1/e===1/t:e!==e&&t!==t}function a(e,t){return r(e)===r(t)}function f(e,t){return"date"!==r(t)?!1:u(e.getTime(),t.getTime())}function l(e,t){return"regexp"!==r(t)?!1:u(e.toString(),t.toString())}function c(e,t,n){return"arguments"!==r(t)?!1:(e=[].slice.call(e),t=[].slice.call(t),o(e,t,n))}function h(e){var t=[];for(var n in e)t.push(n);return t}function p(e,t){if(e.length!==t.length)return!1;var n=0,r=!0;for(;n<e.length;n++)if(e[n]!==t[n]){r=!1;break}return r}function d(e,t){return i.isBuffer(t)?p(e,t):!1}function v(e){return e!==null&&e!==undefined}function m(e,t,n){if(!v(e)||!v(t))return!1;if(e.prototype!==t.prototype)return!1;var r;if(n){for(r=0;r<n.length;r++)if(n[r][0]===e&&n[r][1]===t||n[r][0]===t&&n[r][1]===e)return!0}else n=[];try{var i=h(e),s=h(t)}catch(u){return!1}i.sort(),s.sort();if(!p(i,s))return!1;n.push([e,t]);var a;for(r=i.length-1;r>=0;r--){a=i[r];if(!o(e[a],t[a],n))return!1}return!0}var r=e("type-detect"),i;try{i=e("buffer").Buffer}catch(s){i={},i.isBuffer=function(){return!1}}t.exports=o},{buffer:undefined,"type-detect":33}],33:[function(e,t,n){t.exports=e("./lib/type")},{"./lib/type":34}],34:[function(e,t,n){function i(e){var t=Object.prototype.toString.call(e);return r[t]?r[t]:e===null?"null":e===undefined?"undefined":e===Object(e)?"object":typeof e}function s(){this.tests={}}var n=t.exports=i,r={"[object Array]":"array","[object RegExp]":"regexp","[object Function]":"function","[object Arguments]":"arguments","[object Date]":"date"};n.Library=s,s.prototype.of=i,s.prototype.define=function(e,t){return arguments.length===1?this.tests[e]:(this.tests[e]=t,this)},s.prototype.test=function(e,t){if(t===i(e))return!0;var n=this.tests[t];if(n&&"regexp"===i(n))return n.test(e);if(n&&"function"===i(n))return n(e);throw new ReferenceError('Type test "'+t+'" not defined or invalid.')}},{}],35:[function(e,t,n){arguments[4][33][0].apply(n,arguments)},{"./lib/type":36,dup:33}],36:[function(e,t,n){function i(e){var t=Object.prototype.toString.call(e).match(r)[1].toLowerCase();return typeof Promise=="function"&&e instanceof Promise?"promise":e===null?"null":e===undefined?"undefined":t}function s(){if(!(this instanceof s))return new s;this.tests={}}var n=t.exports=i,r=/^\[object (.*)\]$/;n.Library=s,s.prototype.of=i,s.prototype.define=function(e,t){return arguments.length===1?this.tests[e]:(this.tests[e]=t,this)},s.prototype.test=function(e,t){if(t===i(e))return!0;var n=this.tests[t];if(n&&"regexp"===i(n))return n.test(e);if(n&&"function"===i(n))return n(e);throw new ReferenceError('Type test "'+t+'" not defined or invalid.')}},{}]},{},[1])(1)}),define("back4app-entity/utils/classes",["require","exports","module","util","chai"],function(e,t,n){function s(e,t){i(arguments).to.have.length(2,"Invalid argument length when generalizing classes (it has to be passed 2 arguments)"),i(e).to.be.a("function",'Invalid argument "GeneralClass" when generalizing classes (it has to be a function)'),i(t).to.be.a("function",'Invalid argument "SpecificClass" when generalizing classes (ut has to be a function)'),r.inherits(t,e);for(var n in e)if(t.hasOwnProperty(n)===!1){var s=Object.getOwnPropertyDescriptor(e,n);s&&(s.configurable=!0,Object.defineProperty(t,n,s))}}function o(e,t){i(arguments).to.have.length(2,"Invalid argument length when checking if a class is general of another (it has to be passed 2 arguments)"),i(e).to.be.a("function",'Invalid argument "GeneralClass" when checking if a class is general of another (it has to be a function)'),i(t).to.be.a("function",'Invalid argument "SpecificClass" when checking if a class is general of another (it has to be a function)');var n=[],r=t;while(r&&n.indexOf(r)===-1){if(r===e)return!0;n.push(r),r=r.super_}return!1}var r=e("util"),i=e("chai").expect;n.exports={},n.exports.generalize=s,n.exports.isGeneral=o}),define("back4app-entity/utils/objects",["require","exports","module","chai"],function(e,t,n){function i(e){r(arguments).to.have.length(1,"Invalid argument length when copying an object (it has to be passed 1 argument)"),r(e).to.be.an("object",'Invalid argument "o" when copying an object (it has to be an object)');var t={};for(var n in e)t[n]=e[n];return t}var r=e("chai").expect;n.exports={},n.exports.copy=i}),define("back4app-entity/utils/index",["require","exports","module","./classes","./objects"],function(e,t,n){var r=e("./classes"),i=e("./objects");n.exports={},n.exports.classes=r,n.exports.objects=i}),define("back4app-entity/utils",["back4app-entity/utils/index"],function(e){return e}),define("back4app-entity/settings",["require","exports","module"],function(e,t,n){n.exports={},n.exports.ADAPTERS={}}),!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define("bluebird",[],e);else{var t;"undefined"!=typeof window?t=window:"undefined"!=typeof global?t=global:"undefined"!=typeof self&&(t=self),t.Promise=e()}}(function(){var define,module,exports;return function e(t,n,r){function i(o,u){if(!n[o]){if(!t[o]){var a=typeof _dereq_=="function"&&_dereq_;if(!u&&a)return a(o,!0);if(s)return s(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return i(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var s=typeof _dereq_=="function"&&_dereq_;for(var o=0;o<r.length;o++)i(r[o]);return i}({1:[function(e,t,n){"use strict";t.exports=function(e){function n(e){var n=new t(e),r=n.promise();return n.setHowMany(1),n.setUnwrap(),n.init(),r}var t=e._SomePromiseArray;e.any=function(e){return n(e)},e.prototype.any=function(){return n(this)}}},{}],2:[function(e,t,n){"use strict";function a(){this._isTickUsed=!1,this._lateQueue=new o(16),this._normalQueue=new o(16),this._haveDrainedQueues=!1,this._trampolineEnabled=!0;var e=this;this.drainQueues=function(){e._drainQueues()},this._schedule=s}function f(e,t,n){this._lateQueue.push(e,t,n),this._queueTick()}function l(e,t,n){this._normalQueue.push(e,t,n),this._queueTick()}function c(e){this._normalQueue._pushOne(e),this._queueTick()}var r;try{throw new Error}catch(i){r=i}var s=e("./schedule"),o=e("./queue"),u=e("./util");a.prototype.enableTrampoline=function(){this._trampolineEnabled=!0},a.prototype.disableTrampolineIfNecessary=function(){u.hasDevTools&&(this._trampolineEnabled=!1)},a.prototype.haveItemsQueued=function(){return this._isTickUsed||this._haveDrainedQueues},a.prototype.fatalError=function(e,t){t?(process.stderr.write("Fatal "+(e instanceof Error?e.stack:e)),process.exit(2)):this.throwLater(e)},a.prototype.throwLater=function(e,t){arguments.length===1&&(t=e,e=function(){throw t});if(typeof setTimeout!="undefined")setTimeout(function(){e(t)},0);else try{this._schedule(function(){e(t)})}catch(n){throw new Error("No async scheduler available\n\n    See http://goo.gl/MqrFmX\n")}},u.hasDevTools?(a.prototype.invokeLater=function(e,t,n){this._trampolineEnabled?f.call(this,e,t,n):this._schedule(function(){setTimeout(function(){e.call(t,n)},100)})},a.prototype.invoke=function(e,t,n){this._trampolineEnabled?l.call(this,e,t,n):this._schedule(function(){e.call(t,n)})},a.prototype.settlePromises=function(e){this._trampolineEnabled?c.call(this,e):this._schedule(function(){e._settlePromises()})}):(a.prototype.invokeLater=f,a.prototype.invoke=l,a.prototype.settlePromises=c),a.prototype.invokeFirst=function(e,t,n){this._normalQueue.unshift(e,t,n),this._queueTick()},a.prototype._drainQueue=function(e){while(e.length()>0){var t=e.shift();if(typeof t!="function"){t._settlePromises();continue}var n=e.shift(),r=e.shift();t.call(n,r)}},a.prototype._drainQueues=function(){this._drainQueue(this._normalQueue),this._reset(),this._haveDrainedQueues=!0,this._drainQueue(this._lateQueue)},a.prototype._queueTick=function(){this._isTickUsed||(this._isTickUsed=!0,this._schedule(this.drainQueues))},a.prototype._reset=function(){this._isTickUsed=!1},t.exports=a,t.exports.firstLineError=r},{"./queue":26,"./schedule":29,"./util":36}],3:[function(e,t,n){"use strict";t.exports=function(e,t,n,r){var i=!1,s=function(e,t){this._reject(t)},o=function(e,t){t.promiseRejectionQueued=!0,t.bindingPromise._then(s,s,null,this,e)},u=function(e,t){(this._bitField&50397184)===0&&this._resolveCallback(t.target)},a=function(e,t){t.promiseRejectionQueued||this._reject(e)};e.prototype.bind=function(s){i||(i=!0,e.prototype._propagateFrom=r.propagateFromFunction(),e.prototype._boundValue=r.boundValueFunction());var f=n(s),l=new e(t);l._propagateFrom(this,1);var c=this._target();l._setBoundTo(f);if(f instanceof e){var h={promiseRejectionQueued:!1,promise:l,target:c,bindingPromise:f};c._then(t,o,undefined,l,h),f._then(u,a,undefined,l,h),l._setOnCancel(f)}else l._resolveCallback(c);return l},e.prototype._setBoundTo=function(e){e!==undefined?(this._bitField=this._bitField|2097152,this._boundTo=e):this._bitField=this._bitField&-2097153},e.prototype._isBound=function(){return(this._bitField&2097152)===2097152},e.bind=function(t,n){return e.resolve(n).bind(t)}}},{}],4:[function(e,t,n){"use strict";function i(){try{Promise===s&&(Promise=r)}catch(e){}return s}var r;typeof Promise!="undefined"&&(r=Promise);var s=e("./promise")();s.noConflict=i,t.exports=s},{"./promise":22}],5:[function(e,t,n){"use strict";var r=Object.create;if(r){var i=r(null),s=r(null);i[" size"]=s[" size"]=0}t.exports=function(t){function h(e,r){var i;e!=null&&(i=e[r]);if(typeof i!="function"){var s="Object "+n.classString(e)+" has no method '"+n.toString(r)+"'";throw new t.TypeError(s)}return i}function p(e){var t=this.pop(),n=h(e,t);return n.apply(e,this)}function d(e){return e[this]}function v(e){var t=+this;return t<0&&(t=Math.max(0,t+e.length)),e[t]}var n=e("./util"),r=n.canEvaluate,o=n.isIdentifier,u,a;t.prototype.call=function(e){var t=[].slice.call(arguments,1);return t.push(e),this._then(p,undefined,undefined,t,undefined)},t.prototype.get=function(e){var t=typeof e=="number",n;if(!t)if(r){var i=a(e);n=i!==null?i:d}else n=d;else n=v;return this._then(n,undefined,undefined,e,undefined)}}},{"./util":36}],6:[function(e,t,n){"use strict";t.exports=function(t,n,r,i){var s=e("./util"),o=s.tryCatch,u=s.errorObj,a=t._async;t.prototype["break"]=t.prototype.cancel=function(){if(!i.cancellation())return this._warn("cancellation is disabled");var e=this,t=e;while(e.isCancellable()){if(!e._cancelBy(t)){t._isFollowing()?t._followee().cancel():t._cancelBranched();break}var n=e._cancellationParent;if(n==null||!n.isCancellable()){e._isFollowing()?e._followee().cancel():e._cancelBranched();break}e._isFollowing()&&e._followee().cancel(),t=e,e=n}},t.prototype._branchHasCancelled=function(){this._branchesRemainingToCancel--},t.prototype._enoughBranchesHaveCancelled=function(){return this._branchesRemainingToCancel===undefined||this._branchesRemainingToCancel<=0},t.prototype._cancelBy=function(e){return e===this?(this._branchesRemainingToCancel=0,this._invokeOnCancel(),!0):(this._branchHasCancelled(),this._enoughBranchesHaveCancelled()?(this._invokeOnCancel(),!0):!1)},t.prototype._cancelBranched=function(){this._enoughBranchesHaveCancelled()&&this._cancel()},t.prototype._cancel=function(){if(!this.isCancellable())return;this._setCancelled(),a.invoke(this._cancelPromises,this,undefined)},t.prototype._cancelPromises=function(){this._length()>0&&this._settlePromises()},t.prototype._unsetOnCancel=function(){this._onCancelField=undefined},t.prototype.isCancellable=function(){return this.isPending()&&!this.isCancelled()},t.prototype._doInvokeOnCancel=function(e,t){if(s.isArray(e))for(var n=0;n<e.length;++n)this._doInvokeOnCancel(e[n],t);else if(e!==undefined)if(typeof e=="function"){if(!t){var r=o(e).call(this._boundValue());r===u&&(this._attachExtraTrace(r.e),a.throwLater(r.e))}}else e._resultCancelled(this)},t.prototype._invokeOnCancel=function(){var e=this._onCancel();this._unsetOnCancel(),a.invoke(this._doInvokeOnCancel,this,e)},t.prototype._invokeInternalOnCancel=function(){this.isCancellable()&&(this._doInvokeOnCancel(this._onCancel(),!0),this._unsetOnCancel())},t.prototype._resultCancelled=function(){this.cancel()}}},{"./util":36}],7:[function(e,t,n){"use strict";t.exports=function(t){function o(e,o,u){return function(a){var f=u._boundValue();e:for(var l=0;l<e.length;++l){var c=e[l];if(c===Error||c!=null&&c.prototype instanceof Error){if(a instanceof c)return i(o).call(f,a)}else if(typeof c=="function"){var h=i(c).call(f,a);if(h===s)return h;if(h)return i(o).call(f,a)}else if(n.isObject(a)){var p=r(c);for(var d=0;d<p.length;++d){var v=p[d];if(c[v]!=a[v])continue e}return i(o).call(f,a)}}return t}}var n=e("./util"),r=e("./es5").keys,i=n.tryCatch,s=n.errorObj;return o}},{"./es5":13,"./util":36}],8:[function(e,t,n){"use strict";t.exports=function(e){function r(){this._trace=new r.CapturedTrace(s())}function i(){if(t)return new r}function s(){var e=n.length-1;return e>=0?n[e]:undefined}var t=!1,n=[];return e.prototype._promiseCreated=function(){},e.prototype._pushContext=function(){},e.prototype._popContext=function(){return null},e._peekContext=e.prototype._peekContext=function(){},r.prototype._pushContext=function(){this._trace!==undefined&&(this._trace._promiseCreated=null,n.push(this._trace))},r.prototype._popContext=function(){if(this._trace!==undefined){var e=n.pop(),t=e._promiseCreated;return e._promiseCreated=null,t}return null},r.CapturedTrace=null,r.create=i,r.deactivateLongStackTraces=function(){},r.activateLongStackTraces=function(){var n=e.prototype._pushContext,i=e.prototype._popContext,o=e._peekContext,u=e.prototype._peekContext,a=e.prototype._promiseCreated;r.deactivateLongStackTraces=function(){e.prototype._pushContext=n,e.prototype._popContext=i,e._peekContext=o,e.prototype._peekContext=u,e.prototype._promiseCreated=a,t=!1},t=!0,e.prototype._pushContext=r.prototype._pushContext,e.prototype._popContext=r.prototype._popContext,e._peekContext=e.prototype._peekContext=s,e.prototype._promiseCreated=function(){var e=this._peekContext();e&&e._promiseCreated==null&&(e._promiseCreated=this)}},r}},{}],9:[function(e,t,n){"use strict";t.exports=function(t,n){function w(e,t,n){var r=this;try{e(t,n,function(e){if(typeof e!="function")throw new TypeError("onCancel must be a function, got: "+o.toString(e));r._attachCancellationCallback(e)})}catch(i){return i}}function E(e){if(!this.isCancellable())return this;var t=this._onCancel();t!==undefined?o.isArray(t)?t.push(e):this._setOnCancel([t,e]):this._setOnCancel(e)}function S(){return this._onCancelField}function x(e){this._onCancelField=e}function T(){this._cancellationParent=undefined,this._onCancelField=undefined}function N(e,t){if((t&1)!==0){this._cancellationParent=e;var n=e._branchesRemainingToCancel;n===undefined&&(n=0),e._branchesRemainingToCancel=n+1}(t&2)!==0&&e._isBound()&&this._setBoundTo(e._boundTo)}function C(e,t){(t&2)!==0&&e._isBound()&&this._setBoundTo(e._boundTo)}function L(){var e=this._boundTo;return e!==undefined&&e instanceof t?e.isFulfilled()?e.value():undefined:e}function A(){this._trace=new K(this._peekContext())}function O(e,t){if(u(e)){var n=this._trace;n!==undefined&&t&&(n=n._parent);if(n!==undefined)n.attachExtraTrace(e);else if(!e.__stackCleaned__){var r=I(e);o.notEnumerableProp(e,"stack",r.message+"\n"+r.stack.join("\n")),o.notEnumerableProp(e,"__stackCleaned__",!0)}}}function M(e,t,n,r,i){if(e===undefined&&t!==null&&y){if(i!==undefined&&i._returnedNonUndefined())return;n&&(n+=" ");var s="a promise was created in a "+n+"handler but was not returned from it";r._warn(s,!0,t)}}function _(e,t){var n=e+" is deprecated and will be removed in a future version.";return t&&(n+=" Use "+t+" instead."),D(n)}function D(e,n,r){if(!Z.warnings)return;var i=new s(e),o;if(n)r._attachExtraTrace(i);else if(Z.longStackTraces&&(o=t._peekContext()))o.attachExtraTrace(i);else{var u=I(i);i.stack=u.message+"\n"+u.stack.join("\n")}q(i,"",!0)}function P(e,t){for(var n=0;n<t.length-1;++n)t[n].push("From previous event:"),t[n]=t[n].join("\n");return n<t.length&&(t[n]=t[n].join("\n")),e+"\n"+t.join("\n")}function H(e){for(var t=0;t<e.length;++t)if(e[t].length===0||t+1<e.length&&e[t][0]===e[t+1][0])e.splice(t,1),t--}function B(e){var t=e[0];for(var n=1;n<e.length;++n){var r=e[n],i=t.length-1,s=t[i],o=-1;for(var u=r.length-1;u>=0;--u)if(r[u]===s){o=u;break}for(var u=o;u>=0;--u){var a=r[u];if(t[i]!==a)break;t.pop(),i--}t=r}}function j(e){var t=[];for(var n=0;n<e.length;++n){var r=e[n],i="    (No stack trace)"===r||c.test(r),s=i&&X(r);i&&!s&&(p&&r.charAt(0)!==" "&&(r="    "+r),t.push(r))}return t}function F(e){var t=e.stack.replace(/\s+$/g,"").split("\n");for(var n=0;n<t.length;++n){var r=t[n];if("    (No stack trace)"===r||c.test(r))break}return n>0&&(t=t.slice(n)),t}function I(e){var t=e.stack,n=e.toString();return t=typeof t=="string"&&t.length>0?F(e):["    (No stack trace)"],{message:n,stack:j(t)}}function q(e,t,n){if(typeof console!="undefined"){var r;if(o.isObject(e)){var i=e.stack;r=t+h(i,e)}else r=t+String(e);typeof d=="function"?d(r,n):(typeof console.log=="function"||typeof console.log=="object")&&console.log(r)}}function R(e,t,n,r){var s=!1;try{typeof t=="function"&&(s=!0,e==="rejectionHandled"?t(r):t(n,r))}catch(o){i.throwLater(o)}var u=!1;try{u=Y(e,n,r)}catch(o){u=!0,i.throwLater(o)}var a=!1;if(G)try{a=G(e.toLowerCase(),{reason:n,promise:r})}catch(o){a=!0,i.throwLater(o)}!u&&!s&&!a&&e==="unhandledRejection"&&q(n,"Unhandled rejection ")}function U(e){var t;if(typeof e=="function")t="[function "+(e.name||"anonymous")+"]";else{t=e&&typeof e.toString=="function"?e.toString():o.toString(e);var n=/\[object [a-zA-Z0-9$_]+\]/;if(n.test(t))try{var r=JSON.stringify(e);t=r}catch(i){}t.length===0&&(t="(empty array)")}return"(<"+z(t)+">, no stack trace)"}function z(e){var t=41;return e.length<t?e:e.substr(0,t-3)+"..."}function W(){return typeof Q=="function"}function $(e){var t=e.match(V);if(t)return{fileName:t[1],line:parseInt(t[2],10)}}function J(e,t){if(!W())return;var n=e.stack.split("\n"),r=t.stack.split("\n"),i=-1,s=-1,o,u;for(var a=0;a<n.length;++a){var f=$(n[a]);if(f){o=f.fileName,i=f.line;break}}for(var a=0;a<r.length;++a){var f=$(r[a]);if(f){u=f.fileName,s=f.line;break}}if(i<0||s<0||!o||!u||o!==u||i>=s)return;X=function(e){if(l.test(e))return!0;var t=$(e);return t&&t.fileName===o&&i<=t.line&&t.line<=s?!0:!1}}function K(e){this._parent=e,this._promisesCreated=0;var t=this._length=1+(e===undefined?0:e._length);Q(this,K),t>32&&this.uncycle()}var r=t._getDomain,i=t._async,s=e("./errors").Warning,o=e("./util"),u=o.canAttachTrace,a,f,l=/[\\\/]bluebird[\\\/]js[\\\/](release|debug|instrumented)/,c=null,h=null,p=!1,d,v=o.env("BLUEBIRD_DEBUG")!=0&&!0,m=!(o.env("BLUEBIRD_WARNINGS")==0||!v&&!o.env("BLUEBIRD_WARNINGS")),g=!(o.env("BLUEBIRD_LONG_STACK_TRACES")==0||!v&&!o.env("BLUEBIRD_LONG_STACK_TRACES")),y=o.env("BLUEBIRD_W_FORGOTTEN_RETURN")!=0&&(m||!!o.env("BLUEBIRD_W_FORGOTTEN_RETURN"));t.prototype.suppressUnhandledRejections=function(){var e=this._target();e._bitField=e._bitField&-1048577|524288},t.prototype._ensurePossibleRejectionHandled=function(){if((this._bitField&524288)!==0)return;this._setRejectionIsUnhandled(),i.invokeLater(this._notifyUnhandledRejection,this,undefined)},t.prototype._notifyUnhandledRejectionIsHandled=function(){R("rejectionHandled",a,undefined,this)},t.prototype._setReturnedNonUndefined=function(){this._bitField=this._bitField|268435456},t.prototype._returnedNonUndefined=function(){return(this._bitField&268435456)!==0},t.prototype._notifyUnhandledRejection=function(){if(this._isRejectionUnhandled()){var e=this._settledValue();this._setUnhandledRejectionIsNotified(),R("unhandledRejection",f,e,this)}},t.prototype._setUnhandledRejectionIsNotified=function(){this._bitField=this._bitField|262144},t.prototype._unsetUnhandledRejectionIsNotified=function(){this._bitField=this._bitField&-262145},t.prototype._isUnhandledRejectionNotified=function(){return(this._bitField&262144)>0},t.prototype._setRejectionIsUnhandled=function(){this._bitField=this._bitField|1048576},t.prototype._unsetRejectionIsUnhandled=function(){this._bitField=this._bitField&-1048577,this._isUnhandledRejectionNotified()&&(this._unsetUnhandledRejectionIsNotified(),this._notifyUnhandledRejectionIsHandled())},t.prototype._isRejectionUnhandled=function(){return(this._bitField&1048576)>0},t.prototype._warn=function(e,t,n){return D(e,t,n||this)},t.onPossiblyUnhandledRejection=function(e){var t=r();f=typeof e=="function"?t===null?e:t.bind(e):undefined},t.onUnhandledRejectionHandled=function(e){var t=r();a=typeof e=="function"?t===null?e:t.bind(e):undefined};var b=function(){};t.longStackTraces=function(){if(i.haveItemsQueued()&&!Z.longStackTraces)throw new Error("cannot enable long stack traces after promises have been created\n\n    See http://goo.gl/MqrFmX\n");if(!Z.longStackTraces&&W()){var e=t.prototype._captureStackTrace,r=t.prototype._attachExtraTrace;Z.longStackTraces=!0,b=function(){if(i.haveItemsQueued()&&!Z.longStackTraces)throw new Error("cannot enable long stack traces after promises have been created\n\n    See http://goo.gl/MqrFmX\n");t.prototype._captureStackTrace=e,t.prototype._attachExtraTrace=r,n.deactivateLongStackTraces(),i.enableTrampoline(),Z.longStackTraces=!1},t.prototype._captureStackTrace=A,t.prototype._attachExtraTrace=O,n.activateLongStackTraces(),i.disableTrampolineIfNecessary()}},t.hasLongStackTraces=function(){return Z.longStackTraces&&W()},t.config=function(e){e=Object(e),"longStackTraces"in e&&(e.longStackTraces?t.longStackTraces():!e.longStackTraces&&t.hasLongStackTraces()&&b());if("warnings"in e){var n=e.warnings;Z.warnings=!!n,y=Z.warnings,o.isObject(n)&&"wForgottenReturn"in n&&(y=!!n.wForgottenReturn)}if("cancellation"in e&&e.cancellation&&!Z.cancellation){if(i.haveItemsQueued())throw new Error("cannot enable cancellation after promises are in use");t.prototype._clearCancellationData=T,t.prototype._propagateFrom=N,t.prototype._onCancel=S,t.prototype._setOnCancel=x,t.prototype._attachCancellationCallback=E,t.prototype._execute=w,k=N,Z.cancellation=!0}},t.prototype._execute=function(e,t,n){try{e(t,n)}catch(r){return r}},t.prototype._onCancel=function(){},t.prototype._setOnCancel=function(e){},t.prototype._attachCancellationCallback=function(e){},t.prototype._captureStackTrace=function(){},t.prototype._attachExtraTrace=function(){},t.prototype._clearCancellationData=function(){},t.prototype._propagateFrom=function(e,t){};var k=C,X=function(){return!1},V=/[\/<\(]([^:\/]+):(\d+):(?:\d+)\)?\s*$/;o.inherits(K,Error),n.CapturedTrace=K,K.prototype.uncycle=function(){var e=this._length;if(e<2)return;var t=[],n={};for(var r=0,i=this;i!==undefined;++r)t.push(i),i=i._parent;e=this._length=r;for(var r=e-1;r>=0;--r){var s=t[r].stack;n[s]===undefined&&(n[s]=r)}for(var r=0;r<e;++r){var o=t[r].stack,u=n[o];if(u!==undefined&&u!==r){u>0&&(t[u-1]._parent=undefined,t[u-1]._length=1),t[r]._parent=undefined,t[r]._length=1;var a=r>0?t[r-1]:this;u<e-1?(a._parent=t[u+1],a._parent.uncycle(),a._length=a._parent._length+1):(a._parent=undefined,a._length=1);var f=a._length+1;for(var l=r-2;l>=0;--l)t[l]._length=f,f++;return}}},K.prototype.attachExtraTrace=function(e){if(e.__stackCleaned__)return;this.uncycle();var t=I(e),n=t.message,r=[t.stack],i=this;while(i!==undefined)r.push(j(i.stack.split("\n"))),i=i._parent;B(r),H(r),o.notEnumerableProp(e,"stack",P(n,r)),o.notEnumerableProp(e,"__stackCleaned__",!0)};var Q=function(){var t=/^\s*at\s*/,n=function(e,t){return typeof e=="string"?e:t.name!==undefined&&t.message!==undefined?t.toString():U(t)};if(typeof Error.stackTraceLimit=="number"&&typeof Error.captureStackTrace=="function"){Error.stackTraceLimit+=6,c=t,h=n;var r=Error.captureStackTrace;return X=function(e){return l.test(e)},function(e,t){Error.stackTraceLimit+=6,r(e,t),Error.stackTraceLimit-=6}}var i=new Error;if(typeof i.stack=="string"&&i.stack.split("\n")[0].indexOf("stackDetection@")>=0)return c=/@/,h=n,p=!0,function(t){t.stack=(new Error).stack};var s;try{throw new Error}catch(o){s="stack"in o}return"stack"in i||!s||typeof Error.stackTraceLimit!="number"?(h=function(e,t){return typeof e=="string"?e:typeof t!="object"&&typeof t!="function"||t.name===undefined||t.message===undefined?U(t):t.toString()},null):(c=t,h=n,function(t){Error.stackTraceLimit+=6;try{throw new Error}catch(n){t.stack=n.stack}Error.stackTraceLimit-=6})}([]),G,Y=function(){if(o.isNode)return function(e,t,n){return e==="rejectionHandled"?process.emit(e,n):process.emit(e,t,n)};var e=typeof self!="undefined"?self:typeof window!="undefined"?window:typeof global!="undefined"?global:this!==undefined?this:null;if(!e)return function(){return!1};try{var t=document.createEvent("CustomEvent");t.initCustomEvent("testingtheevent",!1,!0,{}),e.dispatchEvent(t),G=function(t,n){var r=document.createEvent("CustomEvent");return r.initCustomEvent(t,!1,!0,n),!e.dispatchEvent(r)}}catch(n){}var r={};return r.unhandledRejection="onunhandledRejection".toLowerCase(),r.rejectionHandled="onrejectionHandled".toLowerCase(),function(t,n,i){var s=r[t],o=e[s];return o?(t==="rejectionHandled"?o.call(e,i):o.call(e,n,i),!0):!1}}();typeof console!="undefined"&&typeof console.warn!="undefined"&&(d=function(e){console.warn(e)},o.isNode&&process.stderr.isTTY?d=function(e,t){var n=t?"[33m":"[31m";console.warn(n+e+"[0m\n")}:!o.isNode&&typeof (new Error).stack=="string"&&(d=function(e,t){console.warn("%c"+e,t?"color: darkorange":"color: red")}));var Z={warnings:m,longStackTraces:!1,cancellation:!1};return g&&t.longStackTraces(),{longStackTraces:function(){return Z.longStackTraces},warnings:function(){return Z.warnings},cancellation:function(){return Z.cancellation},propagateFromFunction:function(){return k},boundValueFunction:function(){return L},checkForgottenReturns:M,setBounds:J,warn:D,deprecated:_,CapturedTrace:K}}},{"./errors":12,"./util":36}],10:[function(e,t,n){"use strict";t.exports=function(e){function t(){return this.value}function n(){throw this.reason}e.prototype["return"]=e.prototype.thenReturn=function(n){return n instanceof e&&n.suppressUnhandledRejections(),this._then(t,undefined,undefined,{value:n},undefined)},e.prototype["throw"]=e.prototype.thenThrow=function(e){return this._then(n,undefined,undefined,{reason:e},undefined)},e.prototype.catchThrow=function(e){if(arguments.length<=1)return this._then(undefined,n,undefined,{reason:e},undefined);var t=arguments[1],r=function(){throw t};return this.caught(e,r)},e.prototype.catchReturn=function(n){if(arguments.length<=1)return n instanceof e&&n.suppressUnhandledRejections(),this._then(undefined,t,undefined,{value:n},undefined);var r=arguments[1];r instanceof e&&r.suppressUnhandledRejections();var i=function(){return r};return this.caught(n,i)}}},{}],11:[function(e,t,n){"use strict";t.exports=function(e,t){function i(){return r(this)}function s(e,r){return n(e,r,t,t)}var n=e.reduce,r=e.all;e.prototype.each=function(e){return this.mapSeries(e)._then(i,undefined,undefined,this,undefined)},e.prototype.mapSeries=function(e){return n(this,e,t,t)},e.each=function(e,t){return s(e,t)._then(i,undefined,undefined,e,undefined)},e.mapSeries=s}},{}],12:[function(e,t,n){"use strict";function a(e,t){function n(r){if(!(this instanceof n))return new n(r);u(this,"message",typeof r=="string"?r:t),u(this,"name",e),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):Error.call(this)}return o(n,Error),n}function b(e){if(!(this instanceof b))return new b(e);u(this,"name","OperationalError"),u(this,"message",e),this.cause=e,this.isOperational=!0,e instanceof Error?(u(this,"message",e.message),u(this,"stack",e.stack)):Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor)}var r=e("./es5"),i=r.freeze,s=e("./util"),o=s.inherits,u=s.notEnumerableProp,f,l,c=a("Warning","warning"),h=a("CancellationError","cancellation error"),p=a("TimeoutError","timeout error"),d=a("AggregateError","aggregate error");try{f=TypeError,l=RangeError}catch(v){f=a("TypeError","type error"),l=a("RangeError","range error")}var m="join pop push shift unshift slice filter forEach some every map indexOf lastIndexOf reduce reduceRight sort reverse".split(" ");for(var g=0;g<m.length;++g)typeof Array.prototype[m[g]]=="function"&&(d.prototype[m[g]]=Array.prototype[m[g]]);r.defineProperty(d.prototype,"length",{value:0,configurable:!1,writable:!0,enumerable:!0}),d.prototype.isOperational=!0;var y=0;d.prototype.toString=function(){var e=Array(y*4+1).join(" "),t="\n"+e+"AggregateError of:"+"\n";y++,e=Array(y*4+1).join(" ");for(var n=0;n<this.length;++n){var r=this[n]===this?"[Circular AggregateError]":this[n]+"",i=r.split("\n");for(var s=0;s<i.length;++s)i[s]=e+i[s];r=i.join("\n"),t+=r+"\n"}return y--,t},o(b,Error);var w=Error.__BluebirdErrorTypes__;w||(w=i({CancellationError:h,TimeoutError:p,OperationalError:b,RejectionError:b,AggregateError:d}),u(Error,"__BluebirdErrorTypes__",w)),t.exports={Error:Error,TypeError:f,RangeError:l,CancellationError:w.CancellationError,OperationalError:w.OperationalError,TimeoutError:w.TimeoutError,AggregateError:w.AggregateError,Warning:c}},{"./es5":13,"./util":36}],13:[function(e,t,n){var r=function(){"use strict";return this===undefined}();if(r)t.exports={freeze:Object.freeze,defineProperty:Object.defineProperty,getDescriptor:Object.getOwnPropertyDescriptor,keys:Object.keys,names:Object.getOwnPropertyNames,getPrototypeOf:Object.getPrototypeOf,isArray:Array.isArray,isES5:r,propertyIsWritable:function(e,t){var n=Object.getOwnPropertyDescriptor(e,t);return!!(!n||n.writable||n.set)}};else{var i={}.hasOwnProperty,s={}.toString,o={}.constructor.prototype,u=function(e){var t=[];for(var n in e)i.call(e,n)&&t.push(n);return t},a=function(e,t){return{value:e[t]}},f=function(e,t,n){return e[t]=n.value,e},l=function(e){return e},c=function(e){try{return Object(e).constructor.prototype}catch(t){return o}},h=function(e){try{return s.call(e)==="[object Array]"}catch(t){return!1}};t.exports={isArray:h,keys:u,names:u,defineProperty:f,getDescriptor:a,freeze:l,getPrototypeOf:c,isES5:r,propertyIsWritable:function(){return!0}}}},{}],14:[function(e,t,n){"use strict";t.exports=function(e,t){var n=e.map;e.prototype.filter=function(e,r){return n(this,e,r,t)},e.filter=function(e,r,i){return n(e,r,i,t)}}},{}],15:[function(e,t,n){"use strict";t.exports=function(t,n){function o(e){this.finallyHandler=e}function u(e,t){return e.cancelPromise!=null?(arguments.length>1?e.cancelPromise._reject(t):e.cancelPromise._cancel(),e.cancelPromise=null,!0):!1}function a(){return l.call(this,this.promise._target()._settledValue())}function f(e){if(u(this,e))return;return s.e=e,s}function l(e){var r=this.promise,l=this.handler;if(!this.called){this.called=!0;var c=this.type===0?l.call(r._boundValue()):l.call(r._boundValue(),e);if(c!==undefined){r._setReturnedNonUndefined();var h=n(c,r);if(h instanceof t){if(this.cancelPromise!=null){if(h.isCancelled()){var p=new i("late cancellation observer");return r._attachExtraTrace(p),s.e=p,s}h.isPending()&&h._attachCancellationCallback(new o(this))}return h._then(a,f,undefined,this,undefined)}}}return r.isRejected()?(u(this),s.e=e,s):(u(this),e)}var r=e("./util"),i=t.CancellationError,s=r.errorObj;return o.prototype._resultCancelled=function(){u(this.finallyHandler)},t.prototype._passThrough=function(e,t,n,r){return typeof e!="function"?this.then():this._then(n,r,undefined,{promise:this,handler:e,called:!1,cancelPromise:null,type:t},undefined)},t.prototype.lastly=t.prototype["finally"]=function(e){return this._passThrough(e,0,l,l)},t.prototype.tap=function(e){return this._passThrough(e,1,l)},l}},{"./util":36}],16:[function(e,t,n){"use strict";t.exports=function(t,n,r,i,s,o){function p(e,n,r){for(var s=0;s<n.length;++s){r._pushContext();var o=c(n[s])(e);r._popContext();if(o===l){r._pushContext();var u=t.reject(l.e);return r._popContext(),u}var a=i(o,r);if(a instanceof t)return a}return null}function d(e,n,i,s){var o=this._promise=new t(r);o._captureStackTrace(),o._setOnCancel(this),this._stack=s,this._generatorFunction=e,this._receiver=n,this._generator=undefined,this._yieldHandlers=typeof i=="function"?[i].concat(h):h,this._yieldedPromise=null}var u=e("./errors"),a=u.TypeError,f=e("./util"),l=f.errorObj,c=f.tryCatch,h=[];f.inherits(d,s),d.prototype._isResolved=function(){return this._promise===null},d.prototype._cleanup=function(){this._promise=this._generator=null},d.prototype._promiseCancelled=function(){if(this._isResolved())return;var e=typeof this._generator["return"]!="undefined",n;if(!e){var r=new t.CancellationError("generator .return() sentinel");t.coroutine.returnSentinel=r,this._promise._attachExtraTrace(r),this._promise._pushContext(),n=c(this._generator["throw"]).call(this._generator,r),this._promise._popContext(),n===l&&n.e===r&&(n=null)}else this._promise._pushContext(),n=c(this._generator["return"]).call(this._generator,undefined),this._promise._popContext();var i=this._promise;this._cleanup(),n===l?i._rejectCallback(n.e,!1):i.cancel()},d.prototype._promiseFulfilled=function(e){this._yieldedPromise=null,this._promise._pushContext();var t=c(this._generator.next).call(this._generator,e);this._promise._popContext(),this._continue(t)},d.prototype._promiseRejected=function(e){this._yieldedPromise=null,this._promise._attachExtraTrace(e),this._promise._pushContext();var t=c(this._generator["throw"]).call(this._generator,e);this._promise._popContext(),this._continue(t)},d.prototype._resultCancelled=function(){if(this._yieldedPromise instanceof t){var e=this._yieldedPromise;this._yieldedPromise=null,e.cancel()}},d.prototype.promise=function(){return this._promise},d.prototype._run=function(){this._generator=this._generatorFunction.call(this._receiver),this._receiver=this._generatorFunction=undefined,this._promiseFulfilled(undefined)},d.prototype._continue=function(e){var n=this._promise;if(e===l)return this._cleanup(),n._rejectCallback(e.e,!1);var r=e.value;if(e.done===!0)return this._cleanup(),n._resolveCallback(r);var s=i(r,this._promise);if(!(s instanceof t)){s=p(s,this._yieldHandlers,this._promise);if(s===null){this._promiseRejected(new a("A value %s was yielded that could not be treated as a promise\n\n    See http://goo.gl/MqrFmX\n\n".replace("%s",r)+"From coroutine:\n"+this._stack.split("\n").slice(1,-7).join("\n")));return}}s=s._target();var o=s._bitField;(o&50397184)===0?(this._yieldedPromise=s,s._proxy(this,null)):(o&33554432)!==0?this._promiseFulfilled(s._value()):(o&16777216)!==0?this._promiseRejected(s._reason()):this._promiseCancelled()},t.coroutine=function(e,t){if(typeof e!="function")throw new a("generatorFunction must be a function\n\n    See http://goo.gl/MqrFmX\n");var n=Object(t).yieldHandler,r=d,i=(new Error).stack;return function(){var t=e.apply(this,arguments),s=new r(undefined,undefined,n,i),o=s.promise();return s._generator=t,s._promiseFulfilled(undefined),o}},t.coroutine.addYieldHandler=function(e){if(typeof e!="function")throw new a("expecting a function but got "+f.classString(e));h.push(e)},t.spawn=function(e){o.deprecated("Promise.spawn()","Promise.coroutine()");if(typeof e!="function")return n("generatorFunction must be a function\n\n    See http://goo.gl/MqrFmX\n");var r=new d(e,this),i=r.promise();return r._run(t.spawn),i}}},{"./errors":12,"./util":36}],17:[function(e,t,n){"use strict";t.exports=function(t,n,r,i){var s=e("./util"),o=s.canEvaluate,u=s.tryCatch,a=s.errorObj,f;t.join=function(){var e=arguments.length-1,s;e>0&&typeof arguments[e]=="function"&&(s=arguments[e]);var y=[].slice.call(arguments);s&&y.pop();var u=(new n(y)).promise();return s!==undefined?u.spread(s):u}}},{"./util":36}],18:[function(e,t,n){"use strict";t.exports=function(t,n,r,i,s,o){function h(e,t,n,r){this.constructor$(e),this._promise._captureStackTrace();var i=u();this._callback=i===null?t:i.bind(t),this._preservedValues=r===s?new Array(this.length()):null,this._limit=n,this._inFlight=0,this._queue=n>=1?[]:c,this._init$(undefined,-2)}function p(e,t,n,i){if(typeof t!="function")return r("expecting a function but got "+a.classString(t));var s=typeof n=="object"&&n!==null?n.concurrency:0;return s=typeof s=="number"&&isFinite(s)&&s>=1?s:0,(new h(e,t,s,i)).promise()}var u=t._getDomain,a=e("./util"),f=a.tryCatch,l=a.errorObj,c=[];a.inherits(h,n),h.prototype._init=function(){},h.prototype._promiseFulfilled=function(e,n){var r=this._values,s=this.length(),u=this._preservedValues,a=this._limit;if(n<0){n=n*-1-1,r[n]=e;if(a>=1){this._inFlight--,this._drainQueue();if(this._isResolved())return!0}}else{if(a>=1&&this._inFlight>=a)return r[n]=e,this._queue.push(n),!1;u!==null&&(u[n]=e);var c=this._promise,h=this._callback,p=c._boundValue();c._pushContext();var d=f(h).call(p,e,n,s),v=c._popContext();o.checkForgottenReturns(d,v,u!==null?"Promise.filter":"Promise.map",c);if(d===l)return this._reject(d.e),!0;var m=i(d,this._promise);if(m instanceof t){m=m._target();var g=m._bitField;if((g&50397184)===0)return a>=1&&this._inFlight++,r[n]=m,m._proxy(this,(n+1)*-1),!1;if((g&33554432)===0)return(g&16777216)!==0?(this._reject(m._reason()),!0):(this._cancel(),!0);d=m._value()}r[n]=d}var y=++this._totalResolved;return y>=s?(u!==null?this._filter(r,u):this._resolve(r),!0):!1},h.prototype._drainQueue=function(){var e=this._queue,t=this._limit,n=this._values;while(e.length>0&&this._inFlight<t){if(this._isResolved())return;var r=e.pop();this._promiseFulfilled(n[r],r)}},h.prototype._filter=function(e,t){var n=t.length,r=new Array(n),i=0;for(var s=0;s<n;++s)e[s]&&(r[i++]=t[s]);r.length=i,this._resolve(r)},h.prototype.preservedValues=function(){return this._preservedValues},t.prototype.map=function(e,t){return p(this,e,t,null)},t.map=function(e,t,n,r){return p(e,t,n,r)}}},{"./util":36}],19:[function(e,t,n){"use strict";t.exports=function(t,n,r,i,s){var o=e("./util"),u=o.tryCatch;t.method=function(e){if(typeof e!="function")throw new t.TypeError("expecting a function but got "+o.classString(e));return function(){var r=new t(n);r._captureStackTrace(),r._pushContext();var i=u(e).apply(this,arguments),o=r._popContext();return s.checkForgottenReturns(i,o,"Promise.method",r),r._resolveFromSyncValue(i),r}},t.attempt=t["try"]=function(e){if(typeof e!="function")return i("expecting a function but got "+o.classString(e));var r=new t(n);r._captureStackTrace(),r._pushContext();var a;if(arguments.length>1){s.deprecated("calling Promise.try with more than 1 argument");var f=arguments[1],l=arguments[2];a=o.isArray(f)?u(e).apply(l,f):u(e).call(l,f)}else a=u(e)();var c=r._popContext();return s.checkForgottenReturns(a,c,"Promise.try",r),r._resolveFromSyncValue(a),r},t.prototype._resolveFromSyncValue=function(e){e===o.errorObj?this._rejectCallback(e.e,!1):this._resolveCallback(e,!0)}}},{"./util":36}],20:[function(e,t,n){"use strict";function a(e){return e instanceof Error&&u.getPrototypeOf(e)===Error.prototype}function l(e){var t;if(a(e)){t=new o(e),t.name=e.name,t.message=e.message,t.stack=e.stack;var n=u.keys(e);for(var i=0;i<n.length;++i){var s=n[i];f.test(s)||(t[s]=e[s])}return t}return r.markAsOriginatingFromRejection(e),e}function c(e,t){return function(n,r){if(e===null)return;if(n){var s=l(i(n));e._attachExtraTrace(s),e._reject(s)}else if(!t)e._fulfill(r);else{var o=[].slice.call(arguments,1);e._fulfill(o)}e=null}}var r=e("./util"),i=r.maybeWrapAsError,s=e("./errors"),o=s.OperationalError,u=e("./es5"),f=/^(?:name|message|stack|cause)$/;t.exports=c},{"./errors":12,"./es5":13,"./util":36}],21:[function(e,t,n){"use strict";t.exports=function(t){function o(e,t){var o=this;if(!n.isArray(e))return u.call(o,e,t);var a=i(t).apply(o._boundValue(),[null].concat(e));a===s&&r.throwLater(a.e)}function u(e,t){var n=this,o=n._boundValue(),u=e===undefined?i(t).call(o,null):i(t).call(o,null,e);u===s&&r.throwLater(u.e)}function a(e,t){var n=this;if(!e){var o=new Error(e+"");o.cause=e,e=o}var u=i(t).call(n._boundValue(),e);u===s&&r.throwLater(u.e)}var n=e("./util"),r=t._async,i=n.tryCatch,s=n.errorObj;t.prototype.asCallback=t.prototype.nodeify=function(e,t){if(typeof e=="function"){var n=u;t!==undefined&&Object(t).spread&&(n=o),this._then(n,a,undefined,this,e)}return this}}},{"./util":36}],22:[function(e,t,n){"use strict";t.exports=function(){function i(){}function L(e,t){if(typeof t!="function")throw new h("expecting a function but got "+o.classString(t));if(e.constructor!==A)throw new h("the promise constructor cannot be invoked directly\n\n    See http://goo.gl/MqrFmX\n")}function A(e){this._bitField=0,this._fulfillmentHandler0=undefined,this._rejectionHandler0=undefined,this._promise0=undefined,this._receiver0=undefined,e!==d&&(L(this,e),this._resolveFromExecutor(e)),this._promiseCreated()}function O(e){this.promise._resolveCallback(e)}function M(e){this.promise._rejectCallback(e,!1)}function _(e){var t=new A(d);t._fulfillmentHandler0=e,t._rejectionHandler0=e,t._promise0=e,t._receiver0=e}var t=function(){return new h("circular promise resolution chain\n\n    See http://goo.gl/MqrFmX\n")},n=function(){return new A.PromiseInspection(this._target())},r=function(e){return A.reject(new h(e))},s={},o=e("./util"),u;o.isNode?u=function(){var e=process.domain;return e===undefined&&(e=null),e}:u=function(){return null},o.notEnumerableProp(A,"_getDomain",u);var a=e("./es5"),f=e("./async"),l=new f;a.defineProperty(A,"_async",{value:l});var c=e("./errors"),h=A.TypeError=c.TypeError;A.RangeError=c.RangeError;var p=A.CancellationError=c.CancellationError;A.TimeoutError=c.TimeoutError,A.OperationalError=c.OperationalError,A.RejectionError=c.OperationalError,A.AggregateError=c.AggregateError;var d=function(){},v={},m={},g=e("./thenables")(A,d),y=e("./promise_array")(A,d,g,r,i),b=e("./context")(A),w=b.create,E=e("./debuggability")(A,b),S=E.CapturedTrace,x=e("./finally")(A,g),T=e("./catch_filter")(m),N=e("./nodeback"),C=o.errorObj,k=o.tryCatch;return A.prototype.toString=function(){return"[object Promise]"},A.prototype.caught=A.prototype["catch"]=function(e){var t=arguments.length;if(t>1){var n=new Array(t-1),i=0,s;for(s=0;s<t-1;++s){var u=arguments[s];if(!o.isObject(u))return r("expecting an object but got "+o.classString(u));n[i++]=u}return n.length=i,e=arguments[s],this.then(undefined,T(n,e,this))}return this.then(undefined,e)},A.prototype.reflect=function(){return this._then(n,n,undefined,this,undefined)},A.prototype.then=function(e,t){if(E.warnings()&&arguments.length>0&&typeof e!="function"&&typeof t!="function"){var n=".then() only accepts functions but was passed: "+o.classString(e);arguments.length>1&&(n+=", "+o.classString(t)),this._warn(n)}return this._then(e,t,undefined,undefined,undefined)},A.prototype.done=function(e,t){var n=this._then(e,t,undefined,undefined,undefined);n._setIsFinal()},A.prototype.spread=function(e){return typeof e!="function"?r("expecting a function but got "+o.classString(e)):this.all()._then(e,undefined,undefined,v,undefined)},A.prototype.toJSON=function(){var e={isFulfilled:!1,isRejected:!1,fulfillmentValue:undefined,rejectionReason:undefined};return this.isFulfilled()?(e.fulfillmentValue=this.value(),e.isFulfilled=!0):this.isRejected()&&(e.rejectionReason=this.reason(),e.isRejected=!0),e},A.prototype.all=function(){return arguments.length>0&&this._warn(".all() was passed arguments but it does not take any"),(new y(this)).promise()},A.prototype.error=function(e){return this.caught(o.originatesFromRejection,e)},A.is=function(e){return e instanceof A},A.fromNode=A.fromCallback=function(e){var t=new A(d),n=arguments.length>1?!!Object(arguments[1]).multiArgs:!1,r=k(e)(N(t,n));return r===C&&t._rejectCallback(r.e,!0),t._isFateSealed()||t._setAsyncGuaranteed(),t},A.all=function(e){return(new y(e)).promise()},A.cast=function(e){var t=g(e);return t instanceof A||(t=new A(d),t._captureStackTrace(),t._setFulfilled(),t._rejectionHandler0=e),t},A.resolve=A.fulfilled=A.cast,A.reject=A.rejected=function(e){var t=new A(d);return t._captureStackTrace(),t._rejectCallback(e,!0),t},A.setScheduler=function(e){if(typeof e!="function")throw new h("expecting a function but got "+o.classString(e));var t=l._schedule;return l._schedule=e,t},A.prototype._then=function(e,t,n,r,i){var s=i!==undefined,o=s?i:new A(d),a=this._target(),f=a._bitField;s||(o._propagateFrom(this,3),o._captureStackTrace(),r===undefined&&(this._bitField&2097152)!==0&&((f&50397184)!==0?r=this._boundValue():r=a===this?undefined:this._boundTo));var c=u();if((f&50397184)!==0){var h,v,m=a._settlePromiseCtx;(f&33554432)!==0?(v=a._rejectionHandler0,h=e):(f&16777216)!==0?(v=a._fulfillmentHandler0,h=t,a._unsetRejectionIsUnhandled()):(m=a._settlePromiseLateCancellationObserver,v=new p("late cancellation observer"),a._attachExtraTrace(v),h=t),l.invoke(m,a,{handler:c===null?h:typeof h=="function"&&c.bind(h),promise:o,receiver:r,value:v})}else a._addCallbacks(e,t,o,r,c);return o},A.prototype._length=function(){return this._bitField&65535},A.prototype._isFateSealed=function(){return(this._bitField&117506048)!==0},A.prototype._isFollowing=function(){return(this._bitField&67108864)===67108864},A.prototype._setLength=function(e){this._bitField=this._bitField&-65536|e&65535},A.prototype._setFulfilled=function(){this._bitField=this._bitField|33554432},A.prototype._setRejected=function(){this._bitField=this._bitField|16777216},A.prototype._setFollowing=function(){this._bitField=this._bitField|67108864},A.prototype._setIsFinal=function(){this._bitField=this._bitField|4194304},A.prototype._isFinal=function(){return(this._bitField&4194304)>0},A.prototype._unsetCancelled=function(){this._bitField=this._bitField&-65537},A.prototype._setCancelled=function(){this._bitField=this._bitField|65536},A.prototype._setAsyncGuaranteed=function(){this._bitField=this._bitField|134217728},A.prototype._receiverAt=function(e){var t=e===0?this._receiver0:this[e*4-4+3];return t===s?undefined:t===undefined&&this._isBound()?this._boundValue():t},A.prototype._promiseAt=function(e){return this[e*4-4+2]},A.prototype._fulfillmentHandlerAt=function(e){return this[e*4-4+0]},A.prototype._rejectionHandlerAt=function(e){return this[e*4-4+1]},A.prototype._boundValue=function(){},A.prototype._migrateCallback0=function(e){var t=e._bitField,n=e._fulfillmentHandler0,r=e._rejectionHandler0,i=e._promise0,o=e._receiverAt(0);o===undefined&&(o=s),this._addCallbacks(n,r,i,o,null)},A.prototype._migrateCallbackAt=function(e,t){var n=e._fulfillmentHandlerAt(t),r=e._rejectionHandlerAt(t),i=e._promiseAt(t),o=e._receiverAt(t);o===undefined&&(o=s),this._addCallbacks(n,r,i,o,null)},A.prototype._addCallbacks=function(e,t,n,r,i){var s=this._length();s>=65531&&(s=0,this._setLength(0));if(s===0)this._promise0=n,this._receiver0=r,typeof e=="function"&&(this._fulfillmentHandler0=i===null?e:i.bind(e)),typeof t=="function"&&(this._rejectionHandler0=i===null?t:i.bind(t));else{var o=s*4-4;this[o+2]=n,this[o+3]=r,typeof e=="function"&&(this[o+0]=i===null?e:i.bind(e)),typeof t=="function"&&(this[o+1]=i===null?t:i.bind(t))}return this._setLength(s+1),s},A.prototype._proxy=function(e,t){this._addCallbacks(undefined,undefined,t,e,null)},A.prototype._resolveCallback=function(e,n){if((this._bitField&117506048)!==0)return;if(e===this)return this._rejectCallback(t(),!1);var r=g(e,this);if(!(r instanceof A))return this._fulfill(e);n&&this._propagateFrom(r,2);var i=r._target(),s=i._bitField;if((s&50397184)===0){var o=this._length();o>0&&i._migrateCallback0(this);for(var u=1;u<o;++u)i._migrateCallbackAt(this,u);this._setFollowing(),this._setLength(0),this._setFollowee(i)}else if((s&33554432)!==0)this._fulfill(i._value());else if((s&16777216)!==0)this._reject(i._reason());else{var a=new p("late cancellation observer");i._attachExtraTrace(a),this._reject(a)}},A.prototype._rejectCallback=function(e,t,n){var r=o.ensureErrorObject(e),i=r===e;if(!i&&!n&&E.warnings()){var s="a promise was rejected with a non-error: "+o.classString(e);this._warn(s,!0)}this._attachExtraTrace(r,t?i:!1),this._reject(e)},A.prototype._resolveFromExecutor=function(e){var t=this;this._captureStackTrace(),this._pushContext();var n=!0,r=this._execute(e,function(e){t._resolveCallback(e)},function(e){t._rejectCallback(e,n)});n=!1,this._popContext(),r!==undefined&&t._rejectCallback(r,!0)},A.prototype._settlePromiseFromHandler=function(e,n,r,i){var s=i._bitField;if((s&65536)!==0)return;i._pushContext();var u;n===v?!r||typeof r.length!="number"?(u=C,u.e=new h("cannot .spread() a non-array: "+o.classString(r))):u=k(e).apply(this._boundValue(),r):u=k(e).call(n,r);var a=i._popContext();s=i._bitField;if((s&65536)!==0)return;if(u===m)i._reject(r);else if(u===C||u===i){var f=u===i?t():u.e;i._rejectCallback(f,!1)}else E.checkForgottenReturns(u,a,"",i,this),i._resolveCallback(u)},A.prototype._target=function(){var e=this;while(e._isFollowing())e=e._followee();return e},A.prototype._followee=function(){return this._rejectionHandler0},A.prototype._setFollowee=function(e){this._rejectionHandler0=e},A.prototype._settlePromise=function(e,t,r,s){var o=e instanceof A,u=this._bitField,a=(u&134217728)!==0;(u&65536)!==0?(o&&e._invokeInternalOnCancel(),t===x?(r.cancelPromise=e,k(t).call(r,s)===C&&e._reject(C.e)):t===n?e._fulfill(n.call(r)):r instanceof i?r._promiseCancelled(e):o||e instanceof y?e._cancel():r.cancel()):typeof t=="function"?o?(a&&e._setAsyncGuaranteed(),this._settlePromiseFromHandler(t,r,s,e)):t.call(r,s,e):r instanceof i?r._isResolved()||((u&33554432)!==0?r._promiseFulfilled(s,e):r._promiseRejected(s,e)):o&&(a&&e._setAsyncGuaranteed(),(u&33554432)!==0?e._fulfill(s):e._reject(s))},A.prototype._settlePromiseLateCancellationObserver=function(e){var t=e.handler,n=e.promise,r=e.receiver,i=e.value;typeof t=="function"?n instanceof A?this._settlePromiseFromHandler(t,r,i,n):t.call(r,i,n):n instanceof A&&n._reject(i)},A.prototype._settlePromiseCtx=function(e){this._settlePromise(e.promise,e.handler,e.receiver,e.value)},A.prototype._settlePromise0=function(e,t,n){var r=this._promise0,i=this._receiverAt(0);this._promise0=undefined,this._receiver0=undefined,this._settlePromise(r,e,i,t)},A.prototype._clearCallbackDataAtIndex=function(e){var t=e*4-4;this[t+2]=this[t+3]=this[t+0]=this[t+1]=undefined},A.prototype._fulfill=function(e){var n=this._bitField;if((n&117506048)>>>16)return;if(e===this){var r=t();return this._attachExtraTrace(r),this._reject(r)}this._setFulfilled(),this._rejectionHandler0=e,(n&65535)>0&&((n&134217728)!==0?this._settlePromises():l.settlePromises(this))},A.prototype._reject=function(e){var t=this._bitField;if((t&117506048)>>>16)return;this._setRejected(),this._fulfillmentHandler0=e;if(this._isFinal())return l.fatalError(e,o.isNode);(t&65535)>0?(t&134217728)!==0?this._settlePromises():l.settlePromises(this):this._ensurePossibleRejectionHandled()},A.prototype._fulfillPromises=function(e,t){for(var n=1;n<e;n++){var r=this._fulfillmentHandlerAt(n),i=this._promiseAt(n),s=this._receiverAt(n);this._clearCallbackDataAtIndex(n),this._settlePromise(i,r,s,t)}},A.prototype._rejectPromises=function(e,t){for(var n=1;n<e;n++){var r=this._rejectionHandlerAt(n),i=this._promiseAt(n),s=this._receiverAt(n);this._clearCallbackDataAtIndex(n),this._settlePromise(i,r,s,t)}},A.prototype._settlePromises=function(){var e=this._bitField,t=e&65535;if(t>0){if((e&16842752)!==0){var n=this._fulfillmentHandler0;this._settlePromise0(this._rejectionHandler0,n,e),this._rejectPromises(t,n)}else{var r=this._rejectionHandler0;this._settlePromise0(this._fulfillmentHandler0,r,e),this._fulfillPromises(t,r)}this._setLength(0)}this._clearCancellationData()},A.prototype._settledValue=function(){var e=this._bitField;if((e&33554432)!==0)return this._rejectionHandler0;if((e&16777216)!==0)return this._fulfillmentHandler0},A.defer=A.pending=function(){E.deprecated("Promise.defer","new Promise");var e=new A(d);return{promise:e,resolve:O,reject:M}},o.notEnumerableProp(A,"_makeSelfResolutionError",t),e("./method")(A,d,g,r,E),e("./bind")(A,d,g,E),e("./cancel")(A,y,r,E),e("./direct_resolve")(A),e("./synchronous_inspection")(A),e("./join")(A,y,g,d,E),A.Promise=A,e("./map.js")(A,y,r,g,d,E),e("./using.js")(A,r,g,w,d,E),e("./timers.js")(A,d),e("./generators.js")(A,r,d,g,i,E),e("./nodeify.js")(A),e("./call_get.js")(A),e("./props.js")(A,y,g,r),e("./race.js")(A,d,g,r),e("./reduce.js")(A,y,r,g,d,E),e("./settle.js")(A,y,E),e("./some.js")(A,y,r),e("./promisify.js")(A,d),e("./any.js")(A),e("./each.js")(A,d),e("./filter.js")(A,d),o.toFastProperties(A),o.toFastProperties(A.prototype),_({a:1}),_({b:2}),_({c:3}),_(1),_(function(){}),_(undefined),_(!1),_(new A(d)),E.setBounds(f.firstLineError,o.lastLineError),A}},{"./any.js":1,"./async":2,"./bind":3,"./call_get.js":5,"./cancel":6,"./catch_filter":7,"./context":8,"./debuggability":9,"./direct_resolve":10,"./each.js":11,"./errors":12,"./es5":13,"./filter.js":14,"./finally":15,"./generators.js":16,"./join":17,"./map.js":18,"./method":19,"./nodeback":20,"./nodeify.js":21,"./promise_array":23,"./promisify.js":24,"./props.js":25,"./race.js":27,"./reduce.js":28,"./settle.js":30,"./some.js":31,"./synchronous_inspection":32,"./thenables":33,"./timers.js":34,"./using.js":35,"./util":36}],23:[function(e,t,n){"use strict";t.exports=function(t,n,r,i,s){function a(e){switch(e){case-2:return[];case-3:return{}}}function f(e){var r=this._promise=new t(n);e instanceof t&&r._propagateFrom(e,3),r._setOnCancel(this),this._values=e,this._length=0,this._totalResolved=0,this._init(undefined,-2)}var o=e("./util"),u=o.isArray;return o.inherits(f,s),f.prototype.length=function(){return this._length},f.prototype.promise=function(){return this._promise},f.prototype._init=function l(e,n){var s=r(this._values,this._promise);if(s instanceof t){s=s._target();var u=s._bitField;this._values=s;if((u&50397184)===0)return this._promise._setAsyncGuaranteed(),s._then(l,this._reject,undefined,this,n);if((u&33554432)===0)return(u&16777216)!==0?this._reject(s._reason()):this._cancel();s=s._value()}s=o.asArray(s);if(s===null){var f=i("expecting an array or an iterable object but got "+o.classString(s)).reason();this._promise._rejectCallback(f,!1);return}if(s.length===0){n===-5?this._resolveEmptyArray():this._resolve(a(n));return}this._iterate(s)},f.prototype._iterate=function(e){var n=this.getActualLength(e.length);this._length=n,this._values=this.shouldCopyValues()?new Array(n):this._values;var i=this._promise,s=!1,o=null;for(var u=0;u<n;++u){var a=r(e[u],i);a instanceof t?(a=a._target(),o=a._bitField):o=null,s?o!==null&&a.suppressUnhandledRejections():o!==null?(o&50397184)===0?(a._proxy(this,u),this._values[u]=a):(o&33554432)!==0?s=this._promiseFulfilled(a._value(),u):(o&16777216)!==0?s=this._promiseRejected(a._reason(),u):s=this._promiseCancelled(u):s=this._promiseFulfilled(a,u)}s||i._setAsyncGuaranteed()},f.prototype._isResolved=function(){return this._values===null},f.prototype._resolve=function(e){this._values=null,this._promise._fulfill(e)},f.prototype._cancel=function(){if(this._isResolved()||!this._promise.isCancellable())return;this._values=null,this._promise._cancel()},f.prototype._reject=function(e){this._values=null,this._promise._rejectCallback(e,!1)},f.prototype._promiseFulfilled=function(e,t){this._values[t]=e;var n=++this._totalResolved;return n>=this._length?(this._resolve(this._values),!0):!1},f.prototype._promiseCancelled=function(){return this._cancel(),!0},f.prototype._promiseRejected=function(e){return this._totalResolved++,this._reject(e),!0},f.prototype._resultCancelled=function(){if(this._isResolved())return;var e=this._values;this._cancel();if(e instanceof t)e.cancel();else for(var n=0;n<e.length;++n)e[n]instanceof t&&e[n].cancel()},f.prototype.shouldCopyValues=function(){return!0},f.prototype.getActualLength=function(e){return e},f}},{"./util":36}],24:[function(e,t,n){"use strict";t.exports=function(t,n){function v(e){return!p.test(e)}function m(e){try{return e.__isPromisified__===!0}catch(t){return!1}}function g(e,t,n){var r=i.getDataPropertyOrDefault(e,t+n,c);return r?m(r):!1}function y(e,t,n){for(var r=0;r<e.length;r+=2){var i=e[r];if(n.test(i)){var s=i.replace(n,"");for(var o=0;o<e.length;o+=2)if(e[o]===s)throw new f("Cannot promisify an API that has normal methods with '%s'-suffix\n\n    See http://goo.gl/MqrFmX\n".replace("%s",t))}}}function b(e,t,n,r){var s=i.inheritedDataKeys(e),o=[];for(var u=0;u<s.length;++u){var a=s[u],f=e[a],l=r===d?!0:d(a,f,e);typeof f=="function"&&!m(f)&&!g(e,a,t)&&r(a,f,e,l)&&o.push(a,f)}return y(o,t,n),o}function C(e,a,f,l,c,h){function v(){var i=a;a===r&&(i=this);var f=new t(n);f._captureStackTrace();var l=typeof d=="string"&&this!==p?this[d]:e,c=s(f,h);try{l.apply(i,o(arguments,c))}catch(v){f._rejectCallback(u(v),!0,!0)}return f._isFateSealed()||f._setAsyncGuaranteed(),f}var p=function(){return this}(),d=e;return typeof d=="string"&&(e=l),i.notEnumerableProp(v,"__isPromisified__",!0),v}function L(e,t,n,s,o){var u=new RegExp(w(t)+"$"),a=b(e,t,u,n);for(var f=0,l=a.length;f<l;f+=2){var c=a[f],h=a[f+1],p=c+t;if(s===k)e[p]=k(c,r,c,h,t,o);else{var d=s(h,function(){return k(c,r,c,h,t,o)});i.notEnumerableProp(d,"__isPromisified__",!0),e[p]=d}}return i.toFastProperties(e),e}function A(e,t,n){return k(e,t,undefined,e,null,n)}var r={},i=e("./util"),s=e("./nodeback"),o=i.withAppended,u=i.maybeWrapAsError,a=i.canEvaluate,f=e("./errors").TypeError,l="Async",c={__isPromisified__:!0},h=["arity","length","name","arguments","caller","callee","prototype","__isPromisified__"],p=new RegExp("^(?:"+h.join("|")+")$"),d=function(e){return i.isIdentifier(e)&&e.charAt(0)!=="_"&&e!=="constructor"},w=function(e){return e.replace(/([$])/,"\\$")},E,k=a?E:C;t.promisify=function(e,t){if(typeof e!="function")throw new f("expecting a function but got "+i.classString(e));if(m(e))return e;t=Object(t);var n=t.context===undefined?r:t.context,s=!!t.multiArgs,o=A(e,n,s);return i.copyDescriptors(e,o,v),o},t.promisifyAll=function(e,t){if(typeof e!="function"&&typeof e!="object")throw new f("the target of promisifyAll must be an object or a function\n\n    See http://goo.gl/MqrFmX\n");t=Object(t);var n=!!t.multiArgs,r=t.suffix;typeof r!="string"&&(r=l);var s=t.filter;typeof s!="function"&&(s=d);var o=t.promisifier;typeof o!="function"&&(o=k);if(!i.isIdentifier(r))throw new RangeError("suffix must be a valid identifier\n\n    See http://goo.gl/MqrFmX\n");var u=i.inheritedDataKeys(e);for(var a=0;a<u.length;++a){var c=e[u[a]];u[a]!=="constructor"&&i.isClass(c)&&(L(c.prototype,r,s,o,n),L(c,r,s,o,n))}return L(e,r,s,o,n)}}},{"./errors":12,"./nodeback":20,"./util":36}],25:[function(e,t,n){"use strict";t.exports=function(t,n,r,i){function c(e){var t=!1,n;if(a!==undefined&&e instanceof a)n=f(e),t=!0;else{var r=u.keys(e),i=r.length;n=new Array(i*2);for(var s=0;s<i;++s){var o=r[s];n[s]=e[o],n[s+i]=o}}this.constructor$(n),this._isMap=t,this._init$(undefined,-3)}function h(e){var n,s=r(e);return o(s)?(s instanceof t?n=s._then(t.props,undefined,undefined,undefined,undefined):n=(new c(s)).promise(),s instanceof t&&n._propagateFrom(s,2),n):i("cannot await properties of a non-object\n\n    See http://goo.gl/MqrFmX\n")}var s=e("./util"),o=s.isObject,u=e("./es5"),a;typeof Map=="function"&&(a=Map);var f=function(){function n(n,r){this[e]=n,this[e+t]=r,e++}var e=0,t=0;return function(i){t=i.size,e=0;var s=new Array(i.size*2);return i.forEach(n,s),s}}(),l=function(e){var t=new a,n=e.length/2|0;for(var r=0;r<n;++r){var i=e[n+r],s=e[r];t.set(i,s)}return t};s.inherits(c,n),c.prototype._init=function(){},c.prototype._promiseFulfilled=function(e,t){this._values[t]=e;var n=++this._totalResolved;if(n>=this._length){var r;if(this._isMap)r=l(this._values);else{r={};var i=this.length();for(var s=0,o=this.length();s<o;++s)r[this._values[s+i]]=this._values[s]}return this._resolve(r),!0}return!1},c.prototype.shouldCopyValues=function(){return!1},c.prototype.getActualLength=function(e){return e>>1},t.prototype.props=function(){return h(this)},t.props=function(e){return h(e)}}},{"./es5":13,"./util":36}],26:[function(e,t,n){"use strict";function r(e,t,n,r,i){for(var s=0;s<i;++s)n[s+r]=e[s+t],e[s+t]=void 0}function i(e){this._capacity=e,this._length=0,this._front=0}i.prototype._willBeOverCapacity=function(e){return this._capacity<e},i.prototype._pushOne=function(e){var t=this.length();this._checkCapacity(t+1);var n=this._front+t&this._capacity-1;this[n]=e,this._length=t+1},i.prototype._unshiftOne=function(e){var t=this._capacity;this._checkCapacity(this.length()+1);var n=this._front,r=(n-1&t-1^t)-t;this[r]=e,this._front=r,this._length=this.length()+1},i.prototype.unshift=function(e,t,n){this._unshiftOne(n),this._unshiftOne(t),this._unshiftOne(e)},i.prototype.push=function(e,t,n){var r=this.length()+3;if(this._willBeOverCapacity(r)){this._pushOne(e),this._pushOne(t),this._pushOne(n);return}var i=this._front+r-3;this._checkCapacity(r);var s=this._capacity-1;this[i+0&s]=e,this[i+1&s]=t,this[i+2&s]=n,this._length=r},i.prototype.shift=function(){var e=this._front,t=this[e];return this[e]=undefined,this._front=e+1&this._capacity-1,this._length--,t},i.prototype.length=function(){return this._length},i.prototype._checkCapacity=function(e){this._capacity<e&&this._resizeTo(this._capacity<<1)},i.prototype._resizeTo=function(e){var t=this._capacity;this._capacity=e;var n=this._front,i=this._length,s=n+i&t-1;r(this,0,this,t,s)},t.exports=i},{}],27:[function(e,t,n){"use strict";t.exports=function(t,n,r,i){function u(e,u){var a=r(e);if(a instanceof t)return o(a);e=s.asArray(e);if(e===null)return i("expecting an array or an iterable object but got "+s.classString(e));var f=new t(n);u!==undefined&&f._propagateFrom(u,3);var l=f._fulfill,c=f._reject;for(var h=0,p=e.length;h<p;++h){var d=e[h];if(!(d!==undefined||h in e))continue;t.cast(d)._then(l,c,undefined,f,null)}return f}var s=e("./util"),o=function(e){return e.then(function(t){return u(t,e)})};t.race=function(e){return u(e,undefined)},t.prototype.race=function(){return u(this,undefined)}}},{"./util":36}],28:[function(e,t,n){"use strict";t.exports=function(t,n,r,i,s,o){function l(e,n,r,i){this.constructor$(e);var o=u();this._fn=o===null?n:o.bind(n),r!==undefined&&(r=t.resolve(r),r._attachCancellationCallback(this)),this._initialValue=r,this._currentCancellable=null,this._eachValues=i===s?[]:undefined,this._promise._captureStackTrace(),this._init$(undefined,-5)}function c(e,t){this.isFulfilled()?t._resolve(e):t._reject(e)}function h(e,t,n,i){if(typeof t!="function")return r("expecting a function but got "+a.classString(t));var s=new l(e,t,n,i);return s.promise()}function p(e){this.accum=e,this.array._gotAccum(e);var n=i(this.value,this.array._promise);return n instanceof t?(this.array._currentCancellable=n,n._then(d,undefined,undefined,this,undefined)):d.call(this,n)}function d(e){var n=this.array,r=n._promise,i=f(n._fn);r._pushContext();var s;n._eachValues!==undefined?s=i.call(r._boundValue(),e,this.index,this.length):s=i.call(r._boundValue(),this.accum,e,this.index,this.length),s instanceof t&&(n._currentCancellable=s);var u=r._popContext();return o.checkForgottenReturns(s,u,n._eachValues!==undefined?"Promise.each":"Promise.reduce",r),s}var u=t._getDomain,a=e("./util"),f=a.tryCatch;a.inherits(l,n),l.prototype._gotAccum=function(e){this._eachValues!==undefined&&e!==s&&this._eachValues.push(e)},l.prototype._eachComplete=function(e){return this._eachValues.push(e),this._eachValues},l.prototype._init=function(){},l.prototype._resolveEmptyArray=function(){this._resolve(this._eachValues!==undefined?this._eachValues:this._initialValue)},l.prototype.shouldCopyValues=function(){return!1},l.prototype._resolve=function(e){this._promise._resolveCallback(e),this._values=null},l.prototype._resultCancelled=function(e){if(e===this._initialValue)return this._cancel();if(this._isResolved())return;this._resultCancelled$(),this._currentCancellable instanceof t&&this._currentCancellable.cancel(),this._initialValue instanceof t&&this._initialValue.cancel()},l.prototype._iterate=function(e){this._values=e;var n,r,i=e.length;this._initialValue!==undefined?(n=this._initialValue,r=0):(n=t.resolve(e[0]),r=1),this._currentCancellable=n;if(!n.isRejected())for(;r<i;++r){var s={accum:null,value:e[r],index:r,length:i,array:this};n=n._then(p,undefined,undefined,s,undefined)}this._eachValues!==undefined&&(n=n._then(this._eachComplete,undefined,undefined,this,undefined)),n._then(c,c,undefined,n,this)},t.prototype.reduce=function(e,t){return h(this,e,t,null)},t.reduce=function(e,t,n,r){return h(e,t,n,r)}}},{"./util":36}],29:[function(e,t,n){"use strict";var r=e("./util"),i,s=function(){throw new Error("No async scheduler available\n\n    See http://goo.gl/MqrFmX\n")};if(r.isNode&&typeof MutationObserver=="undefined"){var o=global.setImmediate,u=process.nextTick;i=r.isRecentNode?function(e){o.call(global,e)}:function(e){u.call(process,e)}}else typeof MutationObserver!="undefined"&&(typeof window=="undefined"||!window.navigator||!window.navigator.standalone)?i=function(){var e=document.createElement("div"),t={attributes:!0},n=!1,r=document.createElement("div"),i=new MutationObserver(function(){e.classList.toggle("foo"),n=!1});i.observe(r,t);var s=function(){if(n)return;n=!0,r.classList.toggle("foo")};return function(r){var i=new MutationObserver(function(){i.disconnect(),r()});i.observe(e,t),s()}}():typeof setImmediate!="undefined"?i=function(e){setImmediate(e)}:typeof setTimeout!="undefined"?i=function(e){setTimeout(e,0)}:i=s;t.exports=i},{"./util":36}],30:[function(e,t,n){"use strict";t.exports=function(t,n,r){function o(e){this.constructor$(e)}var i=t.PromiseInspection,s=e("./util");s.inherits(o,n),o.prototype._promiseResolved=function(e,t){this._values[e]=t;var n=++this._totalResolved;return n>=this._length?(this._resolve(this._values),!0):!1},o.prototype._promiseFulfilled=function(e,t){var n=new i;return n._bitField=33554432,n._settledValueField=e,this._promiseResolved(t,n)},o.prototype._promiseRejected=function(e,t){var n=new i;return n._bitField=16777216,n._settledValueField=e,this._promiseResolved(t,n)},t.settle=function(e){return r.deprecated(".settle()",".reflect()"),(new o(e)).promise()},t.prototype.settle=function(){return t.settle(this)}}},{"./util":36}],31:[function(e,t,n){"use strict";t.exports=function(t,n,r){function f(e){this.constructor$(e),this._howMany=0,this._unwrap=!1,this._initialized=!1}function l(e,t){if((t|0)!==t||t<0)return r("expecting a positive integer\n\n    See http://goo.gl/MqrFmX\n");var n=new f(e),i=n.promise();return n.setHowMany(t),n.init(),i}var i=e("./util"),s=e("./errors").RangeError,o=e("./errors").AggregateError,u=i.isArray,a={};i.inherits(f,n),f.prototype._init=function(){if(!this._initialized)return;if(this._howMany===0){this._resolve([]);return}this._init$(undefined,-5);var e=u(this._values);!this._isResolved()&&e&&this._howMany>this._canPossiblyFulfill()&&this._reject(this._getRangeError(this.length()))},f.prototype.init=function(){this._initialized=!0,this._init()},f.prototype.setUnwrap=function(){this._unwrap=!0},f.prototype.howMany=function(){return this._howMany},f.prototype.setHowMany=function(e){this._howMany=e},f.prototype._promiseFulfilled=function(e){return this._addFulfilled(e),this._fulfilled()===this.howMany()?(this._values.length=this.howMany(),this.howMany()===1&&this._unwrap?this._resolve(this._values[0]):this._resolve(this._values),!0):!1},f.prototype._promiseRejected=function(e){return this._addRejected(e),this._checkOutcome()},f.prototype._promiseCancelled=function(){return this._values instanceof t||this._values==null?this._cancel():(this._addRejected(a),this._checkOutcome())},f.prototype._checkOutcome=function(){if(this.howMany()>this._canPossiblyFulfill()){var e=new o;for(var t=this.length();t<this._values.length;++t)this._values[t]!==a&&e.push(this._values[t]);return e.length>0?this._reject(e):this._cancel(),!0}return!1},f.prototype._fulfilled=function(){return this._totalResolved},f.prototype._rejected=function(){return this._values.length-this.length()},f.prototype._addRejected=function(e){this._values.push(e)},f.prototype._addFulfilled=function(e){this._values[this._totalResolved++]=e},f.prototype._canPossiblyFulfill=function(){return this.length()-this._rejected()},f.prototype._getRangeError=function(e){var t="Input array must contain at least "+this._howMany+" items but contains only "+e+" items";return new s(t)},f.prototype._resolveEmptyArray=function(){this._reject(this._getRangeError(0))},t.some=function(e,t){return l(e,t)},t.prototype.some=function(e){return l(this,e)},t._SomePromiseArray=f}},{"./errors":12,"./util":36}],32:[function(e,t,n){"use strict";t.exports=function(e){function t(e){e!==undefined?(e=e._target(),this._bitField=e._bitField,this._settledValueField=e._isFateSealed()?e._settledValue():undefined):(this._bitField=0,this._settledValueField=undefined)}t.prototype._settledValue=function(){return this._settledValueField};var n=t.prototype.value=function(){if(!this.isFulfilled())throw new TypeError("cannot get fulfillment value of a non-fulfilled promise\n\n    See http://goo.gl/MqrFmX\n");return this._settledValue()},r=t.prototype.error=t.prototype.reason=function(){if(!this.isRejected())throw new TypeError("cannot get rejection reason of a non-rejected promise\n\n    See http://goo.gl/MqrFmX\n");return this._settledValue()},i=t.prototype.isFulfilled=function(){return(this._bitField&33554432)!==0},s=t.prototype.isRejected=function(){return(this._bitField&16777216)!==0},o=t.prototype.isPending=function(){return(this._bitField&50397184)===0},u=t.prototype.isResolved=function(){return(this._bitField&50331648)!==0};t.prototype.isCancelled=e.prototype._isCancelled=function(){return(this._bitField&65536)===65536},e.prototype.isCancelled=function(){return this._target()._isCancelled()},e.prototype.isPending=function(){return o.call(this._target())},e.prototype.isRejected=function(){return s.call(this._target())},e.prototype.isFulfilled=function(){return i.call(this._target())},e.prototype.isResolved=function(){return u.call(this._target())},e.prototype.value=function(){return n.call(this._target())},e.prototype.reason=function(){var e=this._target();return e._unsetRejectionIsUnhandled(),r.call(e)},e.prototype._value=function(){return this._settledValue()},e.prototype._reason=function(){return this._unsetRejectionIsUnhandled(),this._settledValue()},e.PromiseInspection=t}},{}],33:[function(e,t,n){"use strict";t.exports=function(t,n){function o(e,r){if(s(e)){if(e instanceof t)return e;var o=a(e);if(o===i){r&&r._pushContext();var u=t.reject(o.e);return r&&r._popContext(),u}if(typeof o=="function"){if(l(e)){var u=new t(n);return e._then(u._fulfill,u._reject,undefined,u,null),u}return c(e,o,r)}}return e}function u(e){return e.then}function a(e){try{return u(e)}catch(t){return i.e=t,i}}function l(e){return f.call(e,"_promise0")}function c(e,s,o){function c(e){if(!u)return;u._resolveCallback(e),u=null}function h(e){if(!u)return;u._rejectCallback(e,f,!0),u=null}var u=new t(n),a=u;o&&o._pushContext(),u._captureStackTrace(),o&&o._popContext();var f=!0,l=r.tryCatch(s).call(e,c,h);return f=!1,u&&l===i&&(u._rejectCallback(l.e,!0,!0),u=null),a}var r=e("./util"),i=r.errorObj,s=r.isObject,f={}.hasOwnProperty;return o}},{"./util":36}],34:[function(e,t,n){"use strict";t.exports=function(t,n){function a(e){var t=this;return t instanceof Number&&(t=+t),clearTimeout(t),e}function f(e){var t=this;throw t instanceof Number&&(t=+t),clearTimeout(t),e}var r=e("./util"),i=t.TimeoutError,s=function(e,t,n){if(!e.isPending())return;var s;typeof t!="string"?t instanceof Error?s=t:s=new i("operation timed out"):s=new i(t),r.markAsOriginatingFromRejection(s),e._attachExtraTrace(s),e._reject(s),n.cancel()},o=function(e){return u(+this).thenReturn(e)},u=t.delay=function(e,r){var i;return r!==undefined?i=t.resolve(r)._then(o,null,null,e,undefined):(i=new t(n),setTimeout(function(){i._fulfill()},+e)),i._setAsyncGuaranteed(),i};t.prototype.delay=function(e){return u(e,this)},t.prototype.timeout=function(e,t){e=+e;var n=this.then(),r=n.then(),i=setTimeout(function(){s(r,t,n)},e);return r._then(a,f,undefined,i,undefined)}}},{"./util":36}],35:[function(e,t,n){"use strict";t.exports=function(t,n,r,i,s,o){function h(e){setTimeout(function(){throw e},0)}function p(e){var t=r(e);return t!==e&&typeof e._isDisposable=="function"&&typeof e._getDisposer=="function"&&e._isDisposable()&&t._setDisposable(e._getDisposer()),t}function d(e,n){function a(){if(i>=o)return u._fulfill();var s=p(e[i++]);if(s instanceof t&&s._isDisposable()){try{s=r(s._getDisposer().tryDispose(n),e.promise)}catch(f){return h(f)}if(s instanceof t)return s._then(a,h,null,null,null)}a()}var i=0,o=e.length,u=new t(s);return a(),u}function v(e,t,n){this._data=e,this._promise=t,this._context=n}function m(e,t,n){this.constructor$(e,t,n)}function g(e){return v.isDisposer(e)?(this.resources[this.index]._setDisposable(e),e.promise()):e}function y(e){this.length=e,this.promise=null,this[e-1]=null}var u=e("./util"),a=e("./errors").TypeError,f=e("./util").inherits,l=u.errorObj,c=u.tryCatch;v.prototype.data=function(){return this._data},v.prototype.promise=function(){return this._promise},v.prototype.resource=function(){return this.promise().isFulfilled()?this.promise().value():null},v.prototype.tryDispose=function(e){var t=this.resource(),n=this._context;n!==undefined&&n._pushContext();var r=t!==null?this.doDispose(t,e):null;return n!==undefined&&n._popContext(),this._promise._unsetDisposable(),this._data=null,r},v.isDisposer=function(e){return e!=null&&typeof e.resource=="function"&&typeof e.tryDispose=="function"},f(m,v),m.prototype.doDispose=function(e,t){var n=this.data();return n.call(e,e,t)},y.prototype._resultCancelled=function(){var e=this.length;for(var n=0;n<e;++n){var r=this[n];r instanceof t&&r.cancel()}},t.using=function(){var e=arguments.length;if(e<2)return n("you must pass at least 2 arguments to Promise.using");var i=arguments[e-1];if(typeof i!="function")return n("expecting a function but got "+u.classString(i));var s,a=!0;e===2&&Array.isArray(arguments[0])?(s=arguments[0],e=s.length,a=!1):(s=arguments,e--);var f=new y(e);for(var h=0;h<e;++h){var p=s[h];if(v.isDisposer(p)){var m=p;p=p.promise(),p._setDisposable(m)}else{var b=r(p);b instanceof t&&(p=b._then(g,null,null,{resources:f,index:h},undefined))}f[h]=p}var w=new Array(f.length);for(var h=0;h<w.length;++h)w[h]=t.resolve(f[h]).reflect();var E=t.all(w).then(function(e){for(var t=0;t<e.length;++t){var n=e[t];if(n.isRejected())return l.e=n.error(),l;if(!n.isFulfilled()){E.cancel();return}e[t]=n.value()}S._pushContext(),i=c(i);var r=a?i.apply(undefined,e):i(e),s=S._popContext();return o.checkForgottenReturns(r,s,"Promise.using",S),r}),S=E.lastly(function(){var e=new t.PromiseInspection(E);return d(f,e)});return f.promise=S,S._setOnCancel(f),S},t.prototype._setDisposable=function(e){this._bitField=this._bitField|131072,this._disposer=e},t.prototype._isDisposable=function(){return(this._bitField&131072)>0},t.prototype._getDisposer=function(){return this._disposer},t.prototype._unsetDisposable=function(){this._bitField=this._bitField&-131073,this._disposer=undefined},t.prototype.disposer=function(e){if(typeof e=="function")return new m(e,this,i());throw new a}}},{"./errors":12,"./util":36}],36:[function(_dereq_,module,exports){"use strict";function tryCatcher(){try{var e=tryCatchTarget;return tryCatchTarget=null,e.apply(this,arguments)}catch(t){return errorObj.e=t,errorObj}}function tryCatch(e){return tryCatchTarget=e,tryCatcher}function isPrimitive(e){return e==null||e===!0||e===!1||typeof e=="string"||typeof e=="number"}function isObject(e){return typeof e=="function"||typeof e=="object"&&e!==null}function maybeWrapAsError(e){return isPrimitive(e)?new Error(safeToString(e)):e}function withAppended(e,t){var n=e.length,r=new Array(n+1),i;for(i=0;i<n;++i)r[i]=e[i];return r[i]=t,r}function getDataPropertyOrDefault(e,t,n){if(!es5.isES5)return{}.hasOwnProperty.call(e,t)?e[t]:undefined;var r=Object.getOwnPropertyDescriptor(e,t);if(r!=null)return r.get==null&&r.set==null?r.value:n}function notEnumerableProp(e,t,n){if(isPrimitive(e))return e;var r={value:n,configurable:!0,enumerable:!1,writable:!0};return es5.defineProperty(e,t,r),e}function thrower(e){throw e}function isClass(e){try{if(typeof e=="function"){var t=es5.names(e.prototype),n=es5.isES5&&t.length>1,r=t.length>0&&(t.length!==1||t[0]!=="constructor"),i=thisAssignmentPattern.test(e+"")&&es5.names(e).length>0;if(n||r||i)return!0}return!1}catch(s){return!1}}function toFastProperties(obj){function FakeConstructor(){}FakeConstructor.prototype=obj;var l=8;while(l--)new FakeConstructor;return obj}function isIdentifier(e){return rident.test(e)}function filledRange(e,t,n){var r=new Array(e);for(var i=0;i<e;++i)r[i]=t+i+n;return r}function safeToString(e){try{return e+""}catch(t){return"[no string representation]"}}function markAsOriginatingFromRejection(e){try{notEnumerableProp(e,"isOperational",!0)}catch(t){}}function originatesFromRejection(e){return e==null?!1:e instanceof Error.__BluebirdErrorTypes__.OperationalError||e.isOperational===!0}function canAttachTrace(e){return e instanceof Error&&es5.propertyIsWritable(e,"stack")}function classString(e){return{}.toString.call(e)}function copyDescriptors(e,t,n){var r=es5.names(e);for(var i=0;i<r.length;++i){var s=r[i];if(n(s))try{es5.defineProperty(t,s,es5.getDescriptor(e,s))}catch(o){}}}function env(e,t){return isNode?process.env[e]:t}var es5=_dereq_("./es5"),canEvaluate=typeof navigator=="undefined",errorObj={e:{}},tryCatchTarget,inherits=function(e,t){function r(){this.constructor=e,this.constructor$=t;for(var r in t.prototype)n.call(t.prototype,r)&&r.charAt(r.length-1)!=="$"&&(this[r+"$"]=t.prototype[r])}var n={}.hasOwnProperty;return r.prototype=t.prototype,e.prototype=new r,e.prototype},inheritedDataKeys=function(){var e=[Array.prototype,Object.prototype,Function.prototype],t=function(t){for(var n=0;n<e.length;++n)if(e[n]===t)return!0;return!1};if(es5.isES5){var n=Object.getOwnPropertyNames;return function(e){var r=[],i=Object.create(null);while(e!=null&&!t(e)){var s;try{s=n(e)}catch(o){return r}for(var u=0;u<s.length;++u){var a=s[u];if(i[a])continue;i[a]=!0;var f=Object.getOwnPropertyDescriptor(e,a);f!=null&&f.get==null&&f.set==null&&r.push(a)}e=es5.getPrototypeOf(e)}return r}}var r={}.hasOwnProperty;return function(n){if(t(n))return[];var i=[];e:for(var s in n)if(r.call(n,s))i.push(s);else{for(var o=0;o<e.length;++o)if(r.call(e[o],s))continue e;i.push(s)}return i}}(),thisAssignmentPattern=/this\s*\.\s*\S+\s*=/,rident=/^[a-z$_][a-z$_0-9]*$/i,ensureErrorObject=function(){return"stack"in new Error?function(e){return canAttachTrace(e)?e:new Error(safeToString(e))}:function(e){if(canAttachTrace(e))return e;try{throw new Error(safeToString(e))}catch(t){return t}}}(),asArray=function(e){return es5.isArray(e)?e:null};if(typeof Symbol!="undefined"&&Symbol.iterator){var ArrayFrom=typeof Array.from=="function"?function(e){return Array.from(e)}:function(e){var t=[],n=e[Symbol.iterator](),r;while(!(r=n.next()).done)t.push(r.value);return t};asArray=function(e){return es5.isArray(e)?e:e!=null&&typeof e[Symbol.iterator]=="function"?ArrayFrom(e):null}}var isNode=typeof process!="undefined"&&classString(process).toLowerCase()==="[object process]",ret={isClass:isClass,isIdentifier:isIdentifier,inheritedDataKeys:inheritedDataKeys,getDataPropertyOrDefault:getDataPropertyOrDefault,thrower:thrower,isArray:es5.isArray,asArray:asArray,notEnumerableProp:notEnumerableProp,isPrimitive:isPrimitive,isObject:isObject,canEvaluate:canEvaluate,errorObj:errorObj,tryCatch:tryCatch,inherits:inherits,withAppended:withAppended,maybeWrapAsError:maybeWrapAsError,toFastProperties:toFastProperties,filledRange:filledRange,toString:safeToString,canAttachTrace:canAttachTrace,ensureErrorObject:ensureErrorObject,originatesFromRejection:originatesFromRejection,markAsOriginatingFromRejection:markAsOriginatingFromRejection,classString:classString,copyDescriptors:copyDescriptors,hasDevTools:typeof chrome!="undefined"&&chrome&&typeof chrome.loadTimes=="function",isNode:isNode,env:env};ret.isRecentNode=ret.isNode&&function(){var e=process.versions.node.split(".").map(Number);return e[0]===0&&e[1]>10||e[0]>0}(),ret.isNode&&ret.toFastProperties(process);try{throw new Error}catch(e){ret.lastLineError=e}module.exports=ret},{"./es5":13}]},{},[4])(4)}),typeof window!="undefined"&&window!==null?window.P=window.Promise:typeof self!="undefined"&&self!==null&&(self.P=self.Promise),define("back4app-entity/adapters/Adapter",["require","exports","module","chai","bluebird"],function(e,t,n){"use strict";function s(){r(this).to.be.an("object","The Adapter's constructor can be only invoked from specializedclasses' constructors"),r(this.constructor).to.be.a("function","The Adapter's constructor can be only invoked from specializedclasses' constructors"),r(this.constructor).to.not.equal(s,"The Adapter is an abstract class and cannot be directly initialized"),r(this).to.be.instanceof(s,"The Adapter's constructor can be only invoked from specializedclasses' constructors")}function o(){throw new Error('Function "loadEntity" has to be implemented in the Adapter specialization')}function u(){throw new Error('Function "loadAttribute" has to be implemented in the Adapter specialization')}function a(){return new i(function(){throw new Error('Function "insertObject" has to be implemented in the Adapter specialization')})}function f(){return new i(function(){throw new Error('Function "updateObject" has to be implemented in the Adapter specialization')})}var r=e("chai").expect,i=e("bluebird");n.exports=s,s.prototype.loadEntity=o,s.prototype.loadEntityAttribute=u,s.prototype.insertObject=a,s.prototype.updateObject=f}),define("back4app-entity/models/errors",["require","exports","module","util","chai"],function(e,t,n){function s(e,t){this.entity=e,this.innerError=t,i(arguments).to.have.length.below(3,"Invalid arguments length when creating a new EntityNotFoundError (it has to be passed less than 3 arguments)"),this.name="EntityNotFoundError",this.message="Cannot find Entity",e&&(i(e).to.be.a("string",'Invalid argument "entity" when creating a new EntityNotFoundError (it has to be a string)'),this.message+=' "'+e+'"'),this.stack=(new Error(this.message)).stack,t&&(i(t).to.be.an.instanceof(Error,'Invalid argument "innerError" when creating a new EntityNotFoundError (it has to be an Error)'),this.stack+="\n\n"+t.stack)}function o(e,t){this.type=e,this.innerError=t,i(arguments).to.have.length.below(3,"Invalid arguments length when creating a new AttributeTypeNotFoundError (it has to be passed less than 3 arguments)"),this.name="AttributeTypeNotFoundError",this.message="Cannot find Attribute type",e&&(i(e).to.be.a("string",'Invalid argument "type" when creating a new AttributeTypeNotFoundError (it has to be a string)'),this.message+=' "'+e+'"'),this.stack=(new Error(this.message)).stack,t&&(i(t).to.be.an.instanceof(Error,'Invalid argument "innerError" when creating a new AttributeTypeNotFoundError (it has to be an Error)'),this.stack+="\n\n"+t.stack)}function u(e,t,n){this.entity=e,this.attribute=t,this.innerError=n,i(arguments).to.have.length.below(4,"Invalid arguments length when creating a new NotFetchedError (it has to be passed less than 4 arguments)"),this.name="NotFetchedError",this.message="Error when getting an attribute",t&&(i(t).to.be.a("string",'Invalid argument "attribute" when creating a new ValidationError (it has to be a string)'),this.message+=' called "'+t+'"'),this.message+=" of an entity",e&&(i(e).to.be.a("string",'Invalid argument "entity" when creating a new ValidationError (it has to be a string)'),this.message+=' called "'+e+'"'),this.message+=": this attribute was not fetched yet",this.stack=(new Error(this.message)).stack,n&&(i(n).to.be.an.instanceof(Error,'Invalid argument "innerError" when creating a new ValidationError (it has to be an Error)'),this.stack+="\n\n"+n.stack)}function a(e,t,n,r,s){this.validationMessage=e,this.entity=t,this.attribute=n,this.position=r,this.innerError=s,i(arguments).to.have.length.below(6,"Invalid arguments length when creating a new AttributeTypeNotFoundError (it has to be passed less than 6 arguments)"),this.name="ValidationError",this.message="Error when validating an attribute",n&&(i(n).to.be.a("string",'Invalid argument "attribute" when creating a new ValidationError (it has to be a string)'),this.message+=' called "'+n+'"'),this.message+=" of an entity",t&&(i(t).to.be.a("string",'Invalid argument "entity" when creating a new ValidationError (it has to be a string)'),this.message+=' called "'+t+'"'),r&&(i(["string","number"]).to.include(typeof r,'Invalid argument "position" when creating a new ValidationError (it has to be a string or a number)'),this.message+=" in position "+r),e&&(i(e).to.be.a("string",'Invalid argument "validationMessage" when creating a new ValidationError (it has to be a string)'),this.message+=": "+e),this.stack=(new Error(this.message)).stack,s&&(i(s).to.be.an.instanceof(Error,'Invalid argument "innerError" when creating a new ValidationError (it has to be an Error)'),this.stack+="\n\n"+s.stack)}function f(e,t){this.adapterName=e,this.innerError=t,i(arguments).to.have.length.below(3,"Invalid arguments length when creating a new EntityNotFoundError (it has to be passed less than 3 arguments)"),this.name="AdapterNotFoundError",this.message="Cannot find Adapter",e&&(i(e).to.be.a("string",'Invalid argument "adapterName" when creating a new AdapterNotFoundError (it has to be a string)'),this.message+=' "'+e+'"'),this.stack=(new Error(this.message)).stack,t&&(i(t).to.be.an.instanceof(Error,'Invalid argument "innerError" when creating a new AdapterNotFoundError (it has to be an Error)'),this.stack+="\n\n"+t.stack)}var r=e("util"),i=e("chai").expect;n.exports={},n.exports.EntityNotFoundError=s,n.exports.AttributeTypeNotFoundError=o,n.exports.ValidationError=a,n.exports.AdapterNotFoundError=f,n.exports.NotFetchedError=u,r.inherits(s,Error),r.inherits(o,Error),r.inherits(u,Error),r.inherits(a,Error),r.inherits(f,Error)}),define("back4app-entity/models/attributes/Attribute",["require","exports","module","chai","../../utils/objects","../errors","../index","./index"],function(e,t,n){function f(){this.name=null,this.type=null,this.multiplicity=null,this.default=null,this.dataName=null,r(this).to.be.an("object","The Attribute's constructor can be only invoked from specializedclasses' constructors"),r(this.constructor).to.be.a("function","The Attribute's constructor can be only invoked from specializedclasses' constructors"),r(this.constructor).to.not.equal(f,"The Attribute is an abstract class and cannot be directly initialized"),r(this).to.be.instanceof(f,"The Attribute's constructor can be only invoked from specializedclasses' constructors");var e=null,t=this.constructor,n="1",i=null,s=null,o=null,u=["save","validate","isValid","delete","adapter","Entity","General","adapterName","isNew","isDirty","clean"];r(arguments).to.have.length.within(1,4,"Invalid arguments length when creating an Attribute (it has to be passed from 1 to 4 arguments)");if(arguments.length===1&&typeof arguments[0]!="string"){var a=arguments[0];r(a).to.be.an("object","Invalid argument type when creating an Attribute (it has to be an object or a string)"),r(a).to.have.ownProperty("name",'Property "name" is required when creating an Attribute'),r(a.name).to.be.a("string",'Invalid property "name" when creating an Attribute (it has to be a string)'),r(u).to.not.include(a.name,'Invalid attribute "name" (it must not be equal to any of the reserved names)'),e=a.name;for(var l in a)r(["name","multiplicity","default","dataName"]).to.include(l,'Invalid property "'+l+'" when creating an Attribute '+'called "'+e+'" (valid properties are "name", "type", '+'"multiplicity", "default" and "dataName")');a.hasOwnProperty("multiplicity")&&(r(a.multiplicity).to.be.a("string",'Invalid property "multiplicity" when creating an Attribute called "'+e+'" (it has to be a string)'),r(["1","0..1","1..*","*"]).to.contain(a.multiplicity,'Invalid property "multiplicity" when creating an Attribute called "'+e+'" (valid values are "1", "0..1", "1..*", "*")'),n=a.multiplicity),a.hasOwnProperty("default")&&(i=a.default);if(a.dataName)if(typeof a.dataName=="string")s=a.dataName;else{r(a.dataName).to.be.an("object",'Invalid property "dataName" when creating an Attribute called "'+e+'" (it has to be a string or an object)'),s={};for(o in a.dataName)r(a.dataName[o]).to.be.a("string",'Invalid property "dataName" for adapter "'+o+'" when '+'creating an Attribute called "'+e+'" (it has to be a '+"string)"),s[o]=a.dataName[o];Object.preventExtensions(s),Object.seal(s),Object.freeze(s)}}else{r(arguments[0]).to.be.a("string",'Invalid argument "name" when creating an Attribute (it has to be a string)'),r(u).to.not.include(arguments[0],'Invalid attribute "name" (it must not be equal to any of the reserved names)'),e=arguments[0],arguments.length>1&&(r(arguments[1]).to.be.a("string",'Invalid argument "multiplicity" when creating an Attribute called "'+e+'" (it has to be a string)'),r(["1","0..1","1..*","*"]).to.contain(arguments[1],'Invalid argument "multiplicity" when creating an Attribtue called "'+e+'" (valid values are "1", "0..1", "1..*", "*")'),n=arguments[1]),arguments.length>2&&(i=arguments[2]);if(arguments.length>3&&arguments[3])if(typeof arguments[3]=="string")s=arguments[3];else{r(arguments[3]).to.be.an("object",'Invalid argument "dataName" when creating an Attribute called "'+e+'" (it has to be a string or an object)'),s={};for(o in arguments[3])r(arguments[3][o]).to.be.a("string",'Invalid argument "dataName" for adapter "'+o+'" when '+'creating an Attribute called "'+e+'" (it has to be a '+"string)"),s[o]=arguments[3][o];Object.preventExtensions(s),Object.seal(s),Object.freeze(s)}}Object.defineProperty(this,"name",{value:e,enumerable:!0,writable:!1,configurable:!1}),Object.defineProperty(this,"type",{value:t,enumerable:!0,writable:!1,configurable:!1}),Object.defineProperty(this,"multiplicity",{value:n,enumerable:!0,writable:!1,configurable:!1}),Object.defineProperty(this,"default",{value:i,enumerable:!0,writable:!1,configurable:!1}),Object.defineProperty(this,"dataName",{value:s,enumerable:!0,writable:!1,configurable:!1}),Object.preventExtensions(this),Object.seal(this)}function l(){r(arguments).to.have.length.within(1,4,"Invalid arguments length when resolving an Attribute (it has to be passed from 1 to 4 arguments)");var e=Array.prototype.slice.call(arguments),t=a.types.ObjectAttribute;if(arguments.length===1&&typeof arguments[0]!="string"){var n=i.copy(arguments[0]);e[0]=n,r(n).to.be.an("object","Invalid argument type when resolving an Attribute (it has to be an object)");if(n.type){r(n.type).to.be.a("string",'Invalid argument "type" when resolving an Attribute'+(n.name?" called"+n.name:"")+" (it has to be a string)");try{t=a.types.get(n.type)}catch(o){if(!(o instanceof s.AttributeTypeNotFoundError))throw o;t=a.types.AssociationAttribute,n.entity=n.type}delete n.type}}else if(arguments.length>1){r(arguments[1]).to.be.a("string",'Invalid argument "type" when resolving an Attribute'+(arguments[0]?" called"+arguments[0]:"")+" (it has to be a string)");try{t=a.types.get(arguments[1])}catch(o){if(!(o instanceof s.AttributeTypeNotFoundError))throw o;t=a.types.AssociationAttribute,e.splice(2,0,arguments[1])}e.splice(1,1)}return new(Function.prototype.bind.apply(t,[null].concat(e)))}function c(e){return r(arguments).to.have.length(1,"Invalid arguments length when getting the default value of an Attribute to an Entity instance (it has to be given 1 argument)"),r(e).to.be.an.instanceOf(u.Entity,'Invalid type of argument "entity" when getting the default value of an Attribute to an Entity instance (it has to be an Entity)'),typeof this.default=="function"?this.default.call(e):this.default}function h(e){r(arguments).to.have.length(1,"Invalid argument length when validating an attribute of an entity (it has to be passed 1 argument)"),r(e).to.be.instanceof(u.Entity,'Invalid argument "entity" when validating an attribute of an entity (it has to be an Entity)');var t=null;e.hasOwnProperty(this.name)&&(t=e[this.name]);if((this.multiplicity==="1"||this.multiplicity==="1..*")&&t===null)throw new o("this attribute is required",e.Entity.specification.name,this.name);if(this.multiplicity==="0..1"&&t!==null||this.multiplicity==="1")try{this.validateValue(t)}catch(n){throw n instanceof o?new o(n.validationMessage,e.Entity.specification.name,this.name):n}else if(this.multiplicity==="*"&&t!==null||this.multiplicity==="1..*"){if(!(t instanceof Array))throw new o("this attribute's value should be an Array",e.Entity.specification.name,this.name);var i=!1;for(var s=0;s<t.length;s++)if(t[s]!==null){try{this.validateValue(t[s])}catch(n){throw n instanceof o?new o(n.validationMessage,e.Entity.specification.name,this.name,s):n}i=!0}if(this.multiplicity==="1..*"&&!i)throw new o("this attribute's value should be a non empty Array",e.Entity.specification.name,this.name)}}function p(){throw new Error('Function "validateValue" has to be implemented in the Attribute specialization')}function d(e){r(arguments).to.have.length.below(2,"Invalid arguments length when getting the data name of an Attribute (it has to be passed less than 2 arguments)");if(e){r(e).to.be.a("string",'Invalid argument "adapterName" when getting the data name of an Attribute (it has to be a string)');if(this.dataName&&typeof this.dataName=="object"&&this.dataName.hasOwnProperty(e))return this.dataName[e]}return this.dataName&&typeof this.dataName=="string"?this.dataName:this.name}function v(e){return r(arguments).to.have.length(1,"Invalid arguments length when getting the data value of an Attribute (it has to be passed 1 argument)"),e}function m(e){return r(arguments).to.have.length(1,"Invalid arguments length when parsing the data value of an Attribute (it has to be passed 1 argument)"),e}var r=e("chai").expect,i=e("../../utils/objects"),s=e("../errors"),o=s.ValidationError,u=e("../index"),a=e("./index");n.exports=f,f.resolve=l,f.prototype.getDefaultValue=c,f.prototype.validate=h,f.prototype.validateValue=p,f.prototype.getDataName=d,f.prototype.getDataValue=v,f.prototype.parseDataValue=m}),define("back4app-entity/models/attributes/AttributeDictionary",["require","exports","module","chai","./Attribute"],function(e,t,n){function s(e){r(arguments).to.have.length.below(2,"Invalid arguments length when creating an AttributeDictionary (it has to be passed less than 2 arguments)");if(e){r(typeof e).to.equal("object","Invalid argument type when creating an AttributeDictionary (it has to be an object)");if(e instanceof Array)for(var t=0;t<e.length;t++)o(this,e[t]);else for(var n in e)o(this,e[n],n)}Object.preventExtensions(this),Object.seal(this)}function o(){var e=arguments[0],t=null,n=null;arguments.length===2?t=arguments[1]:(t=arguments[1],n=arguments[2]),r(t).to.be.an("object","Invalid argument type when adding an attribute "+(n?'called "'+n+'" ':"")+"in an AttributeDictionary (it has to be an object)"),n&&(t.name?r(t.name).to.equal(n,'Invalid argument "name" when adding an attribute called "'+t.name+'" in an AttributeDictionary (the name given in '+"argument and the name given in the attribute object should be equal)"):t.name=n),t instanceof i||(t=i.resolve(t)),r(t.constructor).to.not.equal(i,'Invalid attribute "'+t.name+'". Attribute is an abstract '+"class and cannot be directly instantiated and added in an "+"AttributeDictionary"),r(e).to.not.have.ownProperty(t.name,'Duplicated attribute name "'+t.name+'"'),Object.defineProperty(e,t.name,{value:t,enumerable:!0,writable:!1,configurable:!1})}function u(e,t){r(arguments).to.have.length(2,"Invalid arguments length when concatenating an AttributeDictionary (it has to be passed 2 arguments)"),r(e).to.be.instanceof(s,'Invalid argument "attributeDictionary" when concatenating an AttributeDictionary (it has to be an AttributeDictionary)'),r(t).to.be.instanceof(i,'Invalid argument "attribute" when concatenating an AttributeDictionary (it has to be an Attribute)');var n=[];for(var o in e)n.push(e[o]);return n.push(t),new s(n)}var r=e("chai").expect,i=e("./Attribute");n.exports=s,s.concat=u}),define("back4app-entity/models/attributes/types/AssociationAttribute",["require","exports","module","chai","../../../utils/classes","../../../utils/objects","../../index","../../errors","../Attribute"],function(e,t,n){function f(){this.Entity=null;var e=null;Object.defineProperty(this,"Entity",{get:function(){return typeof e=="string"&&(e=o.Entity.getSpecialization(e)),e},set:function(){throw new Error("Entity property of an AssociationAttribute instance cannot be changed")},enumerable:!0,configurable:!1});var t=Array.prototype.slice.call(arguments);r(t).to.have.length.within(1,5,"Invalid arguments length when creating an AssociationAttribute (it has to be passed from 1 to 5 arguments)");if(t.length===1){var n=t[0];r(n).to.be.an("object","Invalid argument type when creating an Attribute (it has to be an object)"),n=s.copy(n),e=n.entity,e?delete n.entity:(r(n).to.have.ownProperty("Entity",'Property "entity" or "Entity" is required when creating an AssociationAttribute'),e=n.Entity,delete n.Entity),t[0]=n}else e=t.splice(1,1)[0];typeof e!="string"&&(r(e).to.be.a("function",'Invalid argument "entity" when creating an AssociationAttribute (it has to be a Class)'),r(i.isGeneral(o.Entity,e)).to.equal(!0,'Invalid argument "entity" when creating an AssociationAttribute (it has to be a subclass of Entity)')),a.apply(this,t)}function l(e){if(!(e instanceof this.Entity))throw new u("this attribute's value should be a \""+this.Entity.specification.name+'"');e.validate()}function c(e){r(arguments).to.have.length(1,"Invalid arguments length when getting the data value of an Attribute (it has to be passed 1 argument)");var t=e;if(e instanceof o.Entity)t={Entity:e.Entity.specification.name,id:e.id};else if(e instanceof Array){t=[];for(var n=0;n<e.length;n++)e[n]instanceof o.Entity?t.push({Entity:e[n].Entity.specification.name,id:e[n].id}):t.push(e[n])}return t}function h(e){function i(e){if(typeof e!="object"||e===null)return e;try{var t=s.copy(e),n=o.Entity.new(t.Entity);return delete t.Entity,n(t)}catch(r){return e}}r(arguments).to.have.length(1,"Invalid arguments length when parsing the data value of an Attribute (it has to be passed 1 argument)");var t=e;if(e instanceof Array){t=[];for(var n=0;n<e.length;n++)t.push(i(e[n]))}else t=i(e);return t}var r=e("chai").expect,i=e("../../../utils/classes"),s=e("../../../utils/objects"),o=e("../../index"),u=e("../../errors").ValidationError,a=e("../Attribute");n.exports=f,i.generalize(a,f),f.typeName="Association",f.prototype.validateValue=l,f.prototype.getDataValue=c,f.prototype.parseDataValue=h}),define("back4app-entity/models/attributes/types/BooleanAttribute",["require","exports","module","../../../utils/classes","../../errors","../Attribute"],function(e,t,n){function o(){s.apply(this,Array.prototype.slice.call(arguments))}function u(e){if(typeof e!="boolean")throw new i("this attribute's value should be a boolean")}var r=e("../../../utils/classes"),i=e("../../errors").ValidationError,s=e("../Attribute");n.exports=o,r.generalize(s,o),o.typeName="Boolean",o.prototype.validateValue=u}),define("back4app-entity/models/attributes/types/DateAttribute",["require","exports","module","chai","../../../utils/classes","../../errors","../Attribute"],function(e,t,n){function u(){o.apply(this,Array.prototype.slice.call(arguments))}function a(e){if(!(e instanceof Date)||isNaN(e.getTime()))throw new s("this attribute's value should be a Date")}function f(e){function i(e){if(typeof e!="string"||e===null)return e;try{var t=new Date(e);return isNaN(t.getTime())?e:t}catch(n){return e}}r(arguments).to.have.length(1,"Invalid arguments length when parsing the data value of an Attribute (it has to be passed 1 argument)");var t=e;if(e instanceof Array){t=[];for(var n=0;n<e.length;n++)t.push(i(e[n]))}else t=i(e);return t}var r=e("chai").expect,i=e("../../../utils/classes"),s=e("../../errors").ValidationError,o=e("../Attribute");n.exports=u,i.generalize(o,u),u.typeName="Date",u.prototype.validateValue=a,u.prototype.parseDataValue=f}),define("back4app-entity/models/attributes/types/NumberAttribute",["require","exports","module","../../../utils/classes","../../errors","../Attribute"],function(e,t,n){function o(){s.apply(this,Array.prototype.slice.call(arguments))}function u(e){if(typeof e!="number"&&!(e instanceof Number))throw new i("this attribute's value should be a number")}var r=e("../../../utils/classes"),i=e("../../errors").ValidationError,s=e("../Attribute");n.exports=o,r.generalize(s,o),o.typeName="Number",o.prototype.validateValue=u}),define("back4app-entity/models/attributes/types/ObjectAttribute",["require","exports","module","../../../utils/classes","../../errors","../Attribute"],function(e,t,n){function o(){s.apply(this,Array.prototype.slice.call(arguments))}function u(e){if(e===null||typeof e!="object")throw new i("this attribute's value should be an object")}var r=e("../../../utils/classes"),i=e("../../errors").ValidationError,s=e("../Attribute");n.exports=o,r.generalize(s,o),o.typeName="Object",o.prototype.validateValue=u}),define("back4app-entity/models/attributes/types/StringAttribute",["require","exports","module","../../../utils/classes","../../errors","../Attribute"],function(e,t,n){function o(){s.apply(this,Array.prototype.slice.call(arguments))}function u(e){if(typeof e!="string"&&!(e instanceof String))throw new i("this attribute's value should be a string")}var r=e("../../../utils/classes"),i=e("../../errors").ValidationError,s=e("../Attribute");n.exports=o,r.generalize(s,o),o.typeName="String",o.prototype.validateValue=u}),define("back4app-entity/models/attributes/types/index",["require","exports","module","chai","../../errors","./AssociationAttribute","./BooleanAttribute","./DateAttribute","./NumberAttribute","./ObjectAttribute","./StringAttribute","../index"],function(e,t,n){function c(e){r(arguments).to.have.length(1,"Invalid arguments length when getting an Attribute type (it has to be passed 1 argument)"),r(e).to.be.a("string",'Invalid argument "type" when getting an Attribute type (it has to be a string');if(n.exports.hasOwnProperty(e))return n.exports[e];if(n.exports.hasOwnProperty(e+"Attribute"))return n.exports[e+"Attribute"];throw new i(e)}var r=e("chai").expect,i=e("../../errors").AttributeTypeNotFoundError,s=e("./AssociationAttribute"),o=e("./BooleanAttribute"),u=e("./DateAttribute"),a=e("./NumberAttribute"),f=e("./ObjectAttribute"),l=e("./StringAttribute");n.exports={},n.exports.AssociationAttribute=s,n.exports.BooleanAttribute=o,n.exports.DateAttribute=u,n.exports.NumberAttribute=a,n.exports.ObjectAttribute=f,n.exports.StringAttribute=l,n.exports.get=null,e("../index").types=n.exports,Object.defineProperty(n.exports,"get",{value:c,enumerable:!1,writable:!1,configurable:!0})}),define("back4app-entity/models/attributes/types",["back4app-entity/models/attributes/types/index"],function(e){return e}),define("back4app-entity/models/attributes/index",["require","exports","module","./Attribute","./AttributeDictionary","./types"],function(e,t,n){var r=e("./Attribute"),i=e("./AttributeDictionary"),s=e("./types");n.exports={},n.exports.Attribute=r,n.exports.AttributeDictionary=i,n.exports.types=s}),define("back4app-entity/models/attributes",["back4app-entity/models/attributes/index"],function(e){return e}),define("back4app-entity/models/methods",["require","exports","module","chai"],function(e,t,n){function i(e){r(arguments).to.have.length.below(2,"Invalid arguments length when creating a new MethodDictionary (it has to be passed less than 2 arguments)");if(e){r(e).to.be.an("object","Invalid argument type when creating a new MethodDictionary (it has to be an object)");for(var t in e)s(this,e[t],t)}Object.preventExtensions(this),Object.seal(this)}function s(e,t,n){r(t).to.be.a("function",'Invalid argument "func" when adding a method called "'+n+'" in a '+"MethodDictionary (it has to be a function)"),Object.defineProperty(e,n,{value:t,enumerable:!0,writable:!1,configurable:!1})}function o(e,t,n){r(arguments).to.have.length(3,"Invalid arguments length when concatenating a MethodDictionary (it has to be passed 3 arguments)"),r(e).to.be.instanceof(i,'Invalid argument "methodDictionary" when concatenating a MethodDictionary (it has to be a MethodDictionary)'),r(t).to.be.a("function",'Invalid argument "func" when concatenating a MethodDictionary (it has to be a function)'),r(n).to.be.a("string",'Invalid argument "name" when concatenating a MethodDictionary (it has to be a string)'),r(e).to.not.have.ownProperty(n,'Duplicated method name "'+n+'"');var s={};for(var o in e)s[o]=e[o];return s[n]=t,new i(s)}var r=e("chai").expect;n.exports={},n.exports.MethodDictionary=i,i.concat=o}),define("back4app-entity/models/EntitySpecification",["require","exports","module","chai","../utils/classes","./index","./attributes","./methods"],function(e,t,n){function a(){function y(){if(e&&e!==s.Entity){if(l){e.adapter.loadEntity(e);for(var t in n)b(n[t])}for(var r in a)w(a[r],r)}}function b(t){r(a).to.not.have.ownProperty(t.name,'failed to load entity attribute "'+t.name+'" because '+"there is a method with same name in the current Entity and it cannot "+"be overloaded"),e.General&&(r(e.General.attributes).to.not.have.ownProperty(t.name,'failed to load entity attribute "'+t.name+'" because '+"there is an attribute with same name in a parent of current Entity "+"and it cannot be overriden"),r(e.General.methods).to.not.respondTo(t.name,'failed to load entity attribute "'+t.name+'" because '+"there is a method with same name in a parent of current Entity "+"and it cannot be overriden"));var n=e.specializations;for(var i in n)r(n[i].specification.attributes).to.not.have.ownProperty(t.name,'failed to load entity attribute "'+t.name+'" because '+"there is an attribute with same name in a child of current Entity"),r(n[i].specification.methods).to.not.have.ownProperty(t.name,'failed to load entity attribute "'+t.name+'" because '+"there is a method with same name in a child of current Entity");e.adapter.loadEntityAttribute(e,t)}function w(t,i){r(n).to.not.have.ownProperty(i,'failed to load entity method "'+i+'" because there is an '+"attribute with same name in the current Entity and it cannot be "+"overloaded"),e.General&&r(e.General.attributes).to.not.have.ownProperty(i,'failed to load entity method "'+i+'" because there is an '+"attribute with same name in a parent of current Entity and it "+"cannot be overriden");var s=e.specializations;for(var o in s)r(s[o].specification.attributes).to.not.have.ownProperty(i,'failed to load entity method "'+i+'" because there is an '+"attribute with same name in a child of current Entity");e.prototype[i]=t}function E(){var t=arguments.length===1&&arguments[0]instanceof o.Attribute?arguments[0]:o.Attribute.resolve.apply(null,Array.prototype.slice.call(arguments)),r=o.AttributeDictionary.concat(n,t);e&&b(t),n=r}function S(t,n){var r=u.MethodDictionary.concat(a,t,n);e&&w(t,n),a=r}this.Entity=null,this.name=null,this.attributes=null,this.methods=null,this.isAbstract=null,this.dataName=null,this.addAttribute=E,this.addMethod=S;var e=null;Object.defineProperty(this,"Entity",{get:function(){return e},set:function(t){if(!!e)throw new Error('Once that the property "Entity" of an EntitySpecification instance is assigned, it can not be assigned anymore');r(i.isGeneral(s.Entity,t)).to.equal(!0,'The property "Entity" of an EntitySpecification instance has to be an Entity class'),t.specification&&r(t.specification).to.equal(this,'The property "Specification" of the Entity class should be equal to the current SpecificationEntity instance.'),e=t,y()},enumerable:!0,configurable:!1});var t=null,n=new o.AttributeDictionary;Object.defineProperty(this,"attributes",{get:function(){return n},set:function(){throw new Error("Attributes of an EntitySpecification instance cannot be changed")},enumerable:!0,configurable:!1});var a=new u.MethodDictionary;Object.defineProperty(this,"methods",{get:function(){return a},set:function(){throw new Error("Methods of an EntitySpecification instance cannot be changed")},enumerable:!0,configurable:!1});var f=!1,l=!0,c,h=null;r(arguments).to.have.length.within(1,4,"Invalid arguments length when creating a new EntitySpecification (it has to be passed from 1 to 4 arguments)");if(arguments.length===1&&typeof arguments[0]!="string"){var p=arguments[0];r(p).to.be.an("object","Invalid argument type when creating a new EntitySpecification (it has to be an object or a string)");for(var d in p)r(["name","attributes","methods","isAbstract","dataName","nameValidation"]).to.include(d,'Invalid property "'+d+'" when creating a new '+'EntitySpecification (valid properties are "name", "attributes", '+'"methods", "isAbstract", "dataName" and "nameValidation")');r(p).to.have.ownProperty("name",'Property "name" is required when creating a new EntitySpecification'),r(p.name).to.be.a("string",'Invalid property "name" when creating a new EntitySpecification (it has to be a string)'),t=p.name,p.attributes&&(r(typeof p.attributes).to.equal("object",'Invalid property "attributes" when creating a new EntitySpecification (it has to be an object)'),p.attributes instanceof o.AttributeDictionary?n=p.attributes:n=new o.AttributeDictionary(p.attributes)),p.methods&&(r(p.methods).to.be.an("object",'Invalid property "methods" when creating a new EntitySpecification (it has to be an object)'),p.methods instanceof u.MethodDictionary?a=p.methods:a=new u.MethodDictionary(p.methods)),p.isAbstract&&(r(p.isAbstract).to.be.a("boolean",'Invalid property "isAbstract" when creating a new EntitySpecification (it has to be a boolean)'),f=p.isAbstract);if(p.dataName)if(typeof p.dataName=="string")c=p.dataName;else{r(p.dataName).to.be.an("object",'Invalid property "dataName" when creating a new EntitySpecification (it has to be a string or an object)'),c={};for(h in p.dataName)r(p.dataName[h]).to.be.a("string",'Invalid property "dataName" for adapter "'+h+'" when '+"creating a new EntitySpecification (it has to be a string)"),c[h]=p.dataName[h];Object.preventExtensions(c),Object.seal(c),Object.freeze(c)}p.nameValidation!==undefined&&(r(p.nameValidation).to.be.a("boolean",'Invalid property "nameValidation" when creating a new EntitySpecification (it has to be a boolean)'),l=p.nameValidation)}else{r(arguments[0]).to.be.a("string","Invalid argument type when creating a new EntitySpecification (it has to be an object or a string)"),t=arguments[0];if(arguments.length>1&&arguments[1]){var v=arguments[1];r(typeof v).to.equal("object",'Invalid argument "attributes" when creating a new EntitySpecification (it has to be an object)'),v instanceof o.AttributeDictionary?n=v:n=new o.AttributeDictionary(v)}if(arguments.length>2&&arguments[2]){var m=arguments[2];r(m).to.be.an("object",'Invalid argument "methods" when creating a new EntitySpecification (it has to be an object)'),m instanceof u.MethodDictionary?a=m:a=new u.MethodDictionary(m)}if(arguments.length>3&&arguments[3]){var g=arguments[3];r(g).to.be.an("object",'Invalid argument "object" when creating a new EntitySpecification (it has to be an object)'),g.isAbstract&&(r(g.isAbstract).to.be.a("boolean",'Invalid property "isAbstract" when creating a new EntitySpecification (it has to be a boolean)'),f=g.isAbstract);if(g.dataName)if(typeof g.dataName=="string")c=g.dataName;else{r(g.dataName).to.be.an("object",'Invalid property "dataName" when creating a new EntitySpecification (it has to be a string or an object)'),c={};for(h in g.dataName)r(g.dataName[h]).to.be.a("string",'Invalid property "dataName" for adapter "'+h+'" when creating a new EntitySpecification (it has to be a '+"string)"),c[h]=g.dataName[h];Object.preventExtensions(c),Object.seal(c),Object.freeze(c)}g.nameValidation!==undefined&&(r(g.nameValidation).to.be.a("boolean",'Invalid property "nameValidation" when creating a new EntitySpecification (it has to be a boolean)'),l=g.nameValidation)}}Object.defineProperty(this,"name",{get:function(){return t},set:function(){throw new Error("Name of an EntitySpecification instance cannot be changed")},enumerable:!0,configurable:!1}),Object.defineProperty(this,"isAbstract",{value:f,enumerable:!0,writable:!1,configurable:!1}),Object.defineProperty(this,"dataName",{value:c,enumerable:!0,writable:!1,configurable:!1}),y(),Object.preventExtensions(this),Object.seal(this)}function f(e){r(arguments).to.have.length.below(2,"Invalid arguments length when getting the data name of an EntitySpecification (it has to be passed less than 2 arguments)");if(e){r(e).to.be.a("string",'Invalid argument "adapterName" when getting the data name of an EntitySpecification (it has to be a string)');if(this.dataName&&typeof this.dataName=="object"&&this.dataName.hasOwnProperty(e))return this.dataName[e]}return this.dataName&&typeof this.dataName=="string"?this.dataName:this.name}var r=e("chai").expect,i=e("../utils/classes"),s=e("./index"),o=e("./attributes"),u=e("./methods");n.exports=a,a.prototype.getDataName=f}),function(e){"use strict";function o(){var r=e.crypto||e.msCrypto;if(!t&&r&&r.getRandomValues)try{var s=new Uint8Array(16);i=t=function(){return r.getRandomValues(s),s},t()}catch(o){}if(!t){var u=new Array(16);n=t=function(){for(var e=0,t;e<16;e++)(e&3)===0&&(t=Math.random()*4294967296),u[e]=t>>>((e&3)<<3)&255;return u},"undefined"!=typeof console&&console.warn&&console.warn("[SECURITY] node-uuid: crypto not usable, falling back to insecure Math.random()")}}function u(){if("function"==typeof require)try{var e=require("crypto").randomBytes;r=t=e&&function(){return e(16)},t()}catch(n){}}function h(e,t,n){var r=t&&n||0,i=0;t=t||[],e.toLowerCase().replace(/[0-9a-f]{2}/g,function(e){i<16&&(t[r+i++]=l[e])});while(i<16)t[r+i++]=0;return t}function p(e,t){var n=t||0,r=f;return r[e[n++]]+r[e[n++]]+r[e[n++]]+r[e[n++]]+"-"+r[e[n++]]+r[e[n++]]+"-"+r[e[n++]]+r[e[n++]]+"-"+r[e[n++]]+r[e[n++]]+"-"+r[e[n++]]+r[e[n++]]+r[e[n++]]+r[e[n++]]+r[e[n++]]+r[e[n++]]}function b(e,t,n){var r=t&&n||0,i=t||[];e=e||{};var s=e.clockseq!=null?e.clockseq:m,o=e.msecs!=null?e.msecs:(new Date).getTime(),u=e.nsecs!=null?e.nsecs:y+1,a=o-g+(u-y)/1e4;a<0&&e.clockseq==null&&(s=s+1&16383),(a<0||o>g)&&e.nsecs==null&&(u=0);if(u>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");g=o,y=u,m=s,o+=122192928e5;var f=((o&268435455)*1e4+u)%4294967296;i[r++]=f>>>24&255,i[r++]=f>>>16&255,i[r++]=f>>>8&255,i[r++]=f&255;var l=o/4294967296*1e4&268435455;i[r++]=l>>>8&255,i[r++]=l&255,i[r++]=l>>>24&15|16,i[r++]=l>>>16&255,i[r++]=s>>>8|128,i[r++]=s&255;var c=e.node||v;for(var h=0;h<6;h++)i[r+h]=c[h];return t?t:p(i)}function w(e,n,r){var i=n&&r||0;typeof e=="string"&&(n=e==="binary"?new a(16):null,e=null),e=e||{};var s=e.random||(e.rng||t)();s[6]=s[6]&15|64,s[8]=s[8]&63|128;if(n)for(var o=0;o<16;o++)n[i+o]=s[o];return n||p(s)}var t,n,r,i,s;e?o():u();var a="function"==typeof Buffer?Buffer:Array,f=[],l={};for(var c=0;c<256;c++)f[c]=(c+256).toString(16).substr(1),l[f[c]]=c;var d=t(),v=[d[0]|1,d[1],d[2],d[3],d[4],d[5]],m=(d[6]<<8|d[7])&16383,g=0,y=0,E=w;E.v1=b,E.v4=w,E.parse=h,E.unparse=p,E.BufferClass=a,E._rng=t,E._mathRNG=n,E._nodeRNG=r,E._whatwgRNG=i,"undefined"!=typeof module&&module.exports?module.exports=E:typeof define=="function"&&define.amd?define("node-uuid",[],function(){return E}):(s=e.uuid,E.noConflict=function(){return e.uuid=s,E},e.uuid=E)}("undefined"!=typeof window?window:null),define("back4app-entity/models/Entity",["require","exports","module","chai","bluebird","../settings","../utils/classes","../utils/objects","../adapters/Adapter","./EntitySpecification","./attributes/AttributeDictionary","./attributes/types/AssociationAttribute","./methods","./errors","node-uuid","./index"],function(e,t,n){"use strict";function g(e,t){function y(e,t){s[e]=!1,Object.defineProperty(n,e,{get:function(){if(a&&!r.hasOwnProperty(e)&&!s[e]&&e!=="id")throw new v.NotFetchedError(n.Entity.specification.name,e,null);return t},set:function(n){s[e]=!0,t=n},enumerable:!0,configurable:e==="id"||e==="permissions"})}function b(e){i(arguments).to.have.length.below(2,"Invalid arguments length when checking if an Entity attribute is dirty (it has to be passed less than 2 arguments)");var t=this.Entity.attributes;if(e){i(e).to.be.a("string",'Invalid argument "attribute" when checking if an Entity attribute is dirty (it has to be a string)'),i(t).to.have.ownProperty(e,'Invalid argument "attribute" when checking an Entity attribute is dirty (this attribute does not exist in the Entity)');var n={};n[e]=t[e],t=n}if(this.isNew)return!0;for(var o in t)if(a){if(s[o])if(!r.hasOwnProperty(o)||r[o]!==this[o])return!0}else if(!r.hasOwnProperty(o)||r[o]!==this[o])return!0;return!1}function w(e){i(arguments).to.have.length.below(2,"Invalid arguments length when cleaning an Entity attribute (it has to be passed less than 2 arguments)");var t=this.Entity.attributes;if(e){i(e).to.be.a("string",'Invalid argument "attribute" when cleaning an Entity attribute (it has to be a string)'),i(t).to.have.ownProperty(e,'Invalid argument "attribute" when cleaning an Entity attribute (this attribute does not exist in the Entity)');var n={};n[e]=t[e],t=n}for(var o in t)r[o]=this[o],s[o]=!1}var n=this;this.adapterName=null,this.adapter=null;if(!this.hasOwnProperty("Entity")||!this.Entity)this.Entity=null;this.General=null,this.isNew=null,this.id=null;var r={},s={};this.isDirty=b,this.clean=w,(!this.hasOwnProperty("Entity")||!this.Entity)&&Object.defineProperty(this,"Entity",{value:g,enumerable:!1,writable:!1,configurable:!1}),Object.defineProperty(this,"General",{get:function(){return this.Entity.General},set:function(){throw new Error("General property of an Entity instance cannot be changed")},enumerable:!1,configurable:!1}),Object.defineProperty(this,"adapterName",{value:this.Entity.adapterName,writable:!1,enumerable:!1,configurable:!1}),Object.defineProperty(this,"adapter",{value:this.Entity.adapter,writable:!1,enumerable:!1,configurable:!1});var o=!0;Object.defineProperty(this,"isNew",{get:function(){return o},set:function(e){i(e).to.be.a("boolean","Invalid value when setting isNew value (it has to be a boolean)"),o=e},enumerable:!1,configurable:!1}),Object.defineProperty(this,"isDirty",{value:b,writable:!1,enumerable:!1,configurable:!1}),Object.defineProperty(this,"clean",{value:w,writable:!1,enumerable:!1,configurable:!1}),i(this).to.be.an("object","The Entity's constructor can be only invoked from specialized classes' constructors"),i(this.constructor).to.be.a("function","The Entity's constructor can be only invoked from specialized classes' constructors"),i(this.constructor).to.not.equal(g,"The Entity is an abstract class and cannot be directly initialized"),i(this).to.be.instanceof(g,"The Entity's constructor can be only invoked from specialized classes' constructors"),i(arguments).to.have.length.below(3,'Invalid arguments length when creating "'+this.Entity.specification.name+'" (it has to be passed less than 3 arguments)');var u=!1,a=!1;t&&(i(t).to.be.an("object",'Invalid argument "options" when creating a new "'+this.Entity.specification.name+'" (it has to be an object)'),t.hasOwnProperty("isNew")&&(i(t.isNew).to.be.a("boolean",'Invalid argument "options.isNew" when creating a new "'+this.Entity.specification.name+'" (it has to be a boolean)'),this.isNew=t.isNew,t.isNew&&(u=!0)),t.hasOwnProperty("clean")&&(i(t.clean).to.be.a("boolean",'Invalid argument "options.clean" when creating a new "'+this.Entity.specification.name+'" (it has to be a boolean)'),t.clean&&(a=!0))),e&&(i(e).to.be.an("object",'Invalid argument "attributeValues" when creating a new "'+this.Entity.specification.name+'" (it has to be an object)'),!u&&e.hasOwnProperty("id")&&(this.isNew=!1));var f=this.Entity.attributes;for(var l in e)i(f,'Invalid property "'+l+'" when creating a new "'+this.Entity.specification.name+'" (it does not exist)').to.include.keys(l);for(l in f){var c=null;e&&e.hasOwnProperty(l)&&(c=e[l],this.isNew||(r[l]=c)),y(l,c)}for(l in f)(!a||l==="id")&&this[l]===null&&f[l].default!==null&&(this[l]=f[l].getDefaultValue(this));var h="^[a-fA-F0-9]{8}-[a-fA-F0-9]{4}-[a-fA-F0-9]{4}-[a-fA-F0-9]{4}-[a-fA-F0-9]{12}$";i((new RegExp(h)).test(this.id)).to.equal(!0,'Invalid property "id" when creating a new "'+this.Entity.specification.name+'" (it has to be a valid uuid)');if(!a){if(this.permissions)for(var p in this.permissions)try{var d=this.permissions[p];this.permissions[p]={},d.read&&(this.permissions[p].read=!0),d.write&&(this.permissions[p].write=!0)}catch(m){throw m.message=m.message+' ("'+p+'" is invalid)',m}else this.permissions=null;r.permissions=this.permissions}Object.defineProperty(this,"id",{value:this.id,enumerable:!0,writable:!1,configurable:!1}),Object.defineProperty(this,"permissions",{value:a?null:this.permissions,enumerable:!0,writable:!0,configurable:!1}),Object.preventExtensions(this)}function x(){if(!S)try{i(u).to.have.ownProperty("ADAPTERS"),i(u.ADAPTERS).to.have.ownProperty(this.adapterName);var e=u.ADAPTERS[this.adapterName];i(e).to.be.an.instanceOf(l),S=e}catch(t){throw t instanceof s?new v.AdapterNotFoundError(this.adapterName,t):t}return S}function T(e,t){for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n],T(e[n].directSpecializations,t))}function A(e){return function(t){return i(arguments).to.have.length(1,"Invalid arguments length when getting an Entity (it has to be passed 1 argument)"),i(t).to.be.an("object","Invalid argument when getting an Entity (it has to be an object)"),o.try(function(){var n=e.adapter;return n.getObject(e,t)})}}function O(e){return function(t,n){return i(arguments).to.have.length.within(1,2,"Invalid arguments length when finding an Entity (it has to be passed 1 or 2 arguments)"),i(t).to.be.an("object","Invalid argument when finding an Entity (it has to be an object)"),o.try(function(){var r=e.adapter;return r.findObjects(e,t,n)})}}function M(e){i(arguments).to.have.length.below(2,"Invalid arguments length when validating an Entity (it has to be passed less than 2 arguments)");var t=this.Entity.attributes;if(e){i(e).to.be.a("string",'Invalid argument "attribute" when validating an Entity (it has to be a string)'),i(t).to.have.ownProperty(e,'Invalid argument "attribute" when validating an Entity (this attribute does not exist in the Entity)');var n={};n[e]=t[e],t=n}for(e in t)this.isDirty(e)&&t[e].validate(this)}function _(e){try{this.validate(e)}catch(t){if(t instanceof v.ValidationError)return!1;throw t}return!0}function D(e){var t=this;return i(arguments).to.have.length.below(2,"Invalid arguments length when saving an Entity (it has to be passed less than 2 arguments)"),new o(function(n,r){var s=t.isNew,u=!1,a=!1;e&&(i(e).to.be.an("object",'Invalid argument "options" when saving an Entity (it has to be an object)'),e.hasOwnProperty("forceCreate")&&(i(e.forceCreate).to.be.a("boolean",'Invalid argument "options.forceCreate" when saving an Entity (it has to be a boolean)'),e.forceCreate&&(u=!0)),e.hasOwnProperty("forceUpdate")&&(i(e.forceUpdate).to.be.a("boolean",'Invalid argument "options.forceUpdate" when saving an Entity (it has to be a boolean)'),e.forceUpdate&&(a=!0)),u&&i(u).to.not.equal(a,"It is not possible to force create and update at same time when saving an Entity"),u?s=!0:a&&(s=!1));if(s||t.isDirty()){t.validate();var f=[],l=t.Entity.attributes;for(var c in l)l[c]instanceof p&&t.hasOwnProperty(c)&&t[c]instanceof g&&f.push(t[c].save());var h=null;s?h=t.adapter.insertObject(t):h=t.adapter.updateObject(t),i(h).to.not.equal(null,'Functions "insertObject" and "updateObject" of an Adapter specialization should return a Promise'),i(typeof h).to.equal("object",'Functions "insertObject" and "updateObject" of an Adapter specialization should return a Promise'),i(h).to.respondTo("then",'Functions "insertObject" and "updateObject" of an Adapter specialization should return a Promise'),i(h).to.respondTo("catch",'Functions "insertObject" and "updateObject" of an Adapter specialization should return a Promise'),h.then(function(){t.isNew=!1,t.clean()}),f.push(h),o.all(f).then(function(){n()}).catch(r)}else n()})}function P(){var e=this;return i(arguments).to.have.length(0,'Invalid arguments length when deleting a "'+this.Entity.specification.name+'" instance (it has to be passed 0 arguments)'),new o(function(t,n){var r=e.adapter.deleteObject(e);i(r).to.respondTo("then",'Function "delete" of an Adapter specialization should return a Promise'),i(r).to.respondTo("catch",'Function "delete" of an Adapter specialization should return a Promise'),r.then(t).catch(n)})}var r=e("chai"),i=r.expect,s=r.AssertionError,o=e("bluebird"),u=e("../settings"),a=e("../utils/classes"),f=e("../utils/objects"),l=e("../adapters/Adapter"),c=e("./EntitySpecification"),h=e("./attributes/AttributeDictionary"),p=e("./attributes/types/AssociationAttribute"),d=e("./methods").MethodDictionary,v=e("./errors"),m=e("node-uuid");n.exports=g,e("./index").Entity=g,g.adapterName=null,g.adapter=null,g.General=null,g.specification=null,g.dataName=null,g.attributes=null,g.methods=null,g.directSpecializations=null,g.specializations=null,g.specify=null,g.getSpecialization=null,g.new=null,g.create=null,g.get=null,g.find=null,g.prototype.validate=M,g.prototype.isValid=_,g.prototype.delete=P,g.prototype.save=D,Object.defineProperty(g,"adapterName",{value:"default",writable:!1,enumerable:!0,configurable:!1}),Object.defineProperty(g,"adapter",{get:x,set:function(){throw new Error("Adapter property of an Entity class cannot be changed")},enumerable:!0,configurable:!1}),Object.defineProperty(g,"General",{value:null,enumerable:!0,writable:!1,configurable:!1});var y=new h({id:{type:"String","default":m.v4},permissions:{type:"Object",multiplicity:"0..1","default":null}}),b=new c("Entity",y,null,{isAbstract:!0});Object.defineProperty(g,"specification",{value:b,enumerable:!0,writable:!1,configurable:!1}),b.Entity=g,Object.defineProperty(g,"dataName",{value:g.specification.getDataName(g.adapterName),enumerable:!0,writable:!1,configurable:!1}),Object.defineProperty(g,"attributes",{value:y,enumerable:!0,writable:!1,configurable:!1}),Object.defineProperty(g,"methods",{value:{},enumerable:!0,writable:!1,configurable:!1});var w={};Object.defineProperty(g,"directSpecializations",{get:function(){var e=f.copy(w);return Object.preventExtensions(e),Object.seal(e),Object.freeze(e),e},set:function(){throw new Error("Specializations of an Entity cannot be changed")},enumerable:!0,configurable:!1});var E={};Object.defineProperty(g,"specializations",{get:function(){var e=f.copy(E);return Object.preventExtensions(e),Object.seal(e),Object.freeze(e),e},set:function(){throw new Error("Specializations of an Entity cannot be changed")},enumerable:!0,configurable:!1});var S=null,N=function(e,t){return function(){i(arguments).to.have.length.within(1,4,"Invalid arguments length when specifying an Entity (it has to be passed from 1 to 4 arguments)");var n=function(){(!this.hasOwnProperty("Entity")||!this.Entity)&&Object.defineProperty(this,"Entity",{value:n,enumerable:!1,writable:!1,configurable:!1}),n.specification.isAbstract&&(i(this).to.be.an("object",'The "'+n.specification.name+"\"'s constructor "+"can be only invoked from specialized classes' constructors"),i(this.constructor).to.be.a("function",'The "'+n.specification.name+"\"'s constructor "+"can be only invoked from specialized classes' constructors"),i(this.constructor).to.not.equal(n,'The "'+n.specification.name+'" is an abstract '+"class and cannot be directly initialized"),i(this).to.be.instanceof(n,'The "'+n.specification.name+"\"'s constructor "+"can be only invoked from specialized classes' constructors")),e.apply(this,Array.prototype.slice.call(arguments))};a.generalize(e,n),Object.defineProperty(n,"General",{value:e,enumerable:!0,writable:!1,configurable:!1});var r=null;if(arguments.length===1&&typeof arguments[0]!="string"){var s=arguments[0];i(s).to.be.an("object","Invalid argument type when specifying an Entity (it has to be an object or a string)"),s instanceof c?r=s:r=new c(s)}else{var o=arguments[0];i(o).to.be.a("string",'Invalid argument "name" when specifying an Entity (it has to be a string)');var u=null,l=null,p=null;arguments.length>1&&arguments[1]&&(u=arguments[1],i(typeof u).to.equal("object",'Invalid property "attributes" when specifying an Entity (it has to be an object)')),arguments.length>2&&arguments[2]&&(l=arguments[2],i(l).to.be.an("object",'Invalid property "methods" when specifying an Entity (it has to be an object)')),arguments.length>3&&arguments[3]&&(p=arguments[3],i(p).to.be.an("object",'Invalid property "options" when specifying an Entity (it has to be an object)')),r=new c(o,u,l,p)}r.isAbstract&&i(e.specification.isAbstract).to.equal(!0,'It was not possible to specify a new Entity called "'+r.name+'" because an abstract Entity '+"cannot be specified by a concrete one"),Object.defineProperty(n,"specification",{value:r,enumerable:!0,writable:!1,configurable:!1}),Object.defineProperty(n,"dataName",{value:n.specification.getDataName(n.adapterName),enumerable:!0,writable:!1,configurable:!1}),Object.defineProperty(n,"attributes",{get:function(){var e={},t=[],r=n;while(r&&t.indexOf(r)===-1){for(var i in r.specification.attributes)e.hasOwnProperty(i)||(e[i]=r.specification.attributes[i]);t.push(r),r=r.General}return new h(e)},set:function(){throw new Error("Attributes of an Entity cannot be changed")},enumerable:!0,configurable:!1}),Object.defineProperty(n,"methods",{get:function(){var e={},t=[],r=n;while(r&&t.indexOf(r)===-1){for(var i in r.specification.methods)e.hasOwnProperty(i)||(e[i]=r.specification.methods[i]);t.push(r),r=r.General}return new d(e)},set:function(){throw new Error("Methods of an Entity cannot be changed")},enumerable:!0,configurable:!1});var v={};return Object.defineProperty(n,"directSpecializations",{get:function(){var e=f.copy(v);return Object.preventExtensions(e),Object.seal(e),Object.freeze(e),e},set:function(){throw new Error("Specializations of an Entity cannot be changed")},enumerable:!0,configurable:!1}),Object.defineProperty(n,"specializations",{get:function(){var e={};return T(v,e),Object.preventExtensions(e),Object.seal(e),Object.freeze(e),e},set:function(){throw new Error("Specializations of an Entity cannot be changed")},enumerable:!0,configurable:!1}),n.specify=N(n,v),n.getSpecialization=C(n),n.new=k(n),n.create=L(n),n.get=A(n),n.find=O(n),r.Entity?i(r.Entity).to.equal(n,'The property "Entity" of the EntitySpecification instance should be equal to the Entity that is being specified.'):r.Entity=n,i(E).to.not.have.ownProperty(r.name,'It was not possible to specify a new Entity called "'+r.name+'" because duplicates are not allowed'),E[r.name]=n,t[r.name]=n,n}};g.specify=N(g,w);var C=function(e){return function(t){i(arguments).to.have.length(1,"Invalid arguments length when getting an Entity specialization (it has to be passed 1 argument)"),i(t).to.be.a("string","Invalid argument when creating a new Entity function (it has to be a string");var n=e.specializations;try{i(n).to.have.ownProperty(t)}catch(r){throw new v.EntityNotFoundError(t,r)}return n[t]}};g.getSpecialization=C(g);var k=function(e){return function(t){return i(arguments).to.have.length.below(2,"Invalid arguments length when creating a new Entity function (it has to be passed less than 2 arguments)"),function(n){i(arguments).to.have.length.below(2,"Invalid arguments length when creating a new Entity (it has not to be passed less than 2 arguments)");var r=e;return t&&(r=g.getSpecialization(t)),new r(n)}}};g.new=k(g);var L=function(e){return function(t){return i(arguments).to.have.length.below(2,'Invalid arguments length when creating a new "'+e.specification.name+'" instance (it has to be passed less than 2 arguments)'),new o(function(n,r){var i=new e(t);i.save({forceCreate:!0}).then(function(){n(i)}).catch(r)})}};g.create=L(g),g.get=A(g),g.find=O(g)}),function(e,t){typeof define=="function"&&define.amd?define("bcryptjs",[],t):typeof require=="function"&&typeof module=="object"&&module&&module.exports?module.exports=t():(e.dcodeIO=e.dcodeIO||{}).bcrypt=t()}(this,function(){"use strict";function n(e){if(typeof module!="undefined"&&module&&module.exports)try{return require("crypto").randomBytes(e)}catch(n){}try{var r;return(self.crypto||self.msCrypto).getRandomValues(r=new Uint32Array(e)),Array.prototype.slice.call(r)}catch(n){}if(!t)throw Error("Neither WebCryptoAPI nor a crypto module is available. Use bcrypt.setRandomFallback to set an alternative");return t(e)}function s(e,t){var n=0,r=0;for(var i=0,s=e.length;i<s;++i)e.charCodeAt(i)===t.charCodeAt(i)?++n:++r;return n<0?!1:r===0}function u(e){var t=[],n=0;return p.encodeUTF16toUTF8(function(){return n>=e.length?null:e.charCodeAt(n++)},function(e){t.push(e)}),t}function c(e,t){var n=0,r=[],i,s;if(t<=0||t>e.length)throw Error("Illegal len: "+t);while(n<t){i=e[n++]&255,r.push(a[i>>2&63]),i=(i&3)<<4;if(n>=t){r.push(a[i&63]);break}s=e[n++]&255,i|=s>>4&15,r.push(a[i&63]),i=(s&15)<<2;if(n>=t){r.push(a[i&63]);break}s=e[n++]&255,i|=s>>6&3,r.push(a[i&63]),r.push(a[s&63])}return r.join("")}function h(e,t){var n=0,r=e.length,i=0,s=[],o,u,a,c,h,p;if(t<=0)throw Error("Illegal len: "+t);while(n<r-1&&i<t){p=e.charCodeAt(n++),o=p<f.length?f[p]:-1,p=e.charCodeAt(n++),u=p<f.length?f[p]:-1;if(o==-1||u==-1)break;h=o<<2>>>0,h|=(u&48)>>4,s.push(l(h));if(++i>=t||n>=r)break;p=e.charCodeAt(n++),a=p<f.length?f[p]:-1;if(a==-1)break;h=(u&15)<<4>>>0,h|=(a&60)>>2,s.push(l(h));if(++i>=t||n>=r)break;p=e.charCodeAt(n++),c=p<f.length?f[p]:-1,h=(a&3)<<6>>>0,h|=c,s.push(l(h)),++i}var d=[];for(n=0;n<i;n++)d.push(s[n].charCodeAt(0));return d}function E(e,t,n,r){var i,s=e[t],o=e[t+1];s^=n[0];for(var u=0,a=m-2;u<=a;)i=r[s>>24&255],i+=r[256|s>>16&255],i^=r[512|s>>8&255],i+=r[768|s&255],o^=i^n[++u],i=r[o>>24&255],i+=r[256|o>>16&255],i^=r[512|o>>8&255],i+=r[768|o&255],s^=i^n[++u];return e[t]=o^n[m+1],e[t+1]=s,e}function S(e,t){for(var n=0,r=0;n<4;++n)r=r<<8|e[t]&255,t=(t+1)%e.length;return{key:r,offp:t}}function x(e,t,n){var r=0,i=[0,0],s=t.length,o=n.length,u;for(var a=0;a<s;a++)u=S(e,r),r=u.offp,t[a]=t[a]^u.key;for(a=0;a<s;a+=2)i=E(i,0,t,n),t[a]=i[0],t[a+1]=i[1];for(a=0;a<o;a+=2)i=E(i,0,t,n),n[a]=i[0],n[a+1]=i[1]}function T(e,t,n,r){var i=0,s=[0,0],o=n.length,u=r.length,a;for(var f=0;f<o;f++)a=S(t,i),i=a.offp,n[f]=n[f]^a.key;i=0;for(f=0;f<o;f+=2)a=S(e,i),i=a.offp,s[0]^=a.key,a=S(e,i),i=a.offp,s[1]^=a.key,s=E(s,0,n,r),n[f]=s[0],n[f+1]=s[1];for(f=0;f<u;f+=2)a=S(e,i),i=a.offp,s[0]^=a.key,a=S(e,i),i=a.offp,s[1]^=a.key,s=E(s,0,n,r),r[f]=s[0],r[f+1]=s[1]}function N(e,t,n,r,i){function p(){i&&i(c/n);if(!(c<n)){for(c=0;c<64;c++)for(h=0;h<u>>1;h++)E(s,h<<1,f,l);var d=[];for(c=0;c<u;c++)d.push((s[c]>>24&255)>>>0),d.push((s[c]>>16&255)>>>0),d.push((s[c]>>8&255)>>>0),d.push((s[c]&255)>>>0);if(r){r(null,d);return}return d}var a=Date.now();for(;c<n;){c+=1,x(e,f,l),x(t,f,l);if(Date.now()-a>g)break}r&&o(p)}var s=w.slice(),u=s.length,a;if(n<4||n>31){a=Error("Illegal number of rounds (4-31): "+n);if(r){o(r.bind(this,a));return}throw a}if(t.length!==d){a=Error("Illegal salt length: "+t.length+" != "+d);if(r){o(r.bind(this,a));return}throw a}n=1<<n>>>0;var f=y.slice(),l=b.slice(),c=0,h;T(t,e,f,l);if(typeof r!="undefined")p();else{var v;for(;;)if(typeof (v=p())!="undefined")return v||[]}}function C(e,t,n,r){function y(e){var t=[];return t.push("$2"),s>="a"&&t.push(s),t.push("$"),p<10&&t.push("0"),t.push(p.toString()),t.push("$"),t.push(c(g,g.length)),t.push(c(e,w.length*4-1)),t.join("")}var i;if(typeof e!="string"||typeof t!="string"){i=Error("Invalid string / salt: Not a string");if(n){o(n.bind(this,i));return}throw i}var s,a;if(t.charAt(0)!=="$"||t.charAt(1)!=="2"){i=Error("Invalid salt version: "+t.substring(0,2));if(n){o(n.bind(this,i));return}throw i}if(t.charAt(2)==="$")s=String.fromCharCode(0),a=3;else{s=t.charAt(2);if(s!=="a"&&s!=="b"&&s!=="y"||t.charAt(3)!=="$"){i=Error("Invalid salt revision: "+t.substring(2,4));if(n){o(n.bind(this,i));return}throw i}a=4}if(t.charAt(a+2)>"$"){i=Error("Missing salt rounds");if(n){o(n.bind(this,i));return}throw i}var f=parseInt(t.substring(a,a+1),10)*10,l=parseInt(t.substring(a+1,a+2),10),p=f+l,v=t.substring(a+3,a+25);e+=s>="a"?"\0":"";var m=u(e),g=h(v,d);if(typeof n=="undefined")return y(N(m,g,p));N(m,g,p,function(e,t){e?n(e,null):n(null,y(t))},r)}var e={},t=null,r=!1;try{n(1),r=!0}catch(i){}t=null,e.setRandomFallback=function(e){t=e},e.genSaltSync=function(e,t){e=e||v;if(typeof e!="number")throw Error("Illegal arguments: "+typeof e+", "+typeof t);e<4?e=4:e>31&&(e=31);var r=[];return r.push("$2a$"),e<10&&r.push("0"),r.push(e.toString()),r.push("$"),r.push(c(n(d),d)),r.join("")},e.genSalt=function(t,n,r){typeof n=="function"&&(r=n,n=undefined),typeof t=="function"&&(r=t,t=v);if(typeof r!="function")throw Error("Illegal callback: "+typeof r);if(typeof t!="number"){o(r.bind(this,Error("Illegal arguments: "+typeof t)));return}o(function(){try{r(null,e.genSaltSync(t))}catch(n){r(n)}})},e.hashSync=function(t,n){typeof n=="undefined"&&(n=v),typeof n=="number"&&(n=e.genSaltSync(n));if(typeof t!="string"||typeof n!="string")throw Error("Illegal arguments: "+typeof t+", "+typeof n);return C(t,n)},e.hash=function(t,n,r,i){if(typeof r!="function")throw Error("Illegal callback: "+typeof r);typeof t=="string"&&typeof n=="number"?e.genSalt(n,function(e,n){C(t,n,r,i)}):typeof t=="string"&&typeof n=="string"?C(t,n,r,i):o(r.bind(this,Error("Illegal arguments: "+typeof t+", "+typeof n)))},e.compareSync=function(t,n){if(typeof t!="string"||typeof n!="string")throw Error("Illegal arguments: "+typeof t+", "+typeof n);return n.length!==60?!1:s(e.hashSync(t,n.substr(0,n.length-31)),n)},e.compare=function(t,n,r,i){if(typeof r!="function")throw Error("Illegal callback: "+typeof r);if(typeof t!="string"||typeof n!="string"){o(r.bind(this,Error("Illegal arguments: "+typeof t+", "+typeof n)));return}if(n.length!==60){o(r.bind(this,null,!1));return}e.hash(t,n.substr(0,29),function(e,t){e?r(e):r(null,s(t,n))},i)},e.getRounds=function(e){if(typeof e!="string")throw Error("Illegal arguments: "+typeof e);return parseInt(e.split("$")[2],10)},e.getSalt=function(e){if(typeof e!="string")throw Error("Illegal arguments: "+typeof e);if(e.length!==60)throw Error("Illegal hash length: "+e.length+" != 60");return e.substring(0,29)};var o=typeof process!="undefined"&&process&&typeof process.nextTick=="function"?typeof setImmediate=="function"?setImmediate:process.nextTick:setTimeout,a="./ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".split(""),f=[-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,1,54,55,56,57,58,59,60,61,62,63,-1,-1,-1,-1,-1,-1,-1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,-1,-1,-1,-1,-1,-1,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,-1,-1,-1,-1,-1],l=String.fromCharCode,p=function(){var e={};return e.MAX_CODEPOINT=1114111,e.encodeUTF8=function(e,t){var n=null;typeof e=="number"&&(n=e,e=function(){return null});while(n!==null||(n=e())!==null)n<128?t(n&127):n<2048?(t(n>>6&31|192),t(n&63|128)):n<65536?(t(n>>12&15|224),t(n>>6&63|128),t(n&63|128)):(t(n>>18&7|240),t(n>>12&63|128),t(n>>6&63|128),t(n&63|128)),n=null},e.decodeUTF8=function(e,t){var n,r,i,s,o=function(e){e=e.slice(0,e.indexOf(null));var t=Error(e.toString());throw t.name="TruncatedError",t.bytes=e,t};while((n=e())!==null)if((n&128)===0)t(n);else if((n&224)===192)(r=e())===null&&o([n,r]),t((n&31)<<6|r&63);else if((n&240)===224)((r=e())===null||(i=e())===null)&&o([n,r,i]),t((n&15)<<12|(r&63)<<6|i&63);else{if((n&248)!==240)throw RangeError("Illegal starting byte: "+n);((r=e())===null||(i=e())===null||(s=e())===null)&&o([n,r,i,s]),t((n&7)<<18|(r&63)<<12|(i&63)<<6|s&63)}},e.UTF16toUTF8=function(e,t){var n,r=null;for(;;){if((n=r!==null?r:e())===null)break;if(n>=55296&&n<=57343&&(r=e())!==null&&r>=56320&&r<=57343){t((n-55296)*1024+r-56320+65536),r=null;continue}t(n)}r!==null&&t(r)},e.UTF8toUTF16=function(e,t){var n=null;typeof e=="number"&&(n=e,e=function(){return null});while(n!==null||(n=e())!==null)n<=65535?t(n):(n-=65536,t((n>>10)+55296),t(n%1024+56320)),n=null},e.encodeUTF16toUTF8=function(t,n){e.UTF16toUTF8(t,function(t){e.encodeUTF8(t,n)})},e.decodeUTF8toUTF16=function(t,n){e.decodeUTF8(t,function(t){e.UTF8toUTF16(t,n)})},e.calculateCodePoint=function(e){return e<128?1:e<2048?2:e<65536?3:4},e.calculateUTF8=function(t){var n,r=0;while((n=t())!==null)r+=e.calculateCodePoint(n);return r},e.calculateUTF16asUTF8=function(t){var n=0,r=0;return e.UTF16toUTF8(t,function(t){++n,r+=e.calculateCodePoint(t)}),[n,r]},e}();Date.now=Date.now||function(){return+(new Date)};var d=16,v=10,m=16,g=100,y=[608135816,2242054355,320440878,57701188,2752067618,698298832,137296536,3964562569,1160258022,953160567,3193202383,887688300,3232508343,3380367581,1065670069,3041331479,2450970073,2306472731],b=[3509652390,2564797868,805139163,3491422135,3101798381,1780907670,3128725573,4046225305,614570311,3012652279,134345442,2240740374,1667834072,1901547113,2757295779,4103290238,227898511,1921955416,1904987480,2182433518,2069144605,3260701109,2620446009,720527379,3318853667,677414384,3393288472,3101374703,2390351024,1614419982,1822297739,2954791486,3608508353,3174124327,2024746970,1432378464,3864339955,2857741204,1464375394,1676153920,1439316330,715854006,3033291828,289532110,2706671279,2087905683,3018724369,1668267050,732546397,1947742710,3462151702,2609353502,2950085171,1814351708,2050118529,680887927,999245976,1800124847,3300911131,1713906067,1641548236,4213287313,1216130144,1575780402,4018429277,3917837745,3693486850,3949271944,596196993,3549867205,258830323,2213823033,772490370,2760122372,1774776394,2652871518,566650946,4142492826,1728879713,2882767088,1783734482,3629395816,2517608232,2874225571,1861159788,326777828,3124490320,2130389656,2716951837,967770486,1724537150,2185432712,2364442137,1164943284,2105845187,998989502,3765401048,2244026483,1075463327,1455516326,1322494562,910128902,469688178,1117454909,936433444,3490320968,3675253459,1240580251,122909385,2157517691,634681816,4142456567,3825094682,3061402683,2540495037,79693498,3249098678,1084186820,1583128258,426386531,1761308591,1047286709,322548459,995290223,1845252383,2603652396,3431023940,2942221577,3202600964,3727903485,1712269319,422464435,3234572375,1170764815,3523960633,3117677531,1434042557,442511882,3600875718,1076654713,1738483198,4213154764,2393238008,3677496056,1014306527,4251020053,793779912,2902807211,842905082,4246964064,1395751752,1040244610,2656851899,3396308128,445077038,3742853595,3577915638,679411651,2892444358,2354009459,1767581616,3150600392,3791627101,3102740896,284835224,4246832056,1258075500,768725851,2589189241,3069724005,3532540348,1274779536,3789419226,2764799539,1660621633,3471099624,4011903706,913787905,3497959166,737222580,2514213453,2928710040,3937242737,1804850592,3499020752,2949064160,2386320175,2390070455,2415321851,4061277028,2290661394,2416832540,1336762016,1754252060,3520065937,3014181293,791618072,3188594551,3933548030,2332172193,3852520463,3043980520,413987798,3465142937,3030929376,4245938359,2093235073,3534596313,375366246,2157278981,2479649556,555357303,3870105701,2008414854,3344188149,4221384143,3956125452,2067696032,3594591187,2921233993,2428461,544322398,577241275,1471733935,610547355,4027169054,1432588573,1507829418,2025931657,3646575487,545086370,48609733,2200306550,1653985193,298326376,1316178497,3007786442,2064951626,458293330,2589141269,3591329599,3164325604,727753846,2179363840,146436021,1461446943,4069977195,705550613,3059967265,3887724982,4281599278,3313849956,1404054877,2845806497,146425753,1854211946,1266315497,3048417604,3681880366,3289982499,290971e4,1235738493,2632868024,2414719590,3970600049,1771706367,1449415276,3266420449,422970021,1963543593,2690192192,3826793022,1062508698,1531092325,1804592342,2583117782,2714934279,4024971509,1294809318,4028980673,1289560198,2221992742,1669523910,35572830,157838143,1052438473,1016535060,1802137761,1753167236,1386275462,3080475397,2857371447,1040679964,2145300060,2390574316,1461121720,2956646967,4031777805,4028374788,33600511,2920084762,1018524850,629373528,3691585981,3515945977,2091462646,2486323059,586499841,988145025,935516892,3367335476,2599673255,2839830854,265290510,3972581182,2759138881,3795373465,1005194799,847297441,406762289,1314163512,1332590856,1866599683,4127851711,750260880,613907577,1450815602,3165620655,3734664991,3650291728,3012275730,3704569646,1427272223,778793252,1343938022,2676280711,2052605720,1946737175,3164576444,3914038668,3967478842,3682934266,1661551462,3294938066,4011595847,840292616,3712170807,616741398,312560963,711312465,1351876610,322626781,1910503582,271666773,2175563734,1594956187,70604529,3617834859,1007753275,1495573769,4069517037,2549218298,2663038764,504708206,2263041392,3941167025,2249088522,1514023603,1998579484,1312622330,694541497,2582060303,2151582166,1382467621,776784248,2618340202,3323268794,2497899128,2784771155,503983604,4076293799,907881277,423175695,432175456,1378068232,4145222326,3954048622,3938656102,3820766613,2793130115,2977904593,26017576,3274890735,3194772133,1700274565,1756076034,4006520079,3677328699,720338349,1533947780,354530856,688349552,3973924725,1637815568,332179504,3949051286,53804574,2852348879,3044236432,1282449977,3583942155,3416972820,4006381244,1617046695,2628476075,3002303598,1686838959,431878346,2686675385,1700445008,1080580658,1009431731,832498133,3223435511,2605976345,2271191193,2516031870,1648197032,4164389018,2548247927,300782431,375919233,238389289,3353747414,2531188641,2019080857,1475708069,455242339,2609103871,448939670,3451063019,1395535956,2413381860,1841049896,1491858159,885456874,4264095073,4001119347,1565136089,3898914787,1108368660,540939232,1173283510,2745871338,3681308437,4207628240,3343053890,4016749493,1699691293,1103962373,3625875870,2256883143,3830138730,1031889488,3479347698,1535977030,4236805024,3251091107,2132092099,1774941330,1199868427,1452454533,157007616,2904115357,342012276,595725824,1480756522,206960106,497939518,591360097,863170706,2375253569,3596610801,1814182875,2094937945,3421402208,1082520231,3463918190,2785509508,435703966,3908032597,1641649973,2842273706,3305899714,1510255612,2148256476,2655287854,3276092548,4258621189,236887753,3681803219,274041037,1734335097,3815195456,3317970021,1899903192,1026095262,4050517792,356393447,2410691914,3873677099,3682840055,3913112168,2491498743,4132185628,2489919796,1091903735,1979897079,3170134830,3567386728,3557303409,857797738,1136121015,1342202287,507115054,2535736646,337727348,3213592640,1301675037,2528481711,1895095763,1721773893,3216771564,62756741,2142006736,835421444,2531993523,1442658625,3659876326,2882144922,676362277,1392781812,170690266,3921047035,1759253602,3611846912,1745797284,664899054,1329594018,3901205900,3045908486,2062866102,2865634940,3543621612,3464012697,1080764994,553557557,3656615353,3996768171,991055499,499776247,1265440854,648242737,3940784050,980351604,3713745714,1749149687,3396870395,4211799374,3640570775,1161844396,3125318951,1431517754,545492359,4268468663,3499529547,1437099964,2702547544,3433638243,2581715763,2787789398,1060185593,1593081372,2418618748,4260947970,69676912,2159744348,86519011,2512459080,3838209314,1220612927,3339683548,133810670,1090789135,1078426020,1569222167,845107691,3583754449,4072456591,1091646820,628848692,1613405280,3757631651,526609435,236106946,48312990,2942717905,3402727701,1797494240,859738849,992217954,4005476642,2243076622,3870952857,3732016268,765654824,3490871365,2511836413,1685915746,3888969200,1414112111,2273134842,3281911079,4080962846,172450625,2569994100,980381355,4109958455,2819808352,2716589560,2568741196,3681446669,3329971472,1835478071,660984891,3704678404,4045999559,3422617507,3040415634,1762651403,1719377915,3470491036,2693910283,3642056355,3138596744,1364962596,2073328063,1983633131,926494387,3423689081,2150032023,4096667949,1749200295,3328846651,309677260,2016342300,1779581495,3079819751,111262694,1274766160,443224088,298511866,1025883608,3806446537,1145181785,168956806,3641502830,3584813610,1689216846,3666258015,3200248200,1692713982,2646376535,4042768518,1618508792,1610833997,3523052358,4130873264,2001055236,3610705100,2202168115,4028541809,2961195399,1006657119,2006996926,3186142756,1430667929,3210227297,1314452623,4074634658,4101304120,2273951170,1399257539,3367210612,3027628629,1190975929,2062231137,2333990788,2221543033,2438960610,1181637006,548689776,2362791313,3372408396,3104550113,3145860560,296247880,1970579870,3078560182,3769228297,1714227617,3291629107,3898220290,166772364,1251581989,493813264,448347421,195405023,2709975567,677966185,3703036547,1463355134,2715995803,1338867538,1343315457,2802222074,2684532164,233230375,2599980071,2000651841,3277868038,1638401717,4028070440,3237316320,6314154,819756386,300326615,590932579,1405279636,3267499572,3150704214,2428286686,3959192993,3461946742,1862657033,1266418056,963775037,2089974820,2263052895,1917689273,448879540,3550394620,3981727096,150775221,3627908307,1303187396,508620638,2975983352,2726630617,1817252668,1876281319,1457606340,908771278,3720792119,3617206836,2455994898,1729034894,1080033504,976866871,3556439503,2881648439,1522871579,1555064734,1336096578,3548522304,2579274686,3574697629,3205460757,3593280638,3338716283,3079412587,564236357,2993598910,1781952180,1464380207,3163844217,3332601554,1699332808,1393555694,1183702653,3581086237,1288719814,691649499,2847557200,2895455976,3193889540,2717570544,1781354906,1676643554,2592534050,3230253752,1126444790,2770207658,2633158820,2210423226,2615765581,2414155088,3127139286,673620729,2805611233,1269405062,4015350505,3341807571,4149409754,1057255273,2012875353,2162469141,2276492801,2601117357,993977747,3918593370,2654263191,753973209,36408145,2530585658,25011837,3520020182,2088578344,530523599,2918365339,1524020338,1518925132,3760827505,3759777254,1202760957,3985898139,3906192525,674977740,4174734889,2031300136,2019492241,3983892565,4153806404,3822280332,352677332,2297720250,60907813,90501309,3286998549,1016092578,2535922412,2839152426,457141659,509813237,4120667899,652014361,1966332200,2975202805,55981186,2327461051,676427537,3255491064,2882294119,3433927263,1307055953,942726286,933058658,2468411793,3933900994,4215176142,1361170020,2001714738,2830558078,3274259782,1222529897,1679025792,2729314320,3714953764,1770335741,151462246,3013232138,1682292957,1483529935,471910574,1539241949,458788160,3436315007,1807016891,3718408830,978976581,1043663428,3165965781,1927990952,4200891579,2372276910,3208408903,3533431907,1412390302,2931980059,4132332400,1947078029,3881505623,4168226417,2941484381,1077988104,1320477388,886195818,18198404,3786409e3,2509781533,112762804,3463356488,1866414978,891333506,18488651,661792760,1628790961,3885187036,3141171499,876946877,2693282273,1372485963,791857591,2686433993,3759982718,3167212022,3472953795,2716379847,445679433,3561995674,3504004811,3574258232,54117162,3331405415,2381918588,3769707343,4154350007,1140177722,4074052095,668550556,3214352940,367459370,261225585,2610173221,4209349473,3468074219,3265815641,314222801,3066103646,3808782860,282218597,3406013506,3773591054,379116347,1285071038,846784868,2669647154,3771962079,3550491691,2305946142,453669953,1268987020,3317592352,3279303384,3744833421,2610507566,3859509063,266596637,3847019092,517658769,3462560207,3443424879,370717030,4247526661,2224018117,4143653529,4112773975,2788324899,2477274417,1456262402,2901442914,1517677493,1846949527,2295493580,3734397586,2176403920,1280348187,1908823572,3871786941,846861322,1172426758,3287448474,3383383037,1655181056,3139813346,901632758,1897031941,2986607138,3066810236,3447102507,1393639104,373351379,950779232,625454576,3124240540,4148612726,2007998917,544563296,2244738638,2330496472,2058025392,1291430526,424198748,50039436,29584100,3605783033,2429876329,2791104160,1057563949,3255363231,3075367218,3463963227,1469046755,985887462],w=[1332899944,1700884034,1701343084,1684370003,1668446532,1869963892];return e.encodeBase64=c,e.decodeBase64=h,e}),define("back4app-entity/models/User",["require","exports","module","./Entity","bluebird","bcryptjs"],function(e,t,n){"use strict";function o(e){var t=this;return new i(function(n){s.compare(e,t.password,function(e,t){n(t)})})}var r=e("./Entity"),i=e("bluebird"),s=e("bcryptjs");n.exports=r.specify({name:"User",attributes:{username:{type:"String",multiplicity:"1","default":""},email:{type:"String",multiplicity:"1","default":""},password:{type:"String",multiplicity:"1","default":""}},methods:{authenticate:o},nameValidation:!1})}),define("back4app-entity/models/index",["require","exports","module","./Entity","./EntitySpecification","./attributes","./methods","./errors","./User"],function(e,t,n){var r=e("./Entity"),i=e("./EntitySpecification"),s=e("./attributes"),o=e("./methods"),u=e("./errors"),a=e("./User");n.exports={},n.exports.Entity=r,n.exports.EntitySpecification=i,n.exports.attributes=s,n.exports.methods=o,n.exports.errors=u,n.exports.User=a}),define("back4app-entity/models",["back4app-entity/models/index"],function(e){return e}),define("back4app-entity/adapters/index",["require","exports","module","./Adapter"],function(e,t,n){"use strict";var r=e("./Adapter");n.exports={},n.exports.Adapter=r}),define("back4app-entity/adapters",["back4app-entity/adapters/index"],function(e){return e}),define("back4app-entity/index",["require","exports","module","./utils","./settings","./models","./adapters"],function(e,t,n){var r=e("./utils"),i=e("./settings"),s=e("./models"),o=e("./adapters");n.exports={},n.exports.utils=r,n.exports.settings=i,n.exports.models=s,n.exports.adapters=o}),define("back4app-entity",["back4app-entity/index"],function(e){return e});